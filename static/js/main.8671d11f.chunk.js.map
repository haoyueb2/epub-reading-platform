{"version":3,"sources":["components/Home/index.jsx","components/Home/Nav0.jsx","components/Home/Footer0.jsx","components/Home/Banner0.jsx","components/Home/Content0.jsx","components/Home/Content13.jsx","components/Home/data.source.js","components/Page2/book_gallery.jsx","actions/error_actions.jsx","actions/session_actions.jsx","components/Page3/index.jsx","components/Page2/index.jsx","reducers/selectors.js","actions/book_actions.jsx","components/Page2/SVGLoader.js","components/Page2/animation.js","components/Page2/book_show.jsx","components/Page2/book_show_container.js","components/Reader/Control/Navigation.jsx","components/Reader/model/Note.js","components/Reader/Control/EditorToolbar.jsx","components/Reader/Control/NoteCard.jsx","components/Reader/service/Config.js","components/Reader/service/Util.js","components/Reader/service/AutoBookmark.js","components/Reader/Control/ViewArea.jsx","components/Reader/Control/Draggable.jsx","components/Reader/model/Bookmark.js","components/Reader/Control/Toolbar.jsx","components/Reader/Control/SettingsDialog.jsx","components/Reader/Control/Bookmark.jsx","components/Reader/Control/Bookmarks.jsx","components/Reader/service/DBUtil.js","components/Reader/Control/Note.jsx","components/Reader/Control/Notes.jsx","components/Reader/Control/Message.jsx","components/Reader/Control/ExportPanel.jsx","components/App.js","components/Reader/Control/Viewer.jsx","components/Reader/Control/App.jsx","components/Session/session_form.jsx","components/Session/session_form_container.js","components/Session/index.jsx","components/Page4/index.jsx","components/root.jsx","serviceWorker.js","reducers/session_reducer.js","reducers/book_reducer.jsx","reducers/error_reducer.js","reducers/root_reducer.js","store/store.js","index.js"],"names":["isMobile","Item","es_menu","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","phoneClick","menu","findDOMNode","phoneOpen","state","setState","menuHeight","scrollHeight","_this2","esm_extends","dataSource","_this$state","navData","Menu","children","navChildren","keys","map","key","i","react_default","a","createElement","assign","toString","react_router_dom","to","href","target","es","component","animation","opacity","type","wrapper","page","className","concat","x","ease","logo","mobileMenu","onClick","ref","c","style","height","mode","defaultSelectedKeys","theme","React","Component","Footer","ScrollOverPack_default","OverPack","y","copyright","PureComponent","Banner","currentProps","rc_queue_anim_es","delay","textWrapper","title","match","src","width","alt","content","yoyo","repeat","duration","es_icon","Content","getBlockChildren","data","item","col","icon","listChildren","block","titleWrapper","name","indexOf","objectSpread","leaveReverse","row","Content13","Nav00DataSource","Banner00DataSource","button","Content00DataSource","playScale","md","xs","Content130DataSource","Footer00DataSource","enquireScreen","b","location","window","Home","show","port","setTimeout","_this3","Banner0","id","Content0","Home_Content13","d","dom","receiveErrors","errors","receiveCurrentUser","currentUser","IconText","_ref","text","marginRight","Index","delete_bookshelf","bind","assertThisInitialized","fetchBookshelf","fetch","webBase","then","res","json","myBookShelf","books","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","tmp","value","push","book_id","err","return","bookID","user","user_id","headers","Content-Type","method","body","JSON","stringify","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_this4","background","padding","minHeight","list","itemLayout","size","footer","renderItem","actions","Page3_IconText","author","es_button","extra","cover_image_url","Meta","description","withRouter","connect","ownProps","session","dispatch","BookGallery","allbooks","book","index","BookIndex","requestBookIndex","book_gallery","values","payload","console","log","SVGLoader","manager","DefaultLoadingManager","prototype","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","parse","parseArcCommand","rx","ry","x_axis_rotation","large_arc_flag","sweep_flag","start","end","Math","PI","abs","dx2","dy2","x1p","cos","sin","y1p","rxs","rys","x1ps","y1ps","cr","s","sqrt","dq","pq","q","max","cxp","cyp","cx","cy","theta","svgAngle","delta","currentPath","absellipse","ux","uy","vx","vy","dot","len","ang","acos","min","parseStyle","node","hasAttribute","fill","getAttribute","isVisible","getReflection","parseFloats","string","array","split","length","number","lastIndexOf","splice","parseFloat","getTransformScaleX","m","te","elements","getTransformScaleY","paths","transformStack","tempTransform0","Matrix3","tempTransform1","tempTransform2","tempTransform3","currentTransform","parseNode","nodeType","transform","transformsTexts","tIndex","transformText","openParPos","closeParPos","transformType","substr","identity","tx","ty","translate","angle","rotate","multiplyMatrices","scaleX","scaleY","scale","set","tan","premultiply","parseTransformNode","copy","getNodeTransform","nodeName","ShapePath","color","setStyle","point","Vector2","control","firstPoint","isFirstPoint","doSetFirstPoint","commands","l","command","charAt","trim","numbers","j","jl","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","clone","autoClose","curves","currentPoint","parsePathNode","w","h","parseRectNode","replace","parsePolygonNode","parsePolylineNode","r","subpath","Path","absarc","subPaths","parseCircleNode","parseEllipseNode","x1","y1","x2","y2","parseLineNode","transfVec2","v2","tempV3","applyMatrix3","isTransformRotated","tempV2","Vector3","n","subPath","curve","isLineCurve","v1","isCubicBezierCurve","v0","v3","isQuadraticBezierCurve","isEllipseCurve","aX","aY","xRadius","yRadius","transformPath","nodes","childNodes","pop","DOMParser","parseFromString","documentElement","Scene","_useState","useState","_useState2","slicedToArray","shapes","_useState3","_useState4","toggle","useEffect","setInterval","Promise","resolve","flatten","group","toShapes","shape","transitions","useTransition","uuid","from","position","rotation","enter","leave","order","lazy","trail","unique","reset","deg","THREE","degToRad","three","_ref$item","_ref$props","mesh","interpolate","z","meshPhongMaterial","attach","side","depthWrite","transparent","args","Animation","dist","camera","fov","near","far","intensity","BookShow","TextArea","handleChange","e","handleSubmit","submitting","params","bookshelf_item","animation_Animation","addToShelf","descriptions","bordered","label","Navigation","open","help","chapterList","handleClose","handleOpen","handleHelp","myRef","createRef","toc","epub","getToc","chapters","getChapters","bindEventForChapters","current","appendChild","collapse","ul","document","forEach","str","li","innerHTML","subitems","addEventListener","event","toLowerCase","goto","isRendered","preventDefault","_this$props","classes","fontColor","IconButton_default","Menu_default","Drawer_default","onClose","Typography_default","align","withStyles","left","top","zIndex","flex","marginTop","marginBottom","Note","bookKey","chapter","cfi","range","note","Date","getTime","EditorToolbar","createNote","closeMenu","handleHighlight","handleCopyPlainText","iframe","getElementsByTagName","iDoc","contentDocument","sel","getSelection","getRangeAt","cfiBase","renderer","currentChapter","EPUBJS","EpubCFI","generateCfiFromRange","spinePos","epubTitle","charRange","rangy","saveCharacterRanges","serial","parseInt","dataset","isNaN","setKey","pen","highlightSelection","empty","addNote","stopPropagation","execCommand","_this$props2","posX","posY","colors","root","visibility","backgroundColor","bottom","borderTopColor","data-color","ContentCut_default","display","alignItems","borderRadius","cursor","transition","&:hover","&:active","orange","borderWidth","borderStyle","borderColor","marginLeft","NoteCard","handleBlur","nextProps","updateNote","textArea","card","textarea","onChange","onBlur","placeholder","boxShadow","right","margin","fontFamily","fontSize","border","outline","resize","&::-webkit-input-placeholder","fontStyle","&::-moz-placeholder","Config","lineHeight","letterSpacing","wordSpacing","column","gutter","disablePopup","localStorage","getItem","getDefaultConfigObj","config","setItem","get","css1","css2","join","Util","element","attr","currentStyle","getComputedStyle","script","doc","arguments","scriptEl","getElementById","defer","css","textContent","head","getDefaultCss","arr","inner","outer","outerDoc","innerDoc","getUserStyle","addCss","getUserScript","resetConfig","applyCss","addDefaultCss","applyScript","AutoBookmark","obj","ViewArea","openMenu","openNoteCard","mPosX","mPosY","nPosX","nPosY","notes","prev","closeNoteCard","renderNotes","getPen","setNote","removeEventListener","copyTextHack","renderTo","bindEvent","gotoCfi","getCfi","copyText","clipboardData","setData","isFirefox","navigator","userAgent","lock","arrowKeys","keyCode","prevPage","nextPage","mouseFirefox","detail","mouseChrome","wheelDelta","which","ctrlKey","on","_this2$props","getCurrentLocationCfi","recordCfi","isCollapsed","rect","rangePosition","clientX","clientY","getStyle","noteCard","createHighlighter","ignoreWhiteSpace","elementTagName","elementProperties","onclick","_this3$props","currentTarget","getNote","onElementCreate","applier","createClassApplier","addClassApplier","getNotesByChapter","iWin","contentWindow","defaultView","serializeSelection","removeAllHighlights","temp","restoreCharacterRanges","warn","deserializeSelection","_this$props3","deleteNote","forceSingle","pageArea","NavigateBefore_default","arrow","NavigateNext_default","Control_EditorToolbar","Control_NoteCard","justifyContent","Draggable","startX","startY","sourceX","sourceY","move","_ref2","_ref3","currentY","distX","distY","maxEX","innerWidth","maxEY","innerHeight","onMouseDown","Bookmark","Toolbar","isFullScreen","handleFullScreen","handleExitFullScreen","handleScreen","handleSettings","handleNotes","handleBookmarks","handleAddBookmark","handleExit","hide","de","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","toggleSettingsDialog","toggleNotes","toggleBookmarks","findFirstVisible","bookmark","toggleMessage","history","fullScreen","exitFullScreen","showToolbar","Control_Draggable","onMouseOver","onMouseOut","DragHandle_default","Fullscreen_default","FullscreenExit_default","Settings_default","Sort_default","FormatListBulleted_default","Bookmark_default","ExitToApp_default","SettingsDialog","changeTheme","changeColors","changeColumn","changeGutter","changePadding","changeFontConfig","changeUserStyle","resetUserStyle","handleColorsChange","handleOtherChange","defineProperty","toggleTheme","colors1","setConfig","num","alert","file","files","reader","FileReader","readAsText","onerror","onload","result","resetStyle","color0","color1","color2","color3","Dialog_default","onRequestClose","Dialog","Divider_default","box","Tooltip_default","placement","Brightness5_default","Brightness4_default","colorBox","colorItem","input","controlBox","caption","Form","Checkbox_default","checked","Restore_default","Button_default","minWidth","shadows","grey","flexWrap","borderBottom","&:focus","textAlign","green","BookmarkItem","editable","handleClick","handleRemove","handleEdit","handleSave","deleteBookmark","updateBookmark","noWrap","editButton","TextFields_default","saveButton","Done_default","Grid_default","container","RemoveCircleOutline_default","overflow","Bookmarks","gutterBottom","bookmarks","Control_Bookmark","listStyle","overflowX","DBUtil","dbName","storeName","version","indexedDB","error","db","request","onsuccess","errorCode","onupgradeneeded","objectStoreNames","contains","createObjectStore","keyPath","success","req","transaction","objectStore","add","delete","_this5","_this6","openCursor","continue","put","close","handleJump","handleDelete","autoFocus","noteContent","Clear_default","ArrowForward_default","flexGrow","Notes","handleExport","toggleExport","anchor","Control_Note","foot","dense","flexDirection","flexShrink","Message","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","SnackbarContentProps","aria-describedby","message","action","Transition","Slide_default","direction","ExportPanel","copyHandler","generateArticle","handleCopy","format","article","divider","fragment","headRight","Close_default","quote","annotation","borderBottomWidth","borderBottomStyle","palette","paper","primary","overflowY","fontWeight","paddingBottom","borderLeft","paddingLeft","ePub","Viewer","openSettings","openBookmarks","openNotes","openMessage","openExport","addBookmark","dbAccess","getAll","bookmarksArr","filter","noteDBAccess","noteArr","init","remove","update","_this7","_this8","readingBook","Reader_Control_Navigation","Control_ViewArea","Reader_Control_Toolbar","handleReading","Control_Bookmarks","getBookmark","Control_Notes","Control_SettingsDialog","Control_Message","Control_ExportPanel","App","isReading","handleReadingBook","bgColor","themeType","createMuiTheme","Control_Viewer","material_ui_styles","Search","es_input","SessionForm","username","password","username2","password2","guestSubmit","handleRegister","toAdmin","clearErrors","processForm","processRegister","field","loggedIn","es_alert","getFieldDecorator","form","es_form","onSubmit","rules","required","prefix","htmlType","guestlogin","handleAlert","logout","displayLogin","enterButton","onSearch","WrappedNormalLoginForm","create","Boolean","login","register","Session","session_form_container","cover_img_url","authorization","info","status","fileList","upload","Page4_Search","WrappedForm","pathname","Nav0","Footer0","controlHeader","react_router","exact","Book","Admin","Page3","SReader","controlFooter","Root","store","react_redux_es","integration_react","persistor","persistStore","components_App","hostname","nullUser","freeze","SessionReducer","merge","BooksReducer","ErrorsReducer","rootReducer","combineReducers","ErrorReducer","middleware","thunk","storage","reducer","persistReducer","reduxStore","createStore","composeWithDevTools","applyMiddleware","apply","ReactDOM","render","components_root","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8671d11f.chunk.js","sourcesContent":["/* eslint no-undef: 0 */\n/* eslint arrow-parens: 0 */\nimport React from 'react';\nimport { enquireScreen } from 'enquire-js';\n\n\nimport Banner0 from './Banner0';\nimport Content0 from './Content0';\n\nimport Content13 from './Content13';\n\nimport {\n  Banner00DataSource,\n  Content00DataSource,\n  Content130DataSource,\n} from './data.source.js';\n\nimport './less/antMotionStyle.less';\n\nlet isMobile;\nenquireScreen((b) => {\n  isMobile = b;\n});\n\nconst location = window.location;\n\nexport default class Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMobile,\n      show: !location.port, // 如果不是 dva 2.0 请删除\n    };\n  }\n\n  componentDidMount() {\n    // 适配手机屏幕;\n    enquireScreen((b) => {\n      this.setState({ isMobile: !!b });\n    });\n    // dva 2.0 样式在组件渲染之后动态加载，导致滚动组件不生效；线上不影响；\n    /* 如果不是 dva 2.0 请删除 start */\n    if (location.port) {\n      // 样式 build 时间在 200-300ms 之间;\n      setTimeout(() => {\n        this.setState({\n          show: true,\n        });\n      }, 500);\n    }\n    /* 如果不是 dva 2.0 请删除 end */\n  }\n\n  render() {\n    const children = [\n      <Banner0\n        id=\"Banner0_0\"\n        key=\"Banner0_0\"\n        dataSource={Banner00DataSource}\n        isMobile={this.state.isMobile}\n      />,\n      <Content0\n        id=\"Content0_0\"\n        key=\"Content0_0\"\n        dataSource={Content00DataSource}\n        isMobile={this.state.isMobile}\n      />,\n      <Content13\n        id=\"Content13_0\"\n        key=\"Content13_0\"\n        dataSource={Content130DataSource}\n        isMobile={this.state.isMobile}\n      />,\n    ];\n    return (\n      <div\n        className=\"templates-wrapper\"\n        ref={(d) => {\n          this.dom = d;\n        }}\n      >\n        {/* 如果不是 dva 2.0 替换成 {children} start */}\n        {this.state.show && children}\n        {/* 如果不是 dva 2.0 替换成 {children} end */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport TweenOne from 'rc-tween-one';\nimport { Menu } from 'antd';\nimport { Link } from \"react-router-dom\";\n\nconst Item = Menu.Item;\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phoneOpen: false,\n      menuHeight: 0,\n    };\n  }\n\n  phoneClick = () => {\n    const menu = findDOMNode(this.menu);\n    const phoneOpen = !this.state.phoneOpen;\n    this.setState({\n      phoneOpen,\n      menuHeight: phoneOpen ? menu.scrollHeight : 0,\n    });\n  };\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource, isMobile } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const { menuHeight, phoneOpen } = this.state;\n    const navData = dataSource.Menu.children;\n    const navChildren = Object.keys(navData).map((key, i) => (\n      <Item key={i.toString()} {...navData[key]}>\n        <Link\n          {...navData[key].a}\n          to={navData[key].a.href}\n          target={navData[key].a.target}\n        >\n          {navData[key].a.children}\n        </Link>\n      </Item>\n    ));\n    return (\n      <TweenOne\n        component=\"header\"\n        animation={{ opacity: 0, type: 'from' }}\n        {...dataSource.wrapper}\n        {...props}\n      >\n        <div\n          {...dataSource.page}\n          className={`${dataSource.page.className}${phoneOpen ? ' open' : ''}`}\n        >\n          <TweenOne\n            animation={{ x: -30, type: 'from', ease: 'easeOutQuad' }}\n            {...dataSource.logo}\n          >\n\n          </TweenOne>\n          {isMobile && (\n            <div\n              {...dataSource.mobileMenu}\n              onClick={() => {\n                this.phoneClick();\n              }}\n            >\n              <em />\n              <em />\n              <em />\n            </div>\n          )}\n          <TweenOne\n            {...dataSource.Menu}\n            animation={{ x: 30, type: 'from', ease: 'easeOutQuad' }}\n            ref={(c) => {\n              this.menu = c;\n            }}\n            style={isMobile ? { height: menuHeight } : null}\n          >\n            <Menu\n              mode={isMobile ? 'inline' : 'horizontal'}\n              defaultSelectedKeys={['0']}\n              theme={isMobile ? 'dark' : 'default'}\n            >\n              {navChildren}\n            </Menu>\n          </TweenOne>\n        </div>\n      </TweenOne>\n    );\n  }\n}\n\nexport default Header;\n","import React from 'react';\nimport TweenOne from 'rc-tween-one';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\n\nclass Footer extends React.PureComponent {\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <OverPack {...dataSource.OverPack}>\n          <TweenOne\n            animation={{ y: '+=30', opacity: 0, type: 'from' }}\n            key=\"footer\"\n            {...dataSource.copyright}\n          >\n            {dataSource.copyright.children}\n          </TweenOne>\n        </OverPack>\n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","import React from 'react';\nimport { Button, Icon } from 'antd';\nimport QueueAnim from 'rc-queue-anim';\nimport TweenOne from 'rc-tween-one';\n\nclass Banner extends React.PureComponent {\n  render() {\n    const {...currentProps}  = this.props;\n\n    const  {dataSource} = currentProps;\n\n    delete currentProps.dataSource;\n    delete currentProps.isMobile;\n    return (\n      <div {...currentProps} {...dataSource.wrapper}>\n        <QueueAnim\n          key=\"QueueAnim\"\n          type={['bottom', 'top']}\n          delay={200}\n          {...dataSource.textWrapper}\n        >\n          <div key=\"title\" {...dataSource.title}>\n            {dataSource.title.children.match(\n              /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n            ) ? (\n              <img src={dataSource.title.children} width=\"100%\" alt=\"img\" />\n              ) : (\n                dataSource.title.children\n              )}\n          </div>\n          <div key=\"content\" {...dataSource.content}>\n            {dataSource.content.children}\n          </div>\n\n        </QueueAnim>\n        <TweenOne\n          animation={{\n            y: '-=20',\n            yoyo: true,\n            repeat: -1,\n            duration: 1000,\n          }}\n          className=\"banner0-icon\"\n          key=\"icon\"\n        >\n          <Icon type=\"down\" />\n        </TweenOne>\n      </div>\n    );\n  }\n}\nexport default Banner;\n","import React from 'react';\nimport QueueAnim from 'rc-queue-anim';\nimport { Row, Col } from 'antd';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\n\nclass Content extends React.PureComponent {\n  getBlockChildren = data => data.map((item, i) => {\n    const children = item.children;\n    return (\n      <Col key={i.toString()} {...item}>\n        <div {...children.icon}>\n          <img src={children.icon.children} width=\"100%\" alt=\"img\" />\n        </div>\n        <h3 {...children.title}>{children.title.children}</h3>\n        <p {...children.content}>{children.content.children}</p>\n      </Col>\n    );\n  });\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const listChildren = this.getBlockChildren(dataSource.block.children);\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <div {...dataSource.page}>\n          <div {...dataSource.titleWrapper}>\n            {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n              item.name.indexOf('title') === 0 ? 'h1' : 'div',\n              { key: i.toString(), ...item },\n              item.children.match(\n                /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n              )\n                ? React.createElement('img', {\n                  src: item.children,\n                  height: '100%',\n                  alt: 'img',\n                })\n                : item.children\n            )\n            )}\n          </div>\n          <OverPack {...dataSource.OverPack}>\n            <QueueAnim\n              type=\"bottom\"\n              key=\"block\"\n              leaveReverse\n              {...dataSource.block}\n              component={Row}\n            >\n              {listChildren}\n            </QueueAnim>\n          </OverPack>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Content;\n","import React from 'react';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\nimport QueueAnim from 'rc-queue-anim';\n\nclass Content13 extends React.PureComponent {\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    return (\n      <OverPack {...props} {...dataSource.OverPack}>\n        <QueueAnim\n          type=\"bottom\"\n          leaveReverse\n          key=\"page\"\n          delay={[0, 100]}\n          {...dataSource.titleWrapper}\n        >\n          {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n            item.name.indexOf('title') === 0 ? 'h1' : 'div',\n            { key: i.toString(), ...item },\n            item.children.match(/\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/)\n              ? React.createElement('img', { src: item.children, alt: 'img' })\n              : item.children\n          )\n          )}\n        </QueueAnim>\n      </OverPack>\n    );\n  }\n}\n\nexport default Content13;\n","import React from 'react';\n\nexport const Nav00DataSource = {\n  wrapper: { className: 'header0 home-page-wrapper' },\n  page: { className: 'home-page' },\n  logo: {\n    className: 'header0-logo',\n    //children: 'https://os.alipayobjects.com/rmsportal/mlcYmsRilwraoAe.svg',\n    children: '玖读平台',\n  },\n  Menu: {\n    className: 'header0-menu',\n    children: [\n      { name: 'item0', a: { children: '首页', href: '/' } },\n      { name: 'item1', a: { children: '书城', href: '/page2' } },\n      { name: 'item2', a: { children: '书架', href: '/page3' } },\n      { name: 'item3', a: { children: '登录', href: '/session' } },\n    ],\n  },\n  mobileMenu: { className: 'header0-mobile-menu' },\n};\nexport const Banner00DataSource = {\n  wrapper: { className: 'banner0' },\n  textWrapper: { className: 'banner0-text-wrapper' },\n  title: {\n    className: 'banner0-title',\n    children: 'logo.svg',\n  },\n  content: {\n    className: 'banner0-content',\n    children: (\n      <span>\n        <p>玖读</p>\n        <p>epub电子书阅读平台</p>\n      </span>\n    ),\n  },\n  button: { className: 'banner0-button', children: 'Learn More' },\n};\nexport const Content00DataSource = {\n  wrapper: { className: 'home-page-wrapper content0-wrapper' },\n  page: { className: 'home-page content0' },\n  OverPack: { playScale: 0.3, className: '' },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [{ name: 'title', children: '综合阅读体验' }],\n  },\n  block: {\n    className: 'block-wrapper',\n    children: [\n      {\n        name: 'block0',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/WBnVOjtIlGWbzyQivuyq.png',\n          },\n          title: { children: '书城浏览' },\n          content: { children: '每本书都有动画场景' },\n        },\n      },\n      {\n        name: 'block1',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/YPMsLQuCEXtuEkmXTTdk.png',\n          },\n          title: { children: '加入书架' },\n          content: { children: '用户看到感兴趣的书在登录后可以加入书架' },\n        },\n      },\n      {\n        name: 'block2',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/EkXWVvAaFJKCzhMmQYiX.png',\n          },\n          title: { children: '支持epub' },\n          content: { children: '在每日的阅读中积累知识' },\n        },\n      },\n    ],\n  },\n};\n\nexport const Content130DataSource = {\n  OverPack: {\n    className:\n      'home-page-wrapper content13-wrapper home-page-wrapper content13-wrapper jnwq7vhwgqg-editor_css',\n    playScale: 0.3,\n  },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [\n      { name: 'title', children: '开始你的阅读之旅吧', className: 'title-h1' },\n      {\n        name: 'content',\n        children:\n          '在书城查找你感兴趣的书，感受svg动画体验',\n        className: 'title-content',\n      },\n      {\n        name: 'content2',\n        children: '登录后即可加入书架开始阅读',\n        className: 'title-content',\n      },\n    ],\n  },\n};\nexport const Content120DataSource = {\n  wrapper: { className: 'home-page-wrapper content12-wrapper' },\n  page: { className: 'home-page content12' },\n  OverPack: { playScale: 0.3, className: '' },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [{ name: 'title', children: '特别鸣谢', className: 'title-h1' }],\n  },\n  block: {\n    className: 'img-wrapper',\n    children: [\n      {\n        name: 'block0',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/TFicUVisNHTOEeMYXuQF.svg',\n          },\n        },\n      },\n      {\n        name: 'block1',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/hkLGkrlCEkGZeMQlnEkD.svg',\n          },\n        },\n      },\n      {\n        name: 'block2',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/bqyPRSZmhvrsfJrBvASi.svg',\n          },\n        },\n      },\n      {\n        name: 'block3',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/UcsyszzOabdCYDkoPPnM.svg',\n          },\n        },\n      },\n      {\n        name: 'block4',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/kRBeaICGexAmVjqBEqgw.svg',\n          },\n        },\n      },\n      {\n        name: 'block5',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/ftBIiyJcCHpHEioRvPsV.svg',\n          },\n        },\n      },\n    ],\n  },\n};\nexport const Footer00DataSource = {\n  wrapper: { className: 'home-page-wrapper footer0-wrapper' },\n  OverPack: { className: 'home-page footer0', playScale: 0.05 },\n  copyright: {\n    className: 'copyright',\n    children: (\n      <span>\n        ©2019 同济大学软件学院web课程项目 made by 白皓月\n      </span>\n    ),\n  },\n};\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {withRouter} from 'react-router';\r\nimport { enquireScreen } from 'enquire-js';\r\n\r\n\r\nlet isMobile;\r\nenquireScreen((b) => {\r\n    isMobile = b;\r\n});\r\nclass BookGallery extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            isMobile,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        // 适配手机屏幕;\r\n        enquireScreen((b) => {\r\n            this.setState({ isMobile: !!b });\r\n        });\r\n    }\r\n    render(){\r\n        if (this.props.books) {\r\n            let allbooks = this.props.books.map( (book, index) =>  {\r\n                var id = book.book_id || book.id;\r\n                return (\r\n\r\n                    <div className='div-book' key= {(index)}>\r\n                        <Link to={`/page2/${id}`}>\r\n                            <img className='front-image' src={book.cover_image_url} alt={book.title} />\r\n                        </Link>\r\n                    </div>\r\n\r\n                );\r\n            });\r\n            if(this.state.isMobile)\r\n            return (\r\n                <div className='index-main'>\r\n                <div className='book-index-div1'>\r\n                    <div className='book-index-lower-div1'>\r\n\r\n                        { allbooks }\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            );\r\n            //如果是PC端\r\n            else\r\n                return(\r\n                    <div className='index-main'>\r\n                        <div className='book-index-div'>\r\n                            <div className='book-index-lower-div'>\r\n\r\n                                { allbooks }\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                )\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(BookGallery);\r\n","export const RECEIVE_ERRORS = \"RECEIVE_ERRORS\";\r\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\r\n\r\nexport const receiveErrors = errors => {\r\n    return {\r\n        type: RECEIVE_ERRORS,\r\n        errors\r\n    };\r\n};\r\n\r\nexport const clearErrors = (errors) => {\r\n    return {\r\n        type: CLEAR_ERRORS,\r\n        errors\r\n    };\r\n};\r\n","\r\nimport { receiveErrors } from './error_actions';\r\nexport const RECEIVE_CURRENT_USER = 'RECEIVE_CURRENT_USER';\r\n\r\nexport const receiveCurrentUser = currentUser => ({\r\n    type: RECEIVE_CURRENT_USER,\r\n    currentUser\r\n});\r\n\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\nexport const logout = () => ({\r\n    type:'LOGOUT'\r\n})\r\n\r\nexport const login = user => dispatch => (\r\n    fetch( window.webBase+\"api/session\", {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        method: 'POST',\r\n        body: JSON.stringify(user)\r\n    }).then(res=>res.json()).then(json => (\r\n        dispatch(receiveCurrentUser(json))\r\n    ), err => (\r\n        dispatch(receiveErrors(err))\r\n\r\n    ))\r\n);\r\n\r\nexport const register = user => dispatch => (\r\n    fetch( window.webBase+\"api/user\", {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        method: 'POST',\r\n        body: JSON.stringify(user)\r\n    }).then(res=>res.json()).then(json => (\r\n        dispatch(receiveCurrentUser(json))\r\n    ), err => (\r\n        dispatch(receiveErrors(err))\r\n    ))\r\n);\r\n\r\n\r\n\r\n","/* eslint no-undef: 0 */\r\n/* eslint arrow-parens: 0 */\r\nimport React from 'react';\r\nimport {withRouter} from \"react-router\";\r\nimport {connect} from \"react-redux\";\r\nimport {List, Rate, Icon, Button} from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport {receiveErrors} from \"../../actions/error_actions\";\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\nconst IconText = ({ type, text }) => (\r\n    <span>\r\n    <Icon type={type} style={{ marginRight: 8 }} />\r\n        {text}\r\n  </span>\r\n);\r\nclass Index extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n        };\r\n        this.delete_bookshelf =this.delete_bookshelf.bind(this);\r\n        this.fetchBookshelf = this.fetchBookshelf(this);\r\n    }\r\n    //只在本组件用不再使用redux\r\n\r\n\r\n    componentWillMount() {\r\n        if(this.props.currentUser != null) {\r\n            fetch(window.webBase+\"api/bookshelf/\" + this.props.currentUser.id).then(res=>res.json()).then(\r\n                json=>{\r\n                    let myBookShelf=[];\r\n                    if(this.props.books!=null)\r\n                        for(let tmp of json) {\r\n                            myBookShelf.push(this.props.books[tmp.book_id]);\r\n                        }\r\n                    this.setState({\r\n                        data: myBookShelf,\r\n                    });\r\n                }\r\n            )\r\n        }\r\n    }\r\n    fetchBookshelf() {\r\n\r\n    }\r\n    delete_bookshelf(bookID) {\r\n        let user = {\r\n            user_id:this.props.currentUser.id,\r\n            book_id:bookID\r\n        };\r\n        fetch( window.webBase+\"api/delete_bookshelf\", {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify(user)\r\n        }).then(res=>{\r\n            fetch(window.webBase+\"api/bookshelf/\" + this.props.currentUser.id).then(res=>res.json()).then(\r\n                json=>{\r\n                    let myBookShelf=[];\r\n                    if(this.props.books!=null)\r\n                        for(let tmp of json) {\r\n                            myBookShelf.push(this.props.books[tmp.book_id]);\r\n                        }\r\n                    this.setState({\r\n                        data: myBookShelf,\r\n                    });\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div\r\n                className=\"templates-wrapper\"\r\n                ref={(d) => {\r\n                    this.dom = d;\r\n                }}\r\n            >\r\n\r\n                <div style={{ background: '#fff', padding: 24, minHeight: 280 }}>\r\n                    <h1>我的书架</h1>\r\n\r\n                    <List\r\n                        className=\"list\"\r\n                        itemLayout=\"vertical\"\r\n                        size=\"large\"\r\n                        dataSource={this.state.data}\r\n                        footer={< div > <b>我的</b> 书架</div >}\r\n                        renderItem={\r\n                            item => (\r\n\r\n                                <List.Item\r\n                                    key={item.title}\r\n                                    actions={[\r\n                                        <IconText type=\"user\" text={item.author}/>,\r\n                                        <Link to={`/page2/reader/`+item.title}><Button>开始阅读</Button></Link>,\r\n                                        <Button onClick={this.delete_bookshelf.bind(this,item.id)}>移出书架</Button>\r\n                                    ]\r\n                                    }\r\n                                    extra={<img width={100} alt=\"logo\" src= {item.cover_image_url} />}\r\n                                >\r\n\r\n                                    <List.Item.Meta\r\n                                        //avatar={<Avatar shape = \"square\" size = {150} src={item.poster} width = {100} alt=\"logo\"/>}\r\n                                        title={  item.title}\r\n                                        description={item.description}\r\n                                    />\r\n                                </List.Item>)}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        books:state.books,\r\n        currentUser: state.session.currentUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Index));","import React from 'react';\r\nimport {withRouter} from 'react-router';\r\n\r\nimport BookGallery from './book_gallery';\r\nimport \"./index.scss\"\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { requestBookIndex } from '../../actions/book_actions';\r\nimport { selectAllBooks } from '../../reducers/selectors';\r\n\r\nclass BookIndex extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.requestBookIndex();\r\n    }\r\n\r\n\r\n    render() {\r\n        return <BookGallery books={this.props.books}/>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        //将对象转化为数组，方便后续使用map\r\n        books: selectAllBooks(state.books),\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    requestBookIndex: () => dispatch(requestBookIndex()),\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(BookIndex));","import { values } from 'lodash';\r\n\r\nexport const selectAllBooks = (books) => {\r\n    return values(books);\r\n};","\r\nexport const RECEIVE_BOOKS = 'RECEIVE_BOOKS';\r\nexport const RECEIVE_ONE_BOOK = 'RECEIVE_ONE_BOOK';\r\nexport const RECEIVE_COMMENT= 'RECEIVE_COMMENT';\r\nexport const receiveBooks = book => ({\r\n    type: RECEIVE_BOOKS,\r\n    book\r\n});\r\nexport const receiveOneBook = book => {\r\n    return (\r\n        {\r\n            type: RECEIVE_ONE_BOOK,\r\n            book\r\n        }\r\n    );\r\n};\r\nexport const receiveComment = comment => ({\r\n    type: RECEIVE_COMMENT,\r\n    comment\r\n});\r\n\r\nexport const requestBookIndex = () => dispatch => (\r\n    fetch(window.webBase+\"api/books\").then(payload => (\r\n            payload.json())\r\n    .then(json=>{\r\n        //console.log(json);\r\n        dispatch(receiveBooks(json));\r\n    }),json=>{\r\n        console.log(\"error\")\r\n    })\r\n);\r\n\r\n","import { DefaultLoadingManager, FileLoader, Matrix3, Path, ShapePath, Vector2, Vector3 } from 'three'\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author zz85 / http://joshuakoo.com/\r\n * @author yomboprime / https://yombo.org\r\n */\r\n\r\nvar SVGLoader = function(manager) {\r\n    this.manager = manager !== undefined ? manager : DefaultLoadingManager\r\n}\r\n\r\nSVGLoader.prototype = {\r\n    constructor: SVGLoader,\r\n\r\n    load: function(url, onLoad, onProgress, onError) {\r\n        var scope = this\r\n\r\n        var loader = new FileLoader(scope.manager)\r\n        loader.setPath(scope.path)\r\n        loader.load(\r\n            url,\r\n            function(text) {\r\n                onLoad(scope.parse(text))\r\n            },\r\n            onProgress,\r\n            onError,\r\n        )\r\n    },\r\n\r\n    setPath: function(value) {\r\n        this.path = value\r\n        return this\r\n    },\r\n\r\n    parse: function(text) {\r\n        function parseNode(node, style) {\r\n            if (node.nodeType !== 1) return\r\n\r\n            var transform = getNodeTransform(node)\r\n\r\n            var path = null\r\n\r\n            switch (node.nodeName) {\r\n                case 'svg':\r\n                    break\r\n\r\n                case 'g':\r\n                    style = parseStyle(node, style)\r\n                    break\r\n\r\n                case 'path':\r\n                    style = parseStyle(node, style)\r\n                    if (node.hasAttribute('d') && isVisible(style)) path = parsePathNode(node, style)\r\n                    break\r\n\r\n                case 'rect':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseRectNode(node, style)\r\n                    break\r\n\r\n                case 'polygon':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parsePolygonNode(node, style)\r\n                    break\r\n\r\n                case 'polyline':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parsePolylineNode(node, style)\r\n                    break\r\n\r\n                case 'circle':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseCircleNode(node, style)\r\n                    break\r\n\r\n                case 'ellipse':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseEllipseNode(node, style)\r\n                    break\r\n\r\n                case 'line':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseLineNode(node, style)\r\n                    break\r\n            }\r\n\r\n            if (path) {\r\n                transformPath(path, currentTransform)\r\n\r\n                paths.push(path)\r\n            }\r\n\r\n            var nodes = node.childNodes\r\n\r\n            for (var i = 0; i < nodes.length; i++) {\r\n                parseNode(nodes[i], style)\r\n            }\r\n\r\n            if (transform) {\r\n                currentTransform.copy(transformStack.pop())\r\n            }\r\n        }\r\n\r\n        function parsePathNode(node, style) {\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var point = new Vector2()\r\n            var control = new Vector2()\r\n\r\n            var firstPoint = new Vector2()\r\n            var isFirstPoint = true\r\n            var doSetFirstPoint = false\r\n\r\n            var d = node.getAttribute('d')\r\n\r\n            // console.log( d );\r\n\r\n            var commands = d.match(/[a-df-z][^a-df-z]*/gi)\r\n\r\n            for (var i = 0, l = commands.length; i < l; i++) {\r\n                var command = commands[i]\r\n\r\n                var type = command.charAt(0)\r\n                var data = command.substr(1).trim()\r\n\r\n                if (isFirstPoint === true) {\r\n                    doSetFirstPoint = true\r\n                    isFirstPoint = false\r\n                }\r\n\r\n                switch (type) {\r\n                    case 'M':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            if (j === 0) {\r\n                                path.moveTo(point.x, point.y)\r\n                            } else {\r\n                                path.lineTo(point.x, point.y)\r\n                            }\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'H':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.x = numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'V':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.y = numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'L':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'C':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\r\n                            path.bezierCurveTo(\r\n                                numbers[j + 0],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                numbers[j + 5],\r\n                            )\r\n                            control.x = numbers[j + 2]\r\n                            control.y = numbers[j + 3]\r\n                            point.x = numbers[j + 4]\r\n                            point.y = numbers[j + 5]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'S':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.bezierCurveTo(\r\n                                getReflection(point.x, control.x),\r\n                                getReflection(point.y, control.y),\r\n                                numbers[j + 0],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                            )\r\n                            control.x = numbers[j + 0]\r\n                            control.y = numbers[j + 1]\r\n                            point.x = numbers[j + 2]\r\n                            point.y = numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'Q':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.quadraticCurveTo(numbers[j + 0], numbers[j + 1], numbers[j + 2], numbers[j + 3])\r\n                            control.x = numbers[j + 0]\r\n                            control.y = numbers[j + 1]\r\n                            point.x = numbers[j + 2]\r\n                            point.y = numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'T':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            var rx = getReflection(point.x, control.x)\r\n                            var ry = getReflection(point.y, control.y)\r\n                            path.quadraticCurveTo(rx, ry, numbers[j + 0], numbers[j + 1])\r\n                            control.x = rx\r\n                            control.y = ry\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'A':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\r\n                            var start = point.clone()\r\n                            point.x = numbers[j + 5]\r\n                            point.y = numbers[j + 6]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            parseArcCommand(\r\n                                path,\r\n                                numbers[j],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                start,\r\n                                point,\r\n                            )\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    //\r\n\r\n                    case 'm':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x += numbers[j + 0]\r\n                            point.y += numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            if (j === 0) {\r\n                                path.moveTo(point.x, point.y)\r\n                            } else {\r\n                                path.lineTo(point.x, point.y)\r\n                            }\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'h':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.x += numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'v':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.y += numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'l':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x += numbers[j + 0]\r\n                            point.y += numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'c':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\r\n                            path.bezierCurveTo(\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                                point.x + numbers[j + 4],\r\n                                point.y + numbers[j + 5],\r\n                            )\r\n                            control.x = point.x + numbers[j + 2]\r\n                            control.y = point.y + numbers[j + 3]\r\n                            point.x += numbers[j + 4]\r\n                            point.y += numbers[j + 5]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 's':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.bezierCurveTo(\r\n                                getReflection(point.x, control.x),\r\n                                getReflection(point.y, control.y),\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                            )\r\n                            control.x = point.x + numbers[j + 0]\r\n                            control.y = point.y + numbers[j + 1]\r\n                            point.x += numbers[j + 2]\r\n                            point.y += numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'q':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.quadraticCurveTo(\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                            )\r\n                            control.x = point.x + numbers[j + 0]\r\n                            control.y = point.y + numbers[j + 1]\r\n                            point.x += numbers[j + 2]\r\n                            point.y += numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 't':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            var rx = getReflection(point.x, control.x)\r\n                            var ry = getReflection(point.y, control.y)\r\n                            path.quadraticCurveTo(rx, ry, point.x + numbers[j + 0], point.y + numbers[j + 1])\r\n                            control.x = rx\r\n                            control.y = ry\r\n                            point.x = point.x + numbers[j + 0]\r\n                            point.y = point.y + numbers[j + 1]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'a':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\r\n                            var start = point.clone()\r\n                            point.x += numbers[j + 5]\r\n                            point.y += numbers[j + 6]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            parseArcCommand(\r\n                                path,\r\n                                numbers[j],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                start,\r\n                                point,\r\n                            )\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    //\r\n\r\n                    case 'Z':\r\n                    case 'z':\r\n                        path.currentPath.autoClose = true\r\n                        if (path.currentPath.curves.length > 0) {\r\n                            // Reset point to beginning of Path\r\n                            point.copy(firstPoint)\r\n                            path.currentPath.currentPoint.copy(point)\r\n                            isFirstPoint = true\r\n                        }\r\n                        break\r\n                }\r\n\r\n                // console.log( type, parseFloats( data ), parseFloats( data ).length  )\r\n\r\n                doSetFirstPoint = false\r\n            }\r\n\r\n            return path\r\n        }\r\n\r\n        /**\r\n         * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n         * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\r\n         * From\r\n         * rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n         * To\r\n         * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\r\n         */\r\n\r\n        function parseArcCommand(path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end) {\r\n            x_axis_rotation = (x_axis_rotation * Math.PI) / 180\r\n\r\n            // Ensure radii are positive\r\n            rx = Math.abs(rx)\r\n            ry = Math.abs(ry)\r\n\r\n            // Compute (x1′, y1′)\r\n            var dx2 = (start.x - end.x) / 2.0\r\n            var dy2 = (start.y - end.y) / 2.0\r\n            var x1p = Math.cos(x_axis_rotation) * dx2 + Math.sin(x_axis_rotation) * dy2\r\n            var y1p = -Math.sin(x_axis_rotation) * dx2 + Math.cos(x_axis_rotation) * dy2\r\n\r\n            // Compute (cx′, cy′)\r\n            var rxs = rx * rx\r\n            var rys = ry * ry\r\n            var x1ps = x1p * x1p\r\n            var y1ps = y1p * y1p\r\n\r\n            // Ensure radii are large enough\r\n            var cr = x1ps / rxs + y1ps / rys\r\n\r\n            if (cr > 1) {\r\n                // scale up rx,ry equally so cr == 1\r\n                var s = Math.sqrt(cr)\r\n                rx = s * rx\r\n                ry = s * ry\r\n                rxs = rx * rx\r\n                rys = ry * ry\r\n            }\r\n\r\n            var dq = rxs * y1ps + rys * x1ps\r\n            var pq = (rxs * rys - dq) / dq\r\n            var q = Math.sqrt(Math.max(0, pq))\r\n            if (large_arc_flag === sweep_flag) q = -q\r\n            var cxp = (q * rx * y1p) / ry\r\n            var cyp = (-q * ry * x1p) / rx\r\n\r\n            // Step 3: Compute (cx, cy) from (cx′, cy′)\r\n            var cx = Math.cos(x_axis_rotation) * cxp - Math.sin(x_axis_rotation) * cyp + (start.x + end.x) / 2\r\n            var cy = Math.sin(x_axis_rotation) * cxp + Math.cos(x_axis_rotation) * cyp + (start.y + end.y) / 2\r\n\r\n            // Step 4: Compute θ1 and Δθ\r\n            var theta = svgAngle(1, 0, (x1p - cxp) / rx, (y1p - cyp) / ry)\r\n            var delta = svgAngle((x1p - cxp) / rx, (y1p - cyp) / ry, (-x1p - cxp) / rx, (-y1p - cyp) / ry) % (Math.PI * 2)\r\n\r\n            path.currentPath.absellipse(cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation)\r\n        }\r\n\r\n        function svgAngle(ux, uy, vx, vy) {\r\n            var dot = ux * vx + uy * vy\r\n            var len = Math.sqrt(ux * ux + uy * uy) * Math.sqrt(vx * vx + vy * vy)\r\n            var ang = Math.acos(Math.max(-1, Math.min(1, dot / len))) // floating point precision, slightly over values appear\r\n            if (ux * vy - uy * vx < 0) ang = -ang\r\n            return ang\r\n        }\r\n\r\n        /*\r\n         * According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\r\n         * rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\r\n         */\r\n        function parseRectNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('x') || 0)\r\n            var y = parseFloat(node.getAttribute('y') || 0)\r\n            var rx = parseFloat(node.getAttribute('rx') || 0)\r\n            var ry = parseFloat(node.getAttribute('ry') || 0)\r\n            var w = parseFloat(node.getAttribute('width'))\r\n            var h = parseFloat(node.getAttribute('height'))\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.moveTo(x + 2 * rx, y)\r\n            path.lineTo(x + w - 2 * rx, y)\r\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y, x + w, y, x + w, y + 2 * ry)\r\n            path.lineTo(x + w, y + h - 2 * ry)\r\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y + h, x + w, y + h, x + w - 2 * rx, y + h)\r\n            path.lineTo(x + 2 * rx, y + h)\r\n\r\n            if (rx !== 0 || ry !== 0) {\r\n                path.bezierCurveTo(x, y + h, x, y + h, x, y + h - 2 * ry)\r\n            }\r\n\r\n            path.lineTo(x, y + 2 * ry)\r\n\r\n            if (rx !== 0 || ry !== 0) {\r\n                path.bezierCurveTo(x, y, x, y, x + 2 * rx, y)\r\n            }\r\n\r\n            return path\r\n        }\r\n\r\n        function parsePolygonNode(node, style) {\r\n            function iterator(match, a, b) {\r\n                var x = parseFloat(a)\r\n                var y = parseFloat(b)\r\n\r\n                if (index === 0) {\r\n                    path.moveTo(x, y)\r\n                } else {\r\n                    path.lineTo(x, y)\r\n                }\r\n\r\n                index++\r\n            }\r\n\r\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var index = 0\r\n\r\n            node.getAttribute('points').replace(regex, iterator)\r\n\r\n            path.currentPath.autoClose = true\r\n\r\n            return path\r\n        }\r\n\r\n        function parsePolylineNode(node, style) {\r\n            function iterator(match, a, b) {\r\n                var x = parseFloat(a)\r\n                var y = parseFloat(b)\r\n\r\n                if (index === 0) {\r\n                    path.moveTo(x, y)\r\n                } else {\r\n                    path.lineTo(x, y)\r\n                }\r\n\r\n                index++\r\n            }\r\n\r\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var index = 0\r\n\r\n            node.getAttribute('points').replace(regex, iterator)\r\n\r\n            path.currentPath.autoClose = false\r\n\r\n            return path\r\n        }\r\n\r\n        function parseCircleNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('cx'))\r\n            var y = parseFloat(node.getAttribute('cy'))\r\n            var r = parseFloat(node.getAttribute('r'))\r\n\r\n            var subpath = new Path()\r\n            subpath.absarc(x, y, r, 0, Math.PI * 2)\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.subPaths.push(subpath)\r\n\r\n            return path\r\n        }\r\n\r\n        function parseEllipseNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('cx'))\r\n            var y = parseFloat(node.getAttribute('cy'))\r\n            var rx = parseFloat(node.getAttribute('rx'))\r\n            var ry = parseFloat(node.getAttribute('ry'))\r\n\r\n            var subpath = new Path()\r\n            subpath.absellipse(x, y, rx, ry, 0, Math.PI * 2)\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.subPaths.push(subpath)\r\n\r\n            return path\r\n        }\r\n\r\n        function parseLineNode(node, style) {\r\n            var x1 = parseFloat(node.getAttribute('x1'))\r\n            var y1 = parseFloat(node.getAttribute('y1'))\r\n            var x2 = parseFloat(node.getAttribute('x2'))\r\n            var y2 = parseFloat(node.getAttribute('y2'))\r\n\r\n            var path = new ShapePath()\r\n            path.moveTo(x1, y1)\r\n            path.lineTo(x2, y2)\r\n            path.currentPath.autoClose = false\r\n\r\n            return path\r\n        }\r\n\r\n        //\r\n\r\n        function parseStyle(node, style) {\r\n            style = Object.assign({}, style) // clone style\r\n\r\n            if (node.hasAttribute('fill')) style.fill = node.getAttribute('fill')\r\n            if (node.style.fill !== '') style.fill = node.style.fill\r\n\r\n            return style\r\n        }\r\n\r\n        function isVisible(style) {\r\n            return style.fill !== 'none' && style.fill !== 'transparent'\r\n        }\r\n\r\n        // http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\r\n\r\n        function getReflection(a, b) {\r\n            return a - (b - a)\r\n        }\r\n\r\n        function parseFloats(string) {\r\n            var array = string.split(/[\\s,]+|(?=\\s?[+\\-])/)\r\n\r\n            for (var i = 0; i < array.length; i++) {\r\n                var number = array[i]\r\n\r\n                // Handle values like 48.6037.7.8\r\n                // TODO Find a regex for this\r\n\r\n                if (number.indexOf('.') !== number.lastIndexOf('.')) {\r\n                    var split = number.split('.')\r\n\r\n                    for (var s = 2; s < split.length; s++) {\r\n                        array.splice(i + s - 1, 0, '0.' + split[s])\r\n                    }\r\n                }\r\n\r\n                array[i] = parseFloat(number)\r\n            }\r\n\r\n            return array\r\n        }\r\n\r\n        function getNodeTransform(node) {\r\n            if (!node.hasAttribute('transform')) {\r\n                return null\r\n            }\r\n\r\n            var transform = parseTransformNode(node)\r\n\r\n            if (transform) {\r\n                if (transformStack.length > 0) {\r\n                    transform.premultiply(transformStack[transformStack.length - 1])\r\n                }\r\n\r\n                currentTransform.copy(transform)\r\n                transformStack.push(transform)\r\n            }\r\n\r\n            return transform\r\n        }\r\n\r\n        function parseTransformNode(node) {\r\n            var transform = new Matrix3()\r\n            var currentTransform = tempTransform0\r\n            var transformsTexts = node.getAttribute('transform').split(' ')\r\n\r\n            for (var tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex--) {\r\n                var transformText = transformsTexts[tIndex]\r\n                var openParPos = transformText.indexOf('(')\r\n                var closeParPos = transformText.indexOf(')')\r\n\r\n                if (openParPos > 0 && openParPos < closeParPos) {\r\n                    var transformType = transformText.substr(0, openParPos)\r\n\r\n                    var array = parseFloats(transformText.substr(openParPos + 1, closeParPos - openParPos - 1))\r\n\r\n                    currentTransform.identity()\r\n\r\n                    switch (transformType) {\r\n                        case 'translate':\r\n                            if (array.length >= 1) {\r\n                                var tx = array[0]\r\n                                var ty = tx\r\n\r\n                                if (array.length >= 2) {\r\n                                    ty = array[1]\r\n                                }\r\n\r\n                                currentTransform.translate(tx, ty)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'rotate':\r\n                            if (array.length >= 1) {\r\n                                var angle = 0\r\n                                var cx = 0\r\n                                var cy = 0\r\n\r\n                                // Angle\r\n                                angle = (-array[0] * Math.PI) / 180\r\n\r\n                                if (array.length >= 3) {\r\n                                    // Center x, y\r\n                                    cx = array[1]\r\n                                    cy = array[2]\r\n                                }\r\n\r\n                                // Rotate around center (cx, cy)\r\n                                tempTransform1.identity().translate(-cx, -cy)\r\n                                tempTransform2.identity().rotate(angle)\r\n                                tempTransform3.multiplyMatrices(tempTransform2, tempTransform1)\r\n                                tempTransform1.identity().translate(cx, cy)\r\n                                currentTransform.multiplyMatrices(tempTransform1, tempTransform3)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'scale':\r\n                            if (array.length >= 1) {\r\n                                var scaleX = array[0]\r\n                                var scaleY = scaleX\r\n\r\n                                if (array.length >= 2) {\r\n                                    scaleY = array[1]\r\n                                }\r\n\r\n                                currentTransform.scale(scaleX, scaleY)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'skewX':\r\n                            if (array.length === 1) {\r\n                                currentTransform.set(1, Math.tan((array[0] * Math.PI) / 180), 0, 0, 1, 0, 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'skewY':\r\n                            if (array.length === 1) {\r\n                                currentTransform.set(1, 0, 0, Math.tan((array[0] * Math.PI) / 180), 1, 0, 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'matrix':\r\n                            if (array.length === 6) {\r\n                                currentTransform.set(array[0], array[2], array[4], array[1], array[3], array[5], 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n                    }\r\n                }\r\n\r\n                transform.premultiply(currentTransform)\r\n            }\r\n\r\n            return transform\r\n        }\r\n\r\n        function transformPath(path, m) {\r\n            function transfVec2(v2) {\r\n                tempV3.set(v2.x, v2.y, 1).applyMatrix3(m)\r\n\r\n                v2.set(tempV3.x, tempV3.y)\r\n            }\r\n\r\n            var isRotated = isTransformRotated(m)\r\n\r\n            var tempV2 = new Vector2()\r\n            var tempV3 = new Vector3()\r\n\r\n            var subPaths = path.subPaths\r\n\r\n            for (var i = 0, n = subPaths.length; i < n; i++) {\r\n                var subPath = subPaths[i]\r\n                var curves = subPath.curves\r\n\r\n                for (var j = 0; j < curves.length; j++) {\r\n                    var curve = curves[j]\r\n\r\n                    if (curve.isLineCurve) {\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                    } else if (curve.isCubicBezierCurve) {\r\n                        transfVec2(curve.v0)\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                        transfVec2(curve.v3)\r\n                    } else if (curve.isQuadraticBezierCurve) {\r\n                        transfVec2(curve.v0)\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                    } else if (curve.isEllipseCurve) {\r\n                        tempV2.set(curve.aX, curve.aY)\r\n                        transfVec2(tempV2)\r\n                        curve.aX = tempV2.x\r\n                        curve.aY = tempV2.y\r\n\r\n                        curve.xRadius *= getTransformScaleX(m)\r\n                        curve.yRadius *= getTransformScaleY(m)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function isTransformRotated(m) {\r\n            return m.elements[1] !== 0 || m.elements[3] !== 0\r\n        }\r\n\r\n        function getTransformScaleX(m) {\r\n            var te = m.elements\r\n            return Math.sqrt(te[0] * te[0] + te[1] * te[1])\r\n        }\r\n\r\n        function getTransformScaleY(m) {\r\n            var te = m.elements\r\n            return Math.sqrt(te[3] * te[3] + te[4] * te[4])\r\n        }\r\n\r\n        //\r\n\r\n        var paths = []\r\n\r\n        var transformStack = []\r\n\r\n        var tempTransform0 = new Matrix3()\r\n        var tempTransform1 = new Matrix3()\r\n        var tempTransform2 = new Matrix3()\r\n        var tempTransform3 = new Matrix3()\r\n\r\n        var currentTransform = new Matrix3()\r\n\r\n        var xml = new DOMParser().parseFromString(text, 'image/svg+xml') // application/xml\r\n\r\n        parseNode(xml.documentElement, { fill: '#000' })\r\n\r\n        // console.log( paths );\r\n\r\n        return paths\r\n    },\r\n}\r\n\r\nexport { SVGLoader }\r\n","import * as THREE from 'three'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { Canvas } from 'react-three-fiber'\r\nimport flatten from 'lodash-es/flatten'\r\nimport { SVGLoader as loader } from './SVGLoader'\r\nimport { useTransition, a } from 'react-spring/three'\r\n\r\n\r\nfunction svgLoader(id) {\r\n    const svgResource = new Promise(resolve =>\r\n        new loader().load(window.webBase+\"api/svg/\"+id, shapes =>\r\n            resolve(flatten(shapes.map((group, index) => group.toShapes(true).map(shape => ({ shape, color: group.color, index })))))\r\n        )\r\n    );\r\n    return svgResource;\r\n}\r\n\r\n\r\nfunction Scene(props) {\r\n    console.log(props.book.id);\r\n    const [shapes, set] = useState([]);\r\n    //useEffect(() => void svgLoader(1).then(set), []);\r\n    const [show, toggle] = useState(true);\r\n    useEffect(() => void setInterval(() => toggle(show => !show), 3000), []);\r\n    useEffect(() => void (!show ? set([]) : svgLoader(props.book.title).then(set)), [show]);\r\n\r\n    const transitions = useTransition(shapes, item => item.shape.uuid, {\r\n        from: { position: [-50, 0, 0], rotation: [0, -0.6, 0], opacity: 0 },\r\n        enter: { position: [0, 0, 0], rotation: [0, 0.3, 0], opacity: 1 },\r\n        leave: { position: [50, 0, 0], rotation: [0, 0.6, 0], opacity: 0 },\r\n        order: ['leave', 'enter', 'update'],\r\n        lazy: true,\r\n        trail: 5,\r\n        unique: true,\r\n        reset: true,\r\n    })\r\n    const deg = THREE.Math.degToRad;\r\n    return (\r\n        <a.group position={[500, -400, 0]} rotation={[0, deg(180), 0]}>\r\n            {transitions.map(({ item: { shape, color, index }, key, props: { opacity, position, rotation } }) => (\r\n                <a.mesh key={key} rotation={rotation} position={position.interpolate((x, y, z) => [x, y, 0])}>\r\n                    <a.meshPhongMaterial\r\n                        attach=\"material\"\r\n                        color={color}\r\n                        opacity={opacity}\r\n                        side={THREE.DoubleSide}\r\n                        depthWrite={false}\r\n                        transparent\r\n                    />\r\n                    <shapeBufferGeometry attach=\"geometry\" args={[shape]} />\r\n                </a.mesh>\r\n            ))}\r\n        </a.group>\r\n    )\r\n}\r\nexport  default  class Animation extends  React.Component  {\r\n\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"main\">\r\n\r\n                <Canvas\r\n                    camera={{\r\n                        fov: 90,\r\n                        position: [0, 0, 500],\r\n                        rotation: [0, 0, THREE.Math.degToRad(180)],\r\n                        near: 0.1,\r\n                        far: 20000,\r\n                    }}>\r\n                    <ambientLight intensity={0.5}/>\r\n                    <spotLight intensity={0.5} position={[300, 300, 4000]}/>\r\n                    <Scene book = {this.props.book}/>\r\n                </Canvas>\r\n                <span className=\"middle\">\r\n                    <div>\r\n                        {this.props.book.title}\r\n                    </div>\r\n                </span>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport {withRouter} from \"react-router\";\r\nimport Animation from \"./animation\"\r\nimport { Descriptions, Badge,Tooltip,List,Comment,Form,Input} from 'antd';\r\n//import 'antd/dist/antd.css';\r\nimport { Button} from 'antd';\r\nimport './book_show.css'\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\nimport {Link} from \"react-router-dom\";\r\nconst { TextArea } = Input;\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n    <div>\r\n        <Form.Item>\r\n            <TextArea rows={4} onChange={onChange} value={value} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\r\n                Add Comment\r\n            </Button>\r\n        </Form.Item>\r\n    </div>\r\n);\r\nclass BookShow extends  React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            bookID: this.props.match.params.id,\r\n            submitting: false,\r\n            value: '',\r\n        };\r\n    }\r\n    addToShelf() {\r\n        if(this.props.currentUser === null) {\r\n            console.log(\"无用户\")\r\n        } else {\r\n            let bookshelf_item = {\r\n                user_id:this.props.currentUser.id,\r\n                book_id:this.props.book.id,\r\n            }\r\n            fetch( window.webBase+\"api/bookshelf\", {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                method: 'POST',\r\n                body: JSON.stringify(bookshelf_item)\r\n            }).then(res=>res.text()).then(text=>console.log(text));\r\n        }\r\n\r\n    }\r\n    //Animation/\r\n    handleChange = e => {\r\n        this.setState({\r\n            value: e.target.value,\r\n        });\r\n    };\r\n    handleSubmit = () => {\r\n        if (!this.state.value) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            submitting: true,\r\n        });\r\n\r\n        setTimeout(() => {\r\n            this.setState({\r\n                submitting: false,\r\n                value: '',\r\n            });\r\n        }, 1000);\r\n    };\r\n    render() {\r\n        const bookId = this.props.match.params.id;\r\n        const { submitting, value } = this.state;\r\n        if (this.props.book) {\r\n            let book = this.props.book;\r\n            return (\r\n                <div>\r\n                    <Animation book ={this.props.book}/>\r\n\r\n                    <div className=\"book-show\">\r\n                        <Button  type=\"primary\"  size=\"large\" onClick={e=>this.addToShelf()}>\r\n                            加入书架\r\n                        </Button>\r\n\r\n                    <Descriptions title=\"书籍信息\" bordered  >\r\n                        <Descriptions.Item label=\"标题\">{book.title}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"作者\">{book.author}</Descriptions.Item>\r\n\r\n                        <Descriptions.Item label=\"简介\">\r\n                            {book.description}\r\n                            <br />\r\n\r\n                        </Descriptions.Item>\r\n                    </Descriptions>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\nexport default withRouter(BookShow);","import { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport BookShow from './book_show';\r\nimport { requestComment } from '../../actions/book_actions';\r\n\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        book: state.books[ownProps.match.params.id],\r\n        currentUser: state.session.currentUser,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(BookShow));\r\n","import React, {createRef} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from 'material-ui/styles';\r\nimport Drawer from 'material-ui/Drawer';\r\nimport IconButton from 'material-ui/IconButton';\r\nimport MenuIcon from 'material-ui-icons/Menu';\r\nimport Typography from 'material-ui/Typography';\r\nimport './Navigation.css';\r\n\r\nconst styles = {\r\n    button: {\r\n        position: 'relative',\r\n        left: 0,\r\n        top: 0,\r\n        zIndex: 10,\r\n    },\r\n    list: {\r\n        width: 280,\r\n        flex: 'initial',\r\n    },\r\n    title: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    }\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {open: true,help:false};\r\n\r\n        this.chapterList = null; // 章节列表 DOM 元素\r\n\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleOpen = this.handleOpen.bind(this);\r\n        this.handleHelp = this.handleHelp.bind(this);\r\n        // this.toc= null;\r\n        // this.setTocRef = element => {\r\n        //   this.toc = element;\r\n        // };\r\n        this.myRef = createRef();\r\n        this.toc = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let epub = this.props.epub;\r\n        epub.getToc().then((chapters) => {\r\n            this.chapterList = this.getChapters(chapters, false);\r\n            this.bindEventForChapters();\r\n        });\r\n\r\n    }\r\n\r\n    componentWillUpdate() {\r\n\r\n        let toc = this.myRef.current;\r\n        if(toc!=null) {\r\n            this.toc = toc;\r\n            // if (toc.firstElementChild !== this.chapterList) {\r\n            //   toc.appendChild(this.chapterList);\r\n            // }\r\n        }\r\n        if(this.toc != null && this.chapterList != null) {\r\n            // console.log(\"插入前\");\r\n            // console.log(this.toc);\r\n            this.toc.appendChild(this.chapterList);\r\n            // console.log(\"插入后\");\r\n            // console.log(this.toc);\r\n        }\r\n        // console.log(this.toc === this.myRef.current);\r\n        // console.log(this.chapterList);\r\n        // console.log(\"update执行\");\r\n        if(this.state.help === false) {\r\n            this.setState({help:true});\r\n            // console.log(\"update执行，help值:\"+this.state.help);\r\n        }\r\n    }\r\n\r\n\r\n    // 生成章节列表 DOM 元素\r\n    getChapters(chapters, collapse) {\r\n        let ul = document.createElement('ul');\r\n        ul.className = collapse ? 'chapter-list collapse' : 'chapter-list expand';\r\n\r\n        chapters.forEach((item) => {\r\n            let li = document.createElement('li');\r\n            li.className = 'chapter-list-item';\r\n            let str;\r\n            str = `<div class=\"item-content\">\r\n                <i class=\"item-mark\"></i>\r\n                <a class=\"chapter-url\" href=\"${item.href}\">${item.label}</a>\r\n             </div>`;\r\n            li.innerHTML = str;\r\n            ul.appendChild(li);\r\n\r\n            // 若章节还有子章节，递归生成目录（默认目录折叠）\r\n            if (item.subitems && item.subitems.length) {\r\n                li.appendChild(this.getChapters(item.subitems, true));\r\n            }\r\n        });\r\n\r\n        return ul;\r\n    }\r\n\r\n    // 为章节列表 DOM 绑定事件处理程序\r\n    bindEventForChapters() {\r\n        this.chapterList.addEventListener('click', (event) => {\r\n            let target = event.target;\r\n            if (target.nodeName.toLowerCase() !== 'a') return;\r\n            let href = target.getAttribute('href');\r\n            this.props.epub.goto(href);\r\n            console.log('navigation render: ', this.props.epub.isRendered);\r\n            event.preventDefault();\r\n        });\r\n    }\r\n\r\n    // 打开章节列表\r\n    handleOpen() {\r\n        this.setState({open: true});\r\n\r\n    }\r\n\r\n    // 关闭章节列表\r\n    handleClose() {\r\n        this.setState({open: false});\r\n\r\n\r\n    }\r\n    handleHelp() {\r\n        this.setState({help: false});\r\n        console.log(\"执行，help值:\"+this.state.help);\r\n    }\r\n    render() {\r\n        const { theme, classes } = this.props;\r\n        let fontColor = {\r\n            color: theme ? '#000000de' : '#fff',\r\n        };\r\n\r\n        return (\r\n            <div id=\"navigation\">\r\n                <IconButton onClick={this.handleOpen} className={classes.button}>\r\n                    <MenuIcon/>\r\n                </IconButton>\r\n                <Drawer\r\n                    open={this.state.open}\r\n                    onClose={this.handleHelp}\r\n                    onClick={this.handleClose}\r\n                >\r\n\r\n                    <div className={classes.title}>\r\n                        <Typography type=\"title\" align=\"center\">\r\n                            Table Of Contents\r\n                        </Typography>\r\n                    </div>\r\n                    <div ref={this.myRef} className={classes.list} style={fontColor}>\r\n                    </div>\r\n\r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nNavigation.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Navigation);\r\n","class Note {\n  constructor(bookKey, chapter, text, cfi, range, color, note) {\n    this.key = new Date().getTime() + '';\n    this.bookKey = bookKey;\n    this.chapter = chapter;\n    this.text = text;\n    this.cfi = cfi;\n    this.range = range; // Rangy.js产生的将Range对象序列化后的字符串\n    this.color = color; // 高亮的颜色类型：0, 1, 2, 3\n    this.note = note || '';\n  }\n}\n\nexport default Note;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport { orange } from 'material-ui/colors';\nimport CopyIcon from 'material-ui-icons/ContentCut';\nimport Note from '../model/Note';\n\nconst styles = theme => ({\n  root: {\n    position: 'absolute',\n    display: 'flex',\n    alignItems: 'center',\n    height: 40,\n    padding: '0 10px',\n    borderRadius: 20,\n  },\n  button: {\n    cursor: 'pointer',\n    padding: '0 8px',\n  },\n  dot: {\n    display: 'inline-block',\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    transition: 'transform .3s',\n    '&:hover': {\n      transform: 'scale(1.2)',\n    },\n  },\n  icon: {\n    '&:active': {\n      color: orange[400],\n    },\n  },\n  bottom: {\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    borderWidth: 10,\n    borderStyle: 'solid',\n    borderColor: 'transparent',\n    left: '50%',\n    marginLeft: '-10px',\n    bottom: '-20px',\n  },\n});\n\nclass EditorToolbar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createNote = this.createNote.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.handleHighlight = this.handleHighlight.bind(this);\n    this.handleCopyPlainText = this.handleCopyPlainText.bind(this);\n  }\n\n  // 根据选取的文本创建Note对象\n  createNote(color) {\n    let {book, epub} = this.props;\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iDoc = iframe.contentDocument;\n    let sel = iDoc.getSelection();\n    let range = sel.getRangeAt(0);\n    let text = sel.toString();\n    text = text && text.trim();\n    let cfiBase = epub.renderer.currentChapter.cfiBase;\n    const EPUBJS = window.EPUBJS;\n    let cfi = new EPUBJS.EpubCFI().generateCfiFromRange(range, cfiBase);\n    let chapter = epub.renderer.currentChapter.spinePos;\n    let bookKey = this.props.epubTitle.id;\n    const rangy = window.rangy;\n    let charRange = rangy.getSelection(iframe).saveCharacterRanges(iDoc.body)[0];\n    let serial = JSON.stringify(charRange);\n    let note = new Note(bookKey, chapter, text, cfi, serial, color, '');\n\n    return note;\n  }\n\n  // 关闭菜单\n  closeMenu() {\n    this.props.closeMenu();\n  }\n\n  // 点击添加高亮\n  handleHighlight(event) {\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let color = parseInt(event.target.dataset.color);\n    if (isNaN(color)) return;\n    let note = this.createNote(color);\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    this.props.setKey(note.key); // 修复新添加的高亮没有正确的key的问题\n    this.props.pen.highlightSelection(classes[color]);\n    iDoc.getSelection().empty(); // 清空文本选取\n\n    this.props.addNote(note);\n    this.closeMenu();\n    event.stopPropagation();\n\n    console.log('%c Add note here. ', 'background-color: green');\n  }\n\n  // 点击复制为纯文本选项触发\n  handleCopyPlainText() {\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let text = iDoc.execCommand('copy', false, null);\n    !text ? console.log('failed to copy text to clipboard') : console.log('copied!');\n    this.closeMenu();\n  }\n\n  render() {\n    const {open, theme, posX, posY, colors, classes} = this.props;\n    const root = {\n      left: posX,\n      top: posY,\n      visibility: open ? 'visible' : 'hidden',\n      backgroundColor: theme ? '#424242' : 'f5f5f5',\n    };\n    const bottom = {\n      borderTopColor: theme ? '#424242' : '#f5f5f5',\n    };\n    const icon = {\n      width: 20,\n      height: 20,\n      color: theme ? '#fff' : '#000',\n    };\n\n    return (\n      <div id=\"editor-toolbar\" className={classes.root} style={root}>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"0\" style={{backgroundColor: colors[0]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"1\" style={{backgroundColor: colors[1]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"2\" style={{backgroundColor: colors[2]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"3\" style={{backgroundColor: colors[3]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleCopyPlainText}>\n          <CopyIcon className={classes.icon} style={icon}/>\n        </div>\n        <div className={classes.bottom} style={bottom}/>\n      </div>\n    );\n  }\n}\n\nEditorToolbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(EditorToolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\n\nconst styles = theme => ({\n  root: {\n    position: 'absolute',\n    visibility: 'hidden',\n    zIndex: 100,\n  },\n  card: {\n    width: 200,\n    boxShadow: '0 2px 15px rgba(0, 0, 0, .1)',\n    padding: '10px 0',\n  },\n  bottom: {\n    width: 14,\n    height: 14,\n    transform: 'rotate(45deg)',\n    position: 'absolute',\n    bottom: -7,\n    left: 0,\n    right: 0,\n    margin: 'auto',\n    zIndex: 99,\n  },\n  textarea: {\n    fontFamily: 'sans-serif',\n    fontSize: 12,\n    border: 'none',\n    outline: 'none',\n    width: '100%',\n    padding: '0 10px',\n    minHeight: 60,\n    backgroundColor: 'transparent',\n    resize: 'none',\n    '&::-webkit-input-placeholder': {\n      fontStyle: 'italic',\n    },\n    '&::-moz-placeholder': {\n      fontStyle: 'italic',\n    },\n  },\n});\n\nclass NoteCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      note: this.props.note.note,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({note: nextProps.note.note});\n  }\n\n  handleChange(event) {\n    this.setState({note: event.target.value});\n  }\n\n  handleBlur(event) {\n    let note = this.props.note;\n    note.note = event.target.value;\n    this.props.updateNote(note);\n    console.log('note has been updated.', note);\n  }\n\n  render() {\n    const {posX, posY, open, theme, classes} = this.props;\n\n    let root = {\n      left: posX,\n      top: posY,\n      visibility: open ? 'visible' : 'hidden',\n      background: theme ? '#424242' : '#f5f5f5',\n    };\n    let textArea = {\n      color: theme ? '#f5f5f5' : '#424242',\n    };\n    let bottom = {\n      background: theme ? '#424242' : '#f5f5f5',\n    };\n\n    return (\n      <div id=\"note-card\" className={classes.root} style={root}>\n        <div className={classes.card}>\n          <textarea type=\"text\"\n                    value={this.state.note}\n                    className={classes.textarea}\n                    onChange={this.handleChange}\n                    onBlur={this.handleBlur}\n                    style={textArea}\n                    placeholder=\"There is no note here.\"\n          />\n        </div>\n        <div className={classes.bottom} style={bottom}/>\n      </div>\n    );\n  }\n}\n\nNoteCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(NoteCard);\n","class Config {\n\n  // 获取默认的配置\n  static getDefaultConfigObj() {\n    return {\n      theme: true,\n      colors: ['#FBF1D1', '#EFEEB0', '#CAEFC9', '#76BEE9'],\n      background: '#FFF',\n      fontSize: 0, // 0 代表使用默认值\n      lineHeight: 0, // 0 代表使用默认值\n      letterSpacing: 0, // 0 代表使用默认值\n      wordSpacing: 0, // 0 代表使用默认值\n      column: 2, // 可取值为1, 2\n      padding: 10, // 阅读区域与浏览器可视区域上下的间距\n      gutter: 80, // 阅读区域与浏览器可视区域两侧的间距\n      disablePopup: false,\n    };\n  }\n\n  // 获取config对象\n  static get() {\n    let json = localStorage.getItem('config');\n\n    return JSON.parse(json) || Config.getDefaultConfigObj();\n  }\n\n  // 更新config\n  static set(key, value) {\n    let json = localStorage.getItem('config');\n    let config = JSON.parse(json) || Config.getDefaultConfigObj();\n    config[key] = value;\n    localStorage.setItem('config', JSON.stringify(config));\n  }\n\n  // 重置Config\n  static resetConfig() {\n    let json = JSON.stringify(Config.getDefaultConfigObj());\n    localStorage.setItem('config', json);\n  }\n\n  // 获取为文档默认应用的css样式\n  static getDefaultCss() {\n    let config = Config.get();\n    let colors = config.colors;\n\n    let css1 = `::selection{background:#f3a6a68c}::-moz-selection{background:#f3a6a68c}[class*=color-]:hover{cursor:pointer;background-image:linear-gradient(0,rgba(0,0,0,.075),rgba(0,0,0,.075))}.color-0{background-color:${colors[0]}}.color-1{background-color:${colors[1]}}.color-2{background-color:${colors[2]}}.color-3{background-color:${colors[3]}}`;\n\n    let css2 = [\n      'a, article, cite, code, div, li, p, pre, span, table {',\n      `    font-size: ${config.fontSize+'px'} !important;`,\n      `    line-height: ${config.lineHeight+'px'} !important;`,\n      `    letter-spacing: ${config.letterSpacing+'px'} !important;`,\n      `    word-spacing: ${config.wordSpacing+'px'} !important;`,\n      '}',\n      'img {',\n      '    max-width: 100% !important;',\n      '}',\n      'body {',\n      '    background-color: transparent !important;',\n      `    color: ${config.theme ? '#000000de' : '#f5f5f5'} !important;`,\n      '}',\n    ];\n\n    css2[1] = config.fontSize ? css2[1] : '';\n    css2[2] = config.lineHeight ? css2[2] : '';\n    css2[3] = config.letterSpacing ? css2[3] : '';\n    css2[4] = config.wordSpacing ? css2[4] : '';\n\n    return (css1 + css2.join('\\n'));\n  }\n}\n\nexport default Config;\n","// 工具类\nimport Config from \"./Config\";\n\nclass Util {\n\n  // 获取元素的样式\n  static getStyle(element, attr) {\n    if (element.currentStyle) {\n      return element.currentStyle[attr];\n    } else {\n      return getComputedStyle(element)[attr];\n    }\n  }\n\n  // 为指定文档添加(user)脚本\n  static addScript(script, doc=document) {\n    let scriptEl = doc.getElementById('qiu-user-script');\n\n    if (!scriptEl) {\n      scriptEl = doc.createElement('script');\n      scriptEl.id = 'qiu-user-script';\n      scriptEl.type = 'text/javascript';\n      scriptEl.defer = true;\n      scriptEl.text = script;\n      doc.body.appendChild(scriptEl);\n      return;\n    }\n\n    scriptEl.text = script;\n  }\n\n  // 为指定文档添加(user)样式\n  static addCss(css, doc=document) {\n    let style = doc.getElementById('qiu-user-style');\n\n    if (!style) {\n      style = doc.createElement('style');\n      style.id = 'qiu-user-style';\n      style.textContent = css;\n      doc.head.appendChild(style);\n      return;\n    }\n\n    style.textContent = css;\n  }\n\n  // 为 iframe 添加默认的样式\n  static addDefaultCss() {\n    let css = Config.getDefaultCss();\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let style = iDoc.getElementById('qiu-default-style');\n\n    if (!style) {\n      style = iDoc.createElement('style');\n      style.id = 'qiu-default-style';\n      style.textContent = css;\n      iDoc.head.appendChild(style);\n      return;\n    }\n\n    style.textContent = css;\n  }\n\n  // 获取用户自定义的样式\n  // 返回一个对象 {outer: outerStyle, inner: innerStyle}\n  static getUserStyle() {\n    let json = localStorage.getItem('style')  || '{}';\n\n    return JSON.parse(json);\n  }\n\n  // 解析用户传入的样式表\n  static parseStyle(style) {\n    const separator = '/* Qiu Plus Separator */';\n    let arr = style.split(separator);\n    let out = {\n      inner: arr[0] || '',\n      outer: arr[1] || '',\n    };\n\n    return out;\n  }\n\n  // 获取用户自定义的脚本\n  // 返回一个对象 {outer: outerScript, inner: innerScript}\n  static getUserScript() {\n    let json = localStorage.getItem('script')  || '{}';\n\n    return JSON.parse(json);\n  }\n\n  // 解析用户传入的脚本\n  static parseScript(script) {\n    const separator = '/* Qiu Plus Separator */';\n    let arr = script.split(separator);\n    let out = {\n      inner: arr[0] || '',\n      outer: arr[1] || '',\n    };\n\n    return out;\n  }\n\n  // 应用外部的样式\n  static applyCss() {\n    let outerDoc = document;\n    let innerDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let style = Util.getUserStyle();\n    style.inner && Util.addCss(style.inner, innerDoc);\n    style.outer && Util.addCss(style.outer, outerDoc);\n  }\n\n  // 应用外部的样式\n  static applyScript() {\n    let outerDoc = document;\n    let innerDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let script = Util.getUserScript();\n    script.inner && Util.addCss(script.inner, innerDoc);\n    script.outer && Util.addCss(script.outer, outerDoc);\n  }\n\n  // 取消自定义的样式\n  static resetStyle() {\n    let style = {\n      inner: ' ',\n      outer: ' ',\n    };\n    localStorage.setItem('style', JSON.stringify(style));\n    Config.resetConfig();\n\n    Util.applyCss();\n    Util.addDefaultCss();\n  }\n\n  // 取消用户自定义脚本\n  static resetScript() {\n    let script = {\n      inner: ' ',\n      outer: ' ',\n    };\n    localStorage.setItem('script', JSON.stringify(script));\n    Util.applyScript();\n  }\n}\n\nexport default Util;\n","// 阅读期间自动记录当前阅读位置\nclass AutoBookmark {\n\n  static recordCfi(bookKey, cfi) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n    obj[bookKey] = cfi;\n\n    localStorage.setItem('autoBookmark', JSON.stringify(obj));\n  }\n\n  static getCfi(bookKey) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n\n    return obj[bookKey] || null;\n  }\n\n  static clear(bookKey) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n    delete obj[bookKey];\n\n    localStorage.setItem('autoBookmark', JSON.stringify(obj));\n  }\n}\n\nexport default AutoBookmark;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport IconButton from 'material-ui/IconButton';\nimport LeftArrow from 'material-ui-icons/NavigateBefore';\nimport RightArrow from 'material-ui-icons/NavigateNext';\nimport EditorToolbar from './EditorToolbar';\nimport NoteCard from './NoteCard';\nimport Util from '../service/Util';\nimport AutoBookmark from \"../service/AutoBookmark\";\nconst rangy = window.rangy;\nlet styles = {\n  pageArea: {\n    position: 'absolute',\n    height:600,\n    //maxWidth:600,\n    left: 80,\n    right: 80,\n    top: 0,\n    bottom: 0,\n  },\n  button: {\n    width: 70,\n    height: 70,\n    padding: 0,\n  },\n  arrow: {\n    width: 50,\n    height: 50,\n  },\n  prev: {\n    position: 'fixed',\n    left:0,\n    bottom:0,\n    height: '100%',\n    opacity: 0,\n    cursor: 'pointer',\n    transition: '.3s',\n    '&:hover': {\n      opacity: 1,\n    },\n\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  next: {\n    position: 'fixed',\n    right:0,\n    bottom:0,\n    height: '100%',\n    opacity: 0,\n    cursor: 'pointer',\n    transition: '.3s',\n    '&:hover': {\n      opacity: 1,\n    },\n\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n};\n\nclass ViewArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openMenu: false, // 是否打开菜单\n      openNoteCard: false, // 是否打开附注编辑框\n      mPosX: 0, // 菜单的X轴坐标\n      mPosY: 0, // 菜单的Y轴坐标\n      nPosX: 0, // 附注输入框的X轴坐标\n      nPosY: 0, // 附注输入框的Y轴坐标\n      note: {}, // 当前正在被编辑的note\n    };\n\n    this.x = 0; // 计算菜单坐标时的中间结果\n    this.y = 0; // 计算菜单坐标时的中间结果\n    this.pen = null;\n    this.notes = []; // 当前章节的note\n    this.key = ''; // 当前正在渲染的note的key\n\n    this.prev = this.prev.bind(this);\n    this.next = this.next.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.openMenu = this.openMenu.bind(this);\n    this.closeNoteCard = this.closeNoteCard.bind(this);\n    this.openNoteCard = this.openNoteCard.bind(this);\n    this.renderNotes = this.renderNotes.bind(this);\n    this.getPen = this.getPen.bind(this);\n    this.setNote = this.setNote.bind(this);\n    this.setKey = this.setKey.bind(this);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('copy', this.copyTextHack);\n\n  }\n\n  componentDidMount() {\n    let page = document.getElementById('page-area');\n    let {book, epub} = this.props;\n\n    epub.renderTo(page); // 渲染\n    this.bindEvent(); // 绑定事件\n    epub.gotoCfi(AutoBookmark.getCfi(book.key)); // 跳转到上一次阅读位置\n\n    // 解决火狐下不能正常复制\n    this.copyTextHack = (event) => {\n      let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n      let copyText = iDoc.getSelection().toString() || document.getSelection().toString();\n      event.clipboardData.setData('text/plain', copyText);\n      event.preventDefault();\n    };\n    document.addEventListener('copy', this.copyTextHack);\n  }\n\n  // 为阅读界面绑定事件\n  bindEvent() {\n    let epub = this.props.epub;\n    let isFirefox = navigator.userAgent.indexOf('Firefox') !== -1;\n    let lock = false; // 暂时锁住翻页快捷键，避免快速点击产生的Bug\n\n    let arrowKeys = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.keyCode === 37 || event.keyCode === 38) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.keyCode === 39 || event.keyCode === 40) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let mouseFirefox = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.detail < 0) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.detail > 0) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let mouseChrome = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.wheelDelta > 0) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.wheelDelta < 0) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let copyText = event => {\n      let key = event.keyCode || event.which;\n      if (key === 67 && event.ctrlKey) {\n        let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n        let text = iDoc.execCommand('copy', false, null);\n        !text ? console.log('failed to copy text to clipboard') : console.log(`copied!`);\n      }\n    };\n\n    epub.on('renderer:chapterDisplayed', () => {\n\n      this.getPen(); // 切换章节后获取 pen\n\n      console.log('%c renderer:chapterDisplayed has been triggered! ', 'color: cyan; background: #333333');\n\n      let doc = epub.renderer.doc;\n\n      doc.addEventListener('click', this.openMenu); // 为每一章节内容绑定弹出菜单触发程序\n      doc.addEventListener('keydown', arrowKeys, false); // 箭头按键翻页\n      doc.addEventListener('keydown', copyText); // 解决 Ctrl + C 复制的bug\n\n      // 鼠标滚轮翻页\n      if (isFirefox)\n        doc.addEventListener('DOMMouseScroll', mouseFirefox, false);\n      else\n        doc.addEventListener('mousewheel', mouseChrome, false);\n\n      Util.addDefaultCss(); // 切换章节后为当前文档设置默认的样式\n      Util.applyCss(); // 切换章节后应当为当前文档设置样式\n      this.renderNotes(); // 切换章节后需要重新渲染注释\n    });\n\n    epub.on('renderer:visibleRangeChanged', () => {\n      let {book, epub} = this.props;\n      let bookKey = book.key;\n      let cfi = epub.getCurrentLocationCfi();\n      AutoBookmark.recordCfi(bookKey, cfi);\n      console.log('auto bookmark: ', cfi);\n    });\n  }\n\n  // 关闭弹出菜单\n  closeMenu() {\n    this.setState({openMenu: false});\n  }\n\n  // 打开弹出菜单\n  openMenu(event) {\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iDoc = iframe.contentDocument;\n    let sel = iDoc.getSelection();\n\n    // 如果 note card 正在被展示，则隐藏\n    if (this.state.openNoteCard) {\n      this.setState({openNoteCard: false});\n    }\n    // 使弹出菜单更加灵活可控\n    if (sel.isCollapsed) {\n      this.state.openMenu && this.closeMenu();\n      return;\n    }\n\n    if (this.props.disablePopup) return;\n\n    let rect = this.props.epub.renderer.rangePosition(sel.getRangeAt(0));\n    console.log(rect);\n\n    let menu = document.getElementById('editor-toolbar');\n    let x = event.clientX;\n    let y = event.clientY;\n    let width = parseInt(Util.getStyle(menu, 'width'));\n    let height = parseInt(Util.getStyle(menu, 'height'));\n\n    // TODO: 坐标计算\n    let posX = rect.x + rect.width / 2 + width / 2;\n    let posY = rect.y - height;\n    posX = posX < 0 ? 0 : posX;\n    posY = posY < 0 ? 0 : posY;\n\n    [this.x, this.y] = [x, y];\n    this.setState({openMenu: true, mPosX: posX, mPosY: posY});\n  }\n\n  // 关闭附注编辑框\n  closeNoteCard() {\n    this.setState({openNoteCard: false});\n  }\n\n  // 打开附注编辑框\n  openNoteCard(x, y) {\n    let noteCard = document.getElementById('note-card');\n    let width = parseInt(Util.getStyle(noteCard, 'width'));\n    let height = parseInt(Util.getStyle(noteCard, 'height'));\n\n    console.log(width, height);\n\n    let posX = x - (width / 2);\n    let posY = y - height - 20;\n\n    posX = posX < 0 ? 0 : posX;\n    posY = posY < 0 ? 0 : posY;\n\n    this.setState({openNoteCard: true, nPosX: posX, nPosY: posY});\n  }\n\n  // 设置当前正在被编辑的note\n  setNote(note) {\n    this.setState({note});\n  }\n\n  // 设置当前正在被渲染的note的key\n  setKey(key) {\n    this.key = key;\n  }\n\n  // 获取与本章节相关的 pen\n  getPen() {\n    // 注意点一\n    // 为了每次切换章节时都有与当前文档相关联的 pen\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n\n     this.pen = rangy.createHighlighter(iDoc);\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    classes.forEach((item) => {\n      let config = {\n        ignoreWhiteSpace: true,\n        elementTagName: 'span',\n        elementProperties: {\n          onclick: (event) => {\n            let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n            let sel = iDoc.getSelection();\n            if (!sel.isCollapsed) return;\n\n            let {gutter, padding} = this.props;\n            let key = event.currentTarget.dataset.key;\n            let note = this.props.getNote(key);\n            note || console.log('no note with key: ' + key);\n            this.setNote(note);\n            let [x, y] = [event.clientX + gutter, event.clientY + padding];\n            this.openNoteCard(x, y);\n            event.stopPropagation();\n\n            if (this.state.openMenu) this.setState({openMenu: false}); // 修复bug\n          },\n        },\n        onElementCreate: (element) => {\n          element.dataset.key = this.key;\n        },\n      };\n      let applier = rangy.createClassApplier(item, config);\n      this.pen.addClassApplier(applier);\n    });\n  }\n\n  // 渲染本章节的note\n  renderNotes() {\n\n    // TODO: 注意点二\n    console.log('%c renderNotes has been called! ', 'color: cyan; background: #333333');\n\n    let {epub, getNotesByChapter} = this.props;\n    let chapter = epub.renderer.currentChapter;\n\n    if (!chapter) return; // 初次打开书籍，页面尚未渲染\n\n    this.notes = getNotesByChapter(chapter.spinePos);\n    let notes = this.notes;\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iWin = iframe.contentWindow || iframe.contentDocument.defaultView;\n\n    let sel = rangy.getSelection(iframe);\n    let serial = rangy.serializeSelection(sel, true);\n\n    this.pen && this.pen.removeAllHighlights(); // 为了避免下次反序列化失败，必须先清除已有的高亮\n\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    notes.forEach((note) => {\n      this.key = note.key;\n      try {\n        let temp = JSON.parse(note.range);\n        temp = [temp];\n        rangy.getSelection(iframe).restoreCharacterRanges(iframe.contentDocument, temp);\n      } catch (e) {\n        console.warn('Exception has been caught when restore character ranges.');\n        return;\n      }\n\n      this.pen.highlightSelection(classes[note.color]);\n    });\n\n    iWin.getSelection().empty(); // 清除文本选取\n    this.state.openMenu && rangy.deserializeSelection(serial, null, iWin); // （为了选取文本后不被上一行代码清除掉）恢复原本的文本选取\n  }\n\n  // 翻页：上一页\n  prev() {\n    this.props.epub.prevPage();\n    this.closeMenu();\n    this.closeNoteCard();\n  }\n\n  // 翻页：下一页\n  next() {\n    this.props.epub.nextPage();\n    this.closeMenu();\n    this.closeNoteCard();\n  }\n\n  render() {\n    const {epub, book, theme, colors, column, gutter, padding, addNote, updateNote, deleteNote, classes} = this.props;\n    let style = {\n      left: gutter,\n      right: gutter,\n      top: padding,\n      bottom: padding,\n    };\n\n    epub.renderer.forceSingle(column === 1); // TODO: 在合适的地方触发重新渲染书籍\n    console.log('%c render view-area. ', 'color: orange; background: #333333');\n    this.renderNotes();\n\n    return (\n      <div id=\"view-area\">\n        <div id=\"page-area\" className={classes.pageArea} style={style}/>\n        <div id=\"prev\" onClick={this.prev} className={classes.prev}>\n          <IconButton className={classes.button}>\n            <LeftArrow className={classes.arrow}/>\n          </IconButton>\n        </div>\n        <div id=\"next\" onClick={this.next} className={classes.next}>\n          <IconButton className={classes.button}>\n            <RightArrow className={classes.arrow}/>\n          </IconButton>\n        </div>\n        <EditorToolbar open={this.state.openMenu}\n                       posX={this.state.mPosX}\n                       posY={this.state.mPosY}\n                       closeMenu={this.closeMenu}\n                       openNoteCard={this.openNoteCard}\n                       addNote={addNote}\n                       setKey={this.setKey}\n                       book={book}\n                       epub={epub}\n                       theme={theme}\n                       colors={colors}\n                       pen={this.pen}\n                       epubTitle={this.props.epubTitle}\n        />\n        <NoteCard open={this.state.openNoteCard}\n                  posX={this.state.nPosX}\n                  posY={this.state.nPosY}\n                  note={this.state.note}\n                  theme={theme}\n                  deleteNote={deleteNote}\n                  updateNote={updateNote}\n                  closeNoteCard={this.closeNoteCard}\n        />\n      </div>\n    );\n  }\n}\n\nViewArea.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ViewArea);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // TODO 修改为更为通用的形式\n      x: this.props.left ? this.props.left : 0, // 可拖动元素的 left 属性的值\n      y: this.props.top ? this.props.top : 0, // 可拖动元素的 top 属性的值\n    };\n\n    // 鼠标初始时的位置\n    this.startX = 0;\n    this.startY = 0;\n    // 可拖动元素的初始位置\n    this.sourceX = 0;\n    this.sourceY = 0;\n    this.element = null; // 可拖动的元素\n\n    this.start = this.start.bind(this);\n    this.move = this.move.bind(this);\n    this.end = this.end.bind(this);\n  }\n\n  start(event) {\n    [this.sourceX, this.sourceY] = [this.state.x, this.state.y];\n    [this.startX, this.startY] = [event.clientX, event.clientY];\n\n    document.addEventListener('mousemove', this.move, false);\n    document.addEventListener('mouseup', this.end, false);\n  }\n\n  move(event) {\n    let [currentX, currentY] = [event.clientX, event.clientY]; // 当前鼠标位置\n\n    // 鼠标移动距离\n    let distX = currentX - this.startX;\n    let distY = currentY - this.startY;\n\n    // 当前元素位置\n    let x = parseInt(this.sourceX + distX);\n    let y = parseInt(this.sourceY + distY);\n\n    // 元素可以设置的最大left和最大top（避免移出屏幕）\n    let maxEX = window.innerWidth - parseFloat(this.getStyle('width'));\n    let maxEY = window.innerHeight - parseFloat(this.getStyle('height'));\n\n    x = x > maxEX ? maxEX : x;\n    x = x < 0 ? 0 : x;\n    y = y > maxEY ? maxEY : y;\n    y = y < 0 ? 0 : y;\n\n    this.setState({x, y});\n  }\n\n  end() {\n    document.removeEventListener('mousemove', this.move);\n    document.removeEventListener('mouseup', this.end);\n  }\n\n  getStyle(attr) {\n    if (document.defaultView.getComputedStyle) {\n      return document.defaultView.getComputedStyle(this.element, null)[attr];\n    } else {\n      return this.element.currentStyle[attr];\n    }\n  }\n\n  render() {\n    let style = {\n      position: 'fixed',\n      left: this.state.x,\n      top: this.state.y,\n    };\n\n    return (\n      <div style={style} onMouseDown={this.start} ref={(element) => {\n        this.element = element\n      }}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nDraggable.propTypes = {\n  left: PropTypes.number,\n  top: PropTypes.number,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Draggable;\n","class Bookmark {\n  constructor(bookKey, cfi, label) {\n    this.key = new Date().getTime() + ''; // 唯一的键\n    this.bookKey = bookKey; // 所属的书籍的键\n    this.cfi = cfi; // 标记阅读位置的cfi\n    this.label = label; // 此项书签的别名\n  }\n}\n\nexport default Bookmark;\n","import React from 'react';\nimport DragHandleIcon from 'material-ui-icons/DragHandle';\nimport FullScreenIcon from 'material-ui-icons/Fullscreen';\nimport FullScreenExitIcon from 'material-ui-icons/FullscreenExit';\nimport SettingsIcon from 'material-ui-icons/Settings';\nimport FormatListBulletedIcon from 'material-ui-icons/FormatListBulleted';\nimport BookmarkIcon from 'material-ui-icons/Bookmark';\nimport ExitToAppIcon from 'material-ui-icons/ExitToApp';\nimport NotesIcon from 'material-ui-icons/Sort';\nimport Draggable from './Draggable';\nimport Bookmark from \"../model/Bookmark\";\nimport './Toolbar.css';\nimport { withRouter, Link } from 'react-router-dom';\n\nclass Toolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFullScreen: false, // 是否进入全屏模式\n      show: false, // 是否显示\n    };\n\n    this.handleFullScreen = this.handleFullScreen.bind(this);\n    this.handleExitFullScreen = this.handleExitFullScreen.bind(this);\n    this.handleScreen = this.handleScreen.bind(this);\n    this.handleSettings = this.handleSettings.bind(this);\n    this.handleNotes = this.handleNotes.bind(this);\n    this.handleBookmarks = this.handleBookmarks.bind(this);\n    this.handleAddBookmark = this.handleAddBookmark.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  // 进入全屏模式\n  handleFullScreen() {\n    let de = document.documentElement;\n\n    if (de.requestFullscreen) {\n      de.requestFullscreen();\n    } else if (de.mozRequestFullScreen) {\n      de.mozRequestFullScreen();\n    } else if (de.webkitRequestFullscreen) {\n      de.webkitRequestFullscreen();\n    } else if (de.msRequestFullscreen) {\n      de.msRequestFullscreen();\n    }\n\n    this.setState({isFullScreen: true});\n  }\n\n  // 退出全屏模式\n  handleExitFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n\n    this.setState({isFullScreen: false});\n  }\n\n  // 点击切换全屏按钮触发\n  handleScreen() {\n    !this.state.isFullScreen ? this.handleFullScreen() : this.handleExitFullScreen();\n  }\n\n  // 点击设置按钮的处理程序\n  handleSettings() {\n    this.props.toggleSettingsDialog(true);\n  }\n\n  // 点击notes按钮的事件处理程序\n  handleNotes() {\n    this.props.toggleNotes(true);\n  }\n\n  // 点击书签列表按钮的处理程序\n  handleBookmarks() {\n    this.props.toggleBookmarks(true);\n  }\n\n  // 点击添加书签按钮的处理程序\n  handleAddBookmark() {\n    //console.log(this.props.epubTitle);\n    let bookKey = this.props.epubTitle.id;\n    let epub = this.props.epub;\n    let cfi = epub.getCurrentLocationCfi();\n    let firstVisibleNode = epub.renderer.findFirstVisible();\n    let label = firstVisibleNode.textContent;\n    label = label && label.trim();\n    label = label || cfi;\n    let bookmark = new Bookmark(bookKey, cfi, label);\n    this.props.handleAddBookmark(bookmark);\n    this.props.toggleMessage(true);\n  }\n\n  // 点击退出按钮的处理程序\n  handleExit() {\n    this.props.history.push('/page3');\n  }\n\n  // 显示toolbar\n  show() {\n    // TODO: 添加自动滑出显示的效果\n    let show = true;\n    this.setState({show});\n  }\n\n  // 隐藏toolbar\n  hide() {\n    // TODO: 添加自动滑入隐藏的效果\n    let show = false;\n    this.setState({show});\n  }\n\n  render() {\n    let fullScreen = {\n      display: this.state.isFullScreen ? 'none' : 'inline-block',\n    };\n    let exitFullScreen = {\n      display: this.state.isFullScreen ? 'inline-block' : 'none',\n    };\n    let showToolbar = {\n      opacity: this.state.show ? '1' : '.3',\n    };\n    let x = window.innerWidth - 300 - 20;\n    let y = window.innerHeight - 40 - 40;\n\n    return (\n      <Draggable left={x} top={y}>\n        <div id=\"toolbar\" className=\"toolbar drag-me\" onMouseOver={this.show} onMouseOut={this.hide} style={showToolbar}>\n          <button className=\"toolbar-btn drag-me\">\n            <DragHandleIcon/>\n          </button>\n          <button className=\"toolbar-btn\" onClick={this.handleScreen}>\n            <span style={fullScreen}>\n              <FullScreenIcon/>\n            </span>\n            <span style={exitFullScreen}>\n              <FullScreenExitIcon/>\n            </span>\n          </button>\n          <button className=\"toolbar-btn\" title=\"settings\" onClick={this.handleSettings}>\n            <SettingsIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"notes\" onClick={this.handleNotes}>\n            <NotesIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"bookmark list\" onClick={this.handleBookmarks}>\n            <FormatListBulletedIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"add bookmark\" onClick={this.handleAddBookmark}>\n            <BookmarkIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"exit\" onClick={this.handleExit}>\n            <ExitToAppIcon/>\n          </button>\n        </div>\n      </Draggable>\n\n    );\n  }\n}\n\nexport default withRouter(Toolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport {grey, orange, green} from 'material-ui/colors';\nimport Button from 'material-ui/Button';\nimport Typography from 'material-ui/Typography';\nimport Divider from 'material-ui/Divider';\nimport Dialog, {\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from 'material-ui/Dialog';\nimport { FormControlLabel } from 'material-ui/Form';\nimport Checkbox from 'material-ui/Checkbox';\nimport SunIcon from 'material-ui-icons/Brightness5';\nimport MoonIcon from 'material-ui-icons/Brightness4';\nimport StyleIcon from 'material-ui-icons/Stars';\nimport ResetIcon from 'material-ui-icons/Restore';\nimport Tooltip from 'material-ui/Tooltip';\nimport Config from \"../service/Config\";\nimport Util from \"../service/Util\";\n\nconst styles = theme => ({\n  root: {\n\n  },\n  card: {\n    minWidth: 400,\n    minHeight: 60,\n    padding: 10,\n    margin: '15px auto',\n    boxShadow: theme.shadows[1],\n    transition: 'box-shadow .3s',\n    '&:hover': {\n      boxShadow: theme.shadows[6],\n    },\n  },\n  icon: {\n    color: grey[700],\n    '&:hover': {\n      color: orange[700],\n      cursor: 'pointer',\n    },\n  },\n  box: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '20 0 10',\n  },\n  colorBox: {\n    width: 360,\n    padding: '20px 0 10px',\n    margin: 'auto',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n  },\n  colorItem: {\n    width: '45%',\n    margin: '5px 0',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  dot: {\n    width: 14,\n    height: 14,\n    display: 'inline-block',\n    borderRadius: '50%',\n    border: '1px solid black',\n    marginRight: 8,\n  },\n  input: {\n    outline: 'none',\n    border: 'none',\n    width: '80%',\n    borderBottom: '1px dotted black',\n    backgroundColor: 'transparent',\n    transition: '.3s',\n    '&:hover': {\n      borderColor: orange[700],\n    },\n    '&:focus': {\n      borderColor: orange[700],\n    },\n  },\n  controlBox: {\n    width: 360,\n    display: 'flex',\n    alignItems: 'center',\n    padding: '5px 10px',\n  },\n  caption: {\n    width: '15%',\n    marginRight: 20,\n    fontSize: 'small',\n    textAlign: 'right',\n    color: grey[700],\n  },\n  checked: {\n    color: green[500],\n  },\n  hide: {\n    display: 'none',\n  }\n});\n\nclass SettingsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.props;\n    this.state = {\n      colors: colors,\n      background: background,\n      gutter: gutter,\n      padding: padding,\n      fontSize: fontSize,\n      lineHeight: lineHeight,\n      letterSpacing: letterSpacing,\n      wordSpacing: wordSpacing,\n      column: column,\n      disablePopup: disablePopup,\n    };\n\n    this.handleClose = this.handleClose.bind(this);\n    this.changeTheme = this.changeTheme.bind(this);\n    this.changeColors = this.changeColors.bind(this);\n    this.changeColumn = this.changeColumn.bind(this);\n    this.changeGutter = this.changeGutter.bind(this);\n    this.changePadding = this.changePadding.bind(this);\n    this.changeFontConfig = this.changeFontConfig.bind(this);\n    this.changeUserStyle = this.changeUserStyle.bind(this);\n    this.resetUserStyle = this.resetUserStyle.bind(this);\n    this.disablePopup = this.disablePopup.bind(this);\n    this.handleColorsChange = this.handleColorsChange.bind(this);\n    this.handleOtherChange = this.handleOtherChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = nextProps;\n    this.setState({\n      colors: colors,\n      background: background,\n      gutter: gutter,\n      padding: padding,\n      fontSize: fontSize,\n      lineHeight: lineHeight,\n      letterSpacing: letterSpacing,\n      wordSpacing: wordSpacing,\n      column: column,\n      disablePopup: disablePopup,\n    });\n  }\n\n  handleClose() {\n    this.props.toggleSettingsDialog(false);\n  }\n\n  handleColorsChange(event) {\n    let index = parseInt(event.target.dataset.color);\n    let colors = this.state.colors;\n    colors[index] = event.target.value;\n    this.setState({colors});\n  }\n\n  handleOtherChange(event) {\n    let name = event.target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  // 改变主题\n  changeTheme(theme) {\n    this.props.toggleTheme(theme);\n    let colors1 = Config.getDefaultConfigObj().colors;\n    let colors2 = ['#F44336', '#F57F17', '#8BC34A', '#2196F3'];\n    let colors = theme ? colors1 : colors2;\n    this.props.setConfig('colors', colors);\n    Util.addDefaultCss(); // 改变了设置，需要为当前页重新应用样式\n  }\n\n  // 改变高亮的颜色\n  changeColors(event) {\n    let colors = Config.get().colors;\n    let value = event.target.value;\n    let i = parseInt(event.target.dataset.color);\n    colors[i] = value;\n    this.props.setConfig('colors', colors);\n    console.log(`change highlight color ${i} to ${value}`);\n    Util.addDefaultCss(); // 改变了颜色，需要为当前页重新应用样式\n  }\n\n  // 改变可阅读区域列数\n  changeColumn(event, value) {\n    value = value ? 1 : 2;\n    this.props.setConfig('column', value);\n    console.log(`change column to ${value}`);\n    // TODO: 为单双列模式设置合适的gutter值\n  }\n\n  // 改变gutter的值\n  changeGutter(event) {\n    let value = parseInt(event.target.value);\n    this.props.setConfig('gutter', value);\n    console.log(`change gutter to ${value}`);\n    // TODO: 添加数值验证（不小于80）\n  }\n\n  // 改变padding的值\n  changePadding(event) {\n    let value = parseInt(event.target.value);\n    this.props.setConfig('padding', value);\n    console.log(`change padding to ${value}`);\n    // TODO: 添加数值验证（不小于10）\n  }\n\n  // 改变与字体相关的配置\n  changeFontConfig(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    let num;\n\n    if (value === 'default') {\n      num = 0;\n    } else if (value !== 'default' && isNaN(value)) {\n      alert('Invalid value!');\n      return;\n    } else {\n      num = parseInt(value);\n    }\n\n    this.props.setConfig(name, num);\n    console.log(`change ${name} to ${num}`);\n    // TODO: 添加数值校验\n    Util.addDefaultCss(); // 改变了设置，需要为当前页重新应用样式\n  }\n\n  // 导入用户自定义样式\n  changeUserStyle(event) {\n    let file = event.target.files[0];\n    let reader = new FileReader();\n\n    if (file.type.indexOf('text') === -1) {\n      alert('Invalid stylesheet!');\n      return;\n    }\n    reader.readAsText(file);\n\n    reader.onerror = () => alert('Error! Please refresh the page and try again.');\n    reader.onload = () => {\n      alert('The stylesheet has been imported.');\n      let style = Util.parseStyle(reader.result);\n      console.log(style);\n      localStorage.setItem('style', JSON.stringify(style));\n      Util.applyCss();\n    };\n  }\n\n  // 重置为默认样式\n  resetUserStyle() {\n    let config = Config.getDefaultConfigObj();\n    this.props.setConfig('colors', config.colors);\n    this.props.setConfig('padding', config.padding);\n    this.props.setConfig('gutter', config.gutter);\n    this.props.setConfig('fontSize', config.fontSize);\n    this.props.setConfig('lineHeight', config.lineHeight);\n    this.props.setConfig('letterSpacing', config.letterSpacing);\n    this.props.setConfig('wordSpacing', config.wordSpacing);\n    Util.resetStyle();\n  }\n\n  // 禁用 popup menu\n  disablePopup(event, value) {\n    this.props.setConfig('disablePopup', value);\n    console.log(`disable popup menu: ${value}`);\n  }\n\n  render() {\n    let { classes } = this.props;\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.state;\n\n    let style = {\n      color0: {\n        backgroundColor: colors[0],\n      },\n      color1: {\n        backgroundColor: colors[1],\n      },\n      color2: {\n        backgroundColor: colors[2],\n      },\n      color3: {\n        backgroundColor: colors[3],\n      },\n    };\n\n    return (\n      <div id=\"settings\">\n        <Dialog open={this.props.open} onRequestClose={this.handleClose} className={classes.root}>\n          <DialogTitle>设置</DialogTitle>\n          <DialogContent>\n            <div className={classes.card} style={style.color0}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">主题</Typography>\n                <Divider/>\n              </div>\n              <div className={classes.box}>\n                <Tooltip placement=\"bottom\" title=\"light theme\">\n                  <SunIcon className={classes.icon} onClick={() => this.changeTheme(true)}/>\n                </Tooltip>\n                <Tooltip placement=\"bottom\" title=\"dark theme\">\n                  <MoonIcon className={classes.icon} style={{marginLeft: 60}} onClick={() => this.changeTheme(false)}/>\n                </Tooltip>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color1}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">颜色(note)</Typography>\n                <Divider/>\n              </div>\n              <div>\n                <div className={classes.colorBox} onBlur={this.changeColors} onChange={this.handleColorsChange}>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[0]}}/>\n                    <input className={classes.input} data-color=\"0\" value={colors[0]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[1]}}/>\n                    <input className={classes.input} data-color=\"1\" value={colors[1]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[2]}}/>\n                    <input className={classes.input} data-color=\"2\" value={colors[2]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[3]}}/>\n                    <input className={classes.input} data-color=\"3\" value={colors[3]}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color2}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">页面</Typography>\n                <Divider/>\n              </div>\n              <div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>列数</span>\n                  <div>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={column === 1}\n                          onChange={this.changeColumn}\n                          classes={{\n                            checked: classes.checked,\n                          }}\n                        />\n                      }\n                      label=\"单列阅读模式\"\n                      title=\"需要刷新页面生效\"\n                    />\n                  </div>\n                </div>\n                <div className={classes.controlBox} onChange={this.handleOtherChange}>\n                  <span className={classes.caption}>左右边距</span>\n                  <div>\n                    <input className={classes.input} name=\"gutter\" value={gutter} onBlur={this.changeGutter}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox} onChange={this.handleOtherChange}>\n                  <span className={classes.caption}>上边距</span>\n                  <div>\n                    <input className={classes.input} name=\"padding\" value={padding} onBlur={this.changePadding}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color3}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">文字</Typography>\n                <Divider/>\n              </div>\n              <div onBlur={this.changeFontConfig} onChange={this.handleOtherChange}>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>字大小</span>\n                  <div title=\"Valid range: 10-100\">\n                    <input className={classes.input} name=\"fontSize\" value={fontSize === 0 ? 'default' : fontSize}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>行高度</span>\n                  <div title=\"Valid range: 1-100\">\n                    <input className={classes.input} name=\"lineHeight\" value={lineHeight === 0 ? 'default' : lineHeight}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>字间距</span>\n                  <div title=\"Valid range: 0-100\">\n                    <input className={classes.input} name=\"letterSpacing\" value={letterSpacing === 0 ? 'default' : letterSpacing}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color0}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">重置</Typography>\n                <Divider/>\n              </div>\n              <div className={classes.box}>\n                <Tooltip placement=\"bottom\" title=\"reset\">\n                  <ResetIcon className={classes.icon} onClick={this.resetUserStyle} style={{marginLeft: 60}}/>\n                </Tooltip>\n              </div>\n            </div>\n          </DialogContent>\n          <DialogActions color=\"primary\">\n            <Button onClick={this.handleClose}>\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nSettingsDialog.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SettingsDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport Grid from 'material-ui/Grid';\nimport Typography from 'material-ui/Typography';\nimport { orange } from 'material-ui/colors';\nimport TextIcon from 'material-ui-icons/TextFields';\nimport RemoveIcon from 'material-ui-icons/RemoveCircleOutline';\nimport DoneIcon from 'material-ui-icons/Done';\n\nconst styles = theme => ({\n  item: {\n    padding: '0 10px',\n    height: 40,\n    overflow: 'hidden',\n    transition: '.3s',\n  },\n  container: {\n    margin: 0,\n  },\n  text: {\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n  input: {\n    width: '100%',\n    border: 'none',\n    outline: 'none',\n    backgroundColor: 'transparent',\n    borderBottom: '1px dotted black',\n    '&:hover': {\n      borderColor: orange[700],\n    },\n    '&:focus': {\n      borderColor: orange[700],\n    },\n  },\n  button: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-around'\n  },\n  icon: {\n    width: 21,\n    height: 21,\n    transition: '.3s',\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n});\n\nclass BookmarkItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      label: this.props.item.label, // 书签展示的内容\n      editable: false, // 是否可编辑书签内容\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  // 点击书签，跳转到指定位置\n  handleClick() {\n    let {item, epub} = this.props;\n    epub.gotoCfi(item.cfi);\n    this.props.handleClose();\n  }\n\n  // 点击删除按钮的事件处理程序\n  handleRemove() {\n    let item = this.props.item;\n    console.log('remove bookmark with key: ', item.key);\n    this.props.deleteBookmark(item.key);\n  }\n\n  // 点击编辑按钮的事件处理程序\n  handleEdit() {\n    this.setState({editable: true});\n  }\n\n  // 点击保存按钮的事件处理程序\n  handleSave() {\n    let bookmark = this.props.item;\n    bookmark.label = this.state.label;\n    this.props.updateBookmark(bookmark);\n    this.setState({editable: false});\n  }\n\n  // 编辑bookmark的label的处理程序\n  handleChange(event) {\n    this.setState({\n      label: event.target.value\n    });\n  }\n\n  render() {\n    const classes = this.props.classes;\n\n    let text = (\n      <Typography noWrap className={classes.text} onClick={this.handleClick}>\n        {this.state.label}\n      </Typography>\n    );\n    let input = (\n      <input type=\"text\" value={this.state.label} onChange={this.handleChange} className={classes.input}/>\n    );\n    let editButton = (\n      <TextIcon className={classes.icon} onClick={this.handleEdit}/>\n    );\n    let saveButton = (\n      <DoneIcon className={classes.icon} onClick={this.handleSave}/>\n    );\n    let element = this.state.editable ? input : text;\n    let button =  this.state.editable ? saveButton : editButton;\n\n    return (\n      <li className={classes.item}>\n        <Grid container align=\"center\" className={classes.container}>\n          <Grid item xs={9}>\n            <div>\n              {element}\n            </div>\n          </Grid>\n          <Grid item xs={3}>\n            <div className={classes.button}>\n              {button}\n              <RemoveIcon className={classes.icon} onClick={this.handleRemove}/>\n            </div>\n          </Grid>\n        </Grid>\n      </li>\n    );\n  }\n}\n\nBookmarkItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(BookmarkItem);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport Typography from 'material-ui/Typography';\nimport Drawer from 'material-ui/Drawer';\nimport BookmarkItem from './Bookmark';\nimport Button from 'material-ui/Button'\nconst styles = theme => ({\n  title: {\n    marginTop: 10,\n  },\n  list: {\n    width: 280,\n    padding: 0,\n    listStyle: 'none',\n    overflowX: 'hidden',\n  },\n});\n\nclass Bookmarks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {open: true};\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleBookmarks(false);\n  }\n\n  render() {\n    const classes = this.props.classes;\n\n    return (\n      <div id=\"bookmarks\">\n        <Drawer open={this.props.open} onRequestClose={this.handleClose} >\n          <div className={classes.title}>\n            <Typography type=\"headline\" align=\"center\" gutterBottom>Bookmarks</Typography>\n          </div>\n          <ul className={classes.list}>\n            {\n              this.props.bookmarks.map(item => {\n                return (\n                  <BookmarkItem\n                    key={item.key}\n                    item={item}\n                    epub={this.props.epub}\n                    handleClose={this.handleClose}\n                    updateBookmark={this.props.updateBookmark}\n                    deleteBookmark={this.props.deleteBookmark}\n                  />\n                );\n              })\n            }\n          </ul>\n          <Button type=\"primary\" onClick={this.handleClose}>CLOSE</Button>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nBookmarks.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Bookmarks);\n","// 数据库访问的工具类\n// TODO 使用相应的IndexedDB库以提高查询效率\nclass DBUtil {\n  constructor(dbName, storeName, version = 1) {\n    if (!window.indexedDB) {\n      console.error(\"Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.\");\n      return {};\n    }\n\n    this.dbName = dbName;\n    this.storeName = storeName;\n    this.version = version;\n    this.db = null;\n\n    let request = indexedDB.open(dbName, version);\n    request.onsuccess = e => {\n      this.db = e.target.result;\n    };\n    request.onerror = e => {\n      console.error('Something bad happened while trying to open:' + e.target.errorCode);\n    };\n    request.onupgradeneeded = e => {\n      this.db = e.target.result;\n      if (!this.db.objectStoreNames.contains(storeName)) {\n        // 存入数据库的所有对象都必须拥有唯一的 key 属性作为键\n        this.db.createObjectStore(storeName, {keyPath: 'key'});\n      } else {\n        console.log('DB version changed, db version: ', this.db.version);\n      }\n    };\n  }\n\n  open(success, error) {\n    let req = indexedDB.open(this.dbName);\n    req.onsuccess = e => {\n      console.log(`open database ${this.dbName} successfully`);\n      this.db = e.target.result;\n      return success ? success() : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t open database ${this.dbName}`);\n      return error ? error() : '';\n    };\n  }\n\n  add(value, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.add(value);\n    req.onsuccess = e => {\n      return success ? success(e.target.result) : '';\n      console.log(`add data to database ${this.dbName} -> ${this.storeName} successfully`);\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t add data to database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  remove(key, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.delete(key);\n    req.onsuccess = e => {\n      console.log(`remove data with key ${key} from database ${this.dbName} -> ${this.storeName} successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t remove data with key ${key} from database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  get(key, success, error) {\n    const t = this.db.transaction(this.storeName, 'readonly');\n    const store = t.objectStore(this.storeName);\n    let req = store.get(key);\n    req.onsuccess = e => {\n      console.log(`get data from database ${this.dbName} -> ${this.storeName} successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t get data with key ${key} from ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  getAll(success, error) {\n    const t = this.db.transaction(this.storeName, 'readonly');\n    const store = t.objectStore(this.storeName);\n    let req = store.openCursor();\n    let result = [];\n    req.onsuccess = e => {\n      let cursor = e.target.result;\n      if (cursor) {\n        result.push(cursor.value);\n        cursor.continue();\n      } else {\n        console.log(`get all data from database ${this.dbName} -> ${this.storeName} successfully`);\n        success(result);\n      }\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t get data from database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  update(value, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.put(value);\n    req.onsuccess = e => {\n      console.log(`update data successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t update data`);\n      return error ? error() : '';\n    };\n  }\n\n  close() {\n    this.db.close();\n  }\n}\n\nexport default DBUtil;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport { grey, orange } from 'material-ui/colors';\nimport Typography from 'material-ui/Typography';\nimport ArrowIcon from 'material-ui-icons/ArrowForward';\nimport ClearIcon from 'material-ui-icons/Clear';\n\nconst styles = theme => ({\n  item: {\n    width: '90%',\n    height: 80,\n    padding: 10,\n    margin: '15px auto',\n    borderRadius: 5,\n    display: 'flex',\n    alignItems: 'center',\n    boxShadow: theme.shadows[1],\n    transition: '.3s',\n    '&:hover': {\n      boxShadow: theme.shadows[6],\n    }\n  },\n  noteContent: {\n    width: '70%',\n    flexGrow: '1',\n  },\n  input: {\n    border: 'none',\n    outline: 'none',\n    color: grey[600],\n    width: '100%',\n    backgroundColor: 'transparent',\n    borderBottom: '1px dotted black',\n  },\n  icon: {\n    width: 18,\n    height: 18,\n    color: grey[700],\n    display: 'block',\n    transition: '.3s',\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n});\n\nclass Note extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      note: this.props.note.note, // note的内容\n      editable: false, // 是否可编辑note内容\n    };\n\n    this.handleJump = this.handleJump.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleJump() {\n    this.props.handleJump(this.props.note.cfi);\n  }\n\n  handleDelete() {\n    this.props.deleteNote(this.props.note.key);\n  }\n\n  handleEdit() {\n    this.setState({editable: true});\n  }\n\n  handleChange(event) {\n    this.setState({note: event.target.value});\n  }\n\n  handleBlur(event) {\n    let note = this.props.note;\n    note.note = event.target.value;\n    this.props.updateNote(note);\n    this.setState({editable: false});\n    console.log('note has been updated!');\n  }\n\n  render() {\n    const {note, colors, classes} = this.props;\n    let style = {\n      backgroundColor: colors[note.color],\n    };\n    let margin = {\n      marginTop: 15,\n    };\n\n    let text = (\n      <Typography noWrap\n                  color={'secondary'}\n                  onClick={this.handleEdit}\n      >\n        {this.state.note}\n      </Typography>\n    );\n    let input = (\n      <input type=\"text\"\n             autoFocus=\"autofocus\"\n             value={this.state.note}\n             className={classes.input}\n             onChange={this.handleChange}\n             onBlur={this.handleBlur}\n      />\n    );\n\n    return (\n      <li>\n        <div style={style} className={classes.item}>\n          <div className={classes.noteContent}>\n            <div>\n              <Typography noWrap type={'body2'}>{note.text}</Typography>\n            </div>\n            <div>\n              {this.state.editable ? input : text}\n            </div>\n          </div>\n          <div>\n            <ClearIcon className={classes.icon} onClick={this.handleDelete}/>\n            <ArrowIcon className={classes.icon} onClick={this.handleJump} style={margin}/>\n          </div>\n        </div>\n      </li>\n    );\n  }\n}\n\nNote.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Note);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport Typography from 'material-ui/Typography';\nimport Divider from 'material-ui/Divider';\nimport Button from 'material-ui/Button';\nimport Drawer from 'material-ui/Drawer';\nimport Note from './Note';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  title: {\n    marginTop: 10,\n  },\n  list: {\n    width: 280,\n    padding: 0,\n    listStyle: 'none',\n    flexGrow: 2,\n    overflowX: 'hidden',\n  },\n  foot: {\n    display: 'flex',\n    flexShrink: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    width: '100%',\n    height: 40,\n    padding: '0 10px',\n  },\n});\n\nclass Notes extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleJump = this.handleJump.bind(this);\n    this.handleExport = this.handleExport.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleNotes(false);\n  }\n\n  handleJump(cfi) {\n    this.props.epub.gotoCfi(cfi);\n  }\n\n  handleExport() {\n    this.props.toggleExport(true);\n  }\n\n  render() {\n    const {notes, colors, classes} = this.props;\n\n    return (\n      <div id=\"notes\">\n        <Drawer open={this.props.open} onRequestClose={this.handleClose}  onClick={this.handleClose} anchor=\"right\" className={classes.root}>\n          <div className={classes.title}>\n            <Typography type=\"headline\" align=\"center\" gutterBottom>Notes</Typography>\n          </div>\n          <ul className={classes.list}>\n            {\n              notes.map((item) => {\n                return (\n                  <Note key={item.key}\n                        note={item}\n                        colors={colors}\n                        deleteNote={this.props.deleteNote}\n                        updateNote={this.props.updateNote}\n                        handleJump={this.handleJump}\n                  />\n                );\n              })\n            }\n          </ul>\n          <Divider/>\n\n          <div className={classes.foot}>\n            <Button onClick={this.handleExport} color=\"accent\" dense>\n              export\n            </Button>\n          </div>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nNotes.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Notes);\n","import React from 'react';\nimport Snackbar from 'material-ui/Snackbar';\nimport Button from 'material-ui/Button';\n\nclass Message extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleMessage(false);\n  }\n\n  render() {\n    let {open} = this.props;\n\n    return (\n      <Snackbar\n        anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n        open={open}\n        autoHideDuration={4000}\n        onRequestClose={this.handleClose}\n        SnackbarContentProps={{\n          'aria-describedby': 'message',\n        }}\n        message={<span id=\"message\">成功添加书签.</span>}\n        action={[\n          <Button key=\"dismiss\" color=\"accent\" dense onClick={this.handleClose}>\n            关闭\n          </Button>,\n        ]}\n      />\n    );\n  }\n}\n\nexport default Message;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport {grey, orange} from 'material-ui/colors';\nimport IconButton from 'material-ui/IconButton';\nimport CopyIcon from 'material-ui-icons/ContentCut';\nimport Dialog from 'material-ui/Dialog';\nimport Divider from 'material-ui/Divider';\nimport CloseIcon from 'material-ui-icons/Close';\nimport Slide from 'material-ui/transitions/Slide';\nimport Tooltip from 'material-ui/Tooltip';\n\nconst styles = theme => ({\n  head: {\n    width: '100%',\n    height: 60,\n    padding: '0 30px',\n    top: 0,\n    position: 'fixed',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderBottomStyle: 'solid',\n    borderColor: theme.palette.text.divider,\n    backgroundColor: theme.palette.background.paper,\n  },\n  logo: {\n    fontFamily: '\\'Titillium Web\\', sans-serif',\n    fontSize: '1.5rem',\n    color: theme.palette.text.primary,\n  },\n  headRight: {\n    display: 'flex',\n  },\n  icon: {\n    width: 20,\n    height: 20,\n  },\n  article: {\n    overflowY: 'auto',\n    width: '100vw',\n    height: '100vh',\n    marginTop: 60,\n  },\n  page: {\n    width: 660,\n    margin: '50px auto 0',\n    fontFamily: '\\'Helvetica Neue\\', \\'Arial\\', \\'PingFang SC\\', \\'Hiragino Sans GB\\', \\'Microsoft YaHei\\', \\'WenQuanYi Micro Hei\\', sans-serif',\n    color: theme.palette.text.primary,\n  },\n  title: {\n    fontFamily: 'Georgia, Palatino, serif',\n    fontSize: '24px',\n    fontWeight: 400,\n    lineHeight: '30px',\n    textAlign: 'center',\n    paddingBottom: 10,\n  },\n  note: {\n    margin: '20px 0',\n  },\n  quote: {\n    borderColor: orange[400],\n    borderLeft: '6px solid',\n    backgroundColor: grey[200],\n    borderRadius: '5px',\n    padding: '15px 10px',\n    color: 'rgba(0, 0, 0, 0.87)',\n  },\n  annotation: {\n    marginTop: '20px',\n    fontSize: '14px',\n    paddingLeft: '16px',\n  },\n});\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nclass ExportPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.generateArticle = this.generateArticle.bind(this);\n    this.handleCopy = this.handleCopy.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleExport(false);\n  }\n\n  // format为则true导出为plain text，否则导出为markdown\n  generateArticle(format) {\n    let {notes} = this.props;\n    let article = '';\n    let divider = format ? '\\n*** *** ***\\n\\n' : '\\n* * * * * *\\n\\n';\n\n    notes.forEach((note) => {\n      let fragment = format ? '' : '> ';\n      fragment += note.text;\n      fragment += '\\n\\n';\n      fragment += note.note ? `${note.note}\\n` : '';\n      fragment += divider;\n      article += fragment;\n    });\n\n    return article;\n  }\n\n  copyHandler = (event) => {\n    let text = this.generateArticle(true);\n    event.clipboardData.setData('text/plain', text);\n    event.preventDefault();\n    console.log('notes copied!');\n    alert('Notes has been copied.');\n  };\n\n  // 复制纯文本\n  handleCopy() {\n    document.addEventListener('copy', this.copyHandler);\n    document.execCommand('copy', false, null);\n    setTimeout(() => {\n      document.removeEventListener('copy', this.copyHandler);\n    }, 1000);\n  }\n\n  render() {\n    const { open, notes, book, classes } = this.props;\n\n    return (\n      <div id=\"export-panel\">\n        <Dialog\n          fullScreen\n          open={open}\n          onRequestClose={this.handleClose}\n          transition={Transition}\n        >\n          <div className={classes.head}>\n            <div className={classes.logo}>\n              Notes Preview\n            </div>\n            <div className={classes.headRight}>\n              <Tooltip title=\"copy\" placement=\"bottom\">\n                <IconButton onClick={this.handleCopy}>\n                  <CopyIcon className={classes.icon}/>\n                </IconButton>\n              </Tooltip>\n              <IconButton onClick={this.handleClose}>\n                <CloseIcon/>\n              </IconButton>\n            </div>\n          </div>\n          <div className={classes.article}>\n            <div className={classes.page}>\n              <h1 className={classes.title}>{ book.name }</h1>\n              {\n                notes.map((note) => {\n                  return (\n                    <div key={note.key}>\n                      <div className={classes.note}>\n                        <blockquote className={classes.quote}>\n                          {note.text}\n                        </blockquote>\n                        <p className={classes.annotation}>\n                          {note.note}\n                        </p>\n                      </div>\n                      <Divider/>\n                    </div>\n                  );\n                })\n              }\n            </div>\n          </div>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nExportPanel.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ExportPanel);\n","import React, { Component } from 'react';\nimport { Route, Link ,withRouter} from \"react-router-dom\";\nimport { enquireScreen } from 'enquire-js';\nimport Header from './Home/Nav0';\nimport Footer from './Home/Footer0';\nimport Home from './Home';\nimport Page3 from './Page3';\nimport BookIndex from './Page2';\n//import BookIndex from './Page2/book_index_container';\nimport Book from './Page2/book_show_container';\n//import  Reader from\"./reader\"\nimport SReader from './Reader/Control/App'\nimport Session from \"./Session\"\nimport Admin from \"./Page4\"\nimport {\n    Nav00DataSource,\n    Footer00DataSource,\n} from './Home/data.source.js';\n\nlet isMobile;\nenquireScreen((b) => {\n    isMobile = b;\n});\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isMobile,\n        };\n    }\n    componentDidMount() {\n        // 适配手机屏幕;\n        enquireScreen((b) => {\n            this.setState({ isMobile: !!b });\n        });\n    }\n    controlHeader() {\n        //console.log(this.props.history.location.pathname);\n        if (this.props.history.location.pathname.indexOf('/page2/reader') !== -1) return null;\n        return <Header dataSource={Nav00DataSource} isMobile={this.state.isMobile} />;\n    }\n    controlFooter() {\n        if (this.props.history.location.pathname.indexOf('/page2/reader') !== -1) return null;\n        return <Footer dataSource={Footer00DataSource} isMobile={this.state.isMobile} />;\n    }\n    render() {\n        return (\n\n                <div>\n\n                    {this.controlHeader()}\n                    <Route exact path=\"/\" component={Home} />\n                    <Route exact path=\"/page2\" component={BookIndex}  />\n                    <Route exact path=\"/page2/:id\" component={ Book }/>\n                    <Route exact path =\"/admin\" component={Admin}/>\n                    <Route exact path=\"/page3\" component={Page3} />\n                    <Route exact path=\"/session\" component={Session} />\n                    <Route exact path=\"/page2/reader/:id\" component={SReader}/>\n                    {this.controlFooter()}\n\n                </div>\n\n        );\n    }\n}\n\nexport default withRouter(App);","import React from 'react';\nimport Navigation from './Navigation';\nimport ViewArea from './ViewArea';\nimport Toolbar from './Toolbar';\nimport SettingsDialog from './SettingsDialog';\nimport Bookmarks from './Bookmarks';\nimport DBUtil from '../service/DBUtil';\nimport Notes from './Notes';\nimport Config from '../service/Config';\nimport Message from './Message';\nimport ExportPanel from './ExportPanel';\nconst ePub = window.ePub;\n\n//import ePub from 'epubjs'\nconst rangy = window.rangy;\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openSettings: false, // 打开设置面板\n      openBookmarks: false, // 打开书签列表\n      openNotes: false, // 打开笔记列表\n      openMessage: false, // 打开消息通知\n      openExport: false, // 打开note导出面板\n      bookmarks: [], // 书签列表\n      notes: [], // note列表\n      colors: Config.get().colors, // note的四种颜色\n      background: Config.get().background, // 阅读区域的背景色\n      gutter: Config.get().gutter, // 阅读区域两侧预留的间隔\n      padding: Config.get().padding, // 阅读区域上下两侧预留的间隔\n      fontSize: Config.get().fontSize, // 字体大小\n      lineHeight: Config.get().lineHeight, // 行高\n      letterSpacing: Config.get().letterSpacing, // 字间距\n      wordSpacing: Config.get().wordSpacing, // 词间距（限英语）\n      column: Config.get().column, // 列数\n      disablePopup: Config.get().disablePopup, // 禁用弹出菜单\n    };\n\n    this.epub = null;\n\n    this.toggleSettingsDialog = this.toggleSettingsDialog.bind(this);\n    this.toggleBookmarks = this.toggleBookmarks.bind(this);\n    this.toggleNotes = this.toggleNotes.bind(this);\n    this.toggleMessage = this.toggleMessage.bind(this);\n    this.toggleExport = this.toggleExport.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n    this.deleteBookmark = this.deleteBookmark.bind(this);\n    this.updateBookmark = this.updateBookmark.bind(this);\n    this.addNote = this.addNote.bind(this);\n    this.deleteNote = this.deleteNote.bind(this);\n    this.updateNote = this.updateNote.bind(this);\n    this.getNote = this.getNote.bind(this);\n    this.getNotesByChapter = this.getNotesByChapter.bind(this);\n    this.setConfig = this.setConfig.bind(this);\n  }\n\n  componentWillMount() {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.getAll(result => {\n          let bookmarksArr;\n          bookmarksArr = result.filter(item => item.bookKey === this.props.epubTitle.id);\n          this.setState({bookmarks: bookmarksArr});\n        });\n      }\n    );\n\n    let noteDBAccess = new DBUtil('notes', 'note');\n    noteDBAccess.open(\n      () => {\n        noteDBAccess.getAll(result => {\n          let noteArr;\n          noteArr = result.filter(item => item.bookKey === this.props.epubTitle.id);\n          this.setState({notes: noteArr});\n        });\n      }\n    );\n    //console.log(this.props.epubTitle)\n    this.epub = ePub( window.webBase+\"api/epub/\"+this.props.epubTitle.id+\".epub\");\n  }\n\n  componentDidMount() {\n    rangy.init(); // 初始化\n  }\n\n  // 为state的属性设置相应的值\n  setConfig(key, value) {\n    this.setState({[key]: value});\n    Config.set(key, value);\n  }\n\n  toggleSettingsDialog(open) {\n    this.setState({openSettings: open});\n  }\n\n  toggleBookmarks(open) {\n    this.setState({openBookmarks: open});\n  }\n\n  toggleNotes(open) {\n    this.setState({openNotes: open});\n  }\n\n  toggleMessage(open) {\n    this.setState({openMessage: open});\n  }\n\n  toggleExport(open) {\n    this.setState({openExport: open});\n  }\n\n  // 添加书签\n  addBookmark(bookmark) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.add(bookmark);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr.push(bookmark);\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 删除书签\n  deleteBookmark(key) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.remove(key);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr = bookmarksArr.filter(item => item.key !== key);\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 更新书签内容\n  updateBookmark(bookmark) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.update(bookmark);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr.forEach((item, i, arr) => {\n          if (item.key === bookmark.key)\n            arr[i] = bookmark;\n        });\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 添加note\n  addNote(note) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.add(note);\n        let noteArr = this.state.notes;\n        noteArr.push(note);\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 删除note\n  deleteNote(key) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.remove(key);\n        let noteArr = this.state.notes;\n        noteArr = noteArr.filter(item => item.key !== key);\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 更新note内容\n  updateNote(note) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.update(note);\n        let noteArr = this.state.notes;\n        noteArr.forEach((item, i, arr) => {\n          if (item.key === note.key)\n            arr[i] = note;\n        });\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 获取指定key的note\n  getNote(key) {\n    let notes = this.state.notes;\n    let target = null;\n\n    notes.forEach((item) => {\n      if (item.key === key) target = item;\n    });\n\n    return target;\n  }\n\n  // 获取指定章节的note\n  getNotesByChapter(chapter) {\n    let notes = this.state.notes;\n\n    return notes.filter(item => item.chapter === chapter);\n  }\n\n  render() {\n    let epub = this.epub;\n    let {readingBook} = this.props;\n    let { openSettings, openBookmarks, openNotes, openMessage, openExport, bookmarks, notes, colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.state;\n\n    return (\n      <div id=\"viewer\">\n        <Navigation epub={epub}\n                    theme={this.props.theme}\n        />\n        <ViewArea epub={epub}\n                  book={this.props.readingBook}\n                  addNote={this.addNote}\n                  getNote={this.getNote}\n                  deleteNote={this.deleteNote}\n                  updateNote={this.updateNote}\n                  getNotesByChapter={this.getNotesByChapter}\n                  theme={this.props.theme}\n                  background={background}\n                  gutter={gutter}\n                  padding={padding}\n                  colors={colors}\n                  column={column}\n                  disablePopup={disablePopup}\n                  epubTitle={this.props.epubTitle}\n        />\n        <Toolbar handleReading={this.props.handleReading}\n                 toggleMessage={this.toggleMessage}\n                 toggleSettingsDialog={this.toggleSettingsDialog}\n                 toggleBookmarks={this.toggleBookmarks}\n                 toggleNotes={this.toggleNotes}\n                 handleAddBookmark={this.addBookmark}\n                 readingBook={this.props.readingBook}\n                 epub={epub}\n                 epubTitle={this.props.epubTitle}\n        />\n        <Bookmarks open={openBookmarks}\n                   toggleBookmarks={this.toggleBookmarks}\n                   bookmarks={bookmarks}\n                   deleteBookmark={this.deleteBookmark}\n                   updateBookmark={this.updateBookmark}\n                   getBookmark={this.getBookmark}\n                   epub={epub}\n                   epubTitle={this.props.epubTitle}\n        />\n        <Notes open={openNotes}\n               toggleNotes={this.toggleNotes}\n               toggleExport={this.toggleExport}\n               notes={notes}\n               colors={colors}\n               deleteNote={this.deleteNote}\n               updateNote={this.updateNote}\n               epub={epub}\n        />\n        <SettingsDialog open={openSettings}\n                        toggleSettingsDialog={this.toggleSettingsDialog}\n                        toggleTheme={this.props.toggleTheme}\n                        setConfig={this.setConfig}\n                        colors={colors}\n                        background={background}\n                        gutter={gutter}\n                        padding={padding}\n                        fontSize={fontSize}\n                        lineHeight={lineHeight}\n                        letterSpacing={letterSpacing}\n                        wordSpacing={wordSpacing}\n                        column={column}\n                        disablePopup={disablePopup}\n        />\n        <Message open={openMessage} toggleMessage={this.toggleMessage}/>\n        <ExportPanel open={openExport}\n                     book={readingBook}\n                     notes={notes}\n                     theme={this.props.theme}\n                     toggleExport={this.toggleExport}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Viewer;\n","import React from 'react';\nimport Viewer from './Viewer';\nimport { MuiThemeProvider, createMuiTheme } from 'material-ui/styles';\nimport Config from \"../service/Config\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isReading: true, // 书籍是否正在被阅读\n      readingBook: {\n        author:\"\",\n        description:\"\",\n        key:\"\",\n        name:\"\",\n        content:[],\n      }, // 正在被阅读的书籍对象\n      theme: Config.get().theme, // true为light主题，false为dark主题\n    };\n\n    this.handleReading = this.handleReading.bind(this);\n    this.handleReadingBook = this.handleReadingBook.bind(this);\n    this.toggleTheme = this.toggleTheme.bind(this);\n  }\n\n  handleReading(isReading) {\n    this.setState({isReading: isReading});\n  }\n\n  handleReadingBook(book) {\n    this.setState({readingBook: book});\n  }\n\n  // 切换主题\n  toggleTheme(theme) {\n    this.setState({theme});\n    Config.set('theme', theme);\n  }\n\n  render() {\n    let {isReading, readingBook, theme} = this.state;\n\n    const themeType = createMuiTheme({\n      palette: {\n        type: theme ? 'light' : 'dark',\n      },\n    });\n\n    let viewer = (\n      <Viewer handleReading={this.handleReading}\n              readingBook={readingBook}\n              toggleTheme={this.toggleTheme}\n              theme={theme}\n              epubTitle = {this.props.match.params}\n      />\n    );\n    let element = viewer;\n    //let element = viewer;\n    let bgColor;\n    if (isReading && theme) bgColor = Config.get().background || '#fff';\n    else if (isReading && !theme) bgColor = '#424242';\n    else if (!isReading && theme) bgColor = '#f1f2f3';\n    else if (!isReading && !theme) bgColor = '#424242';\n    document.body.style.backgroundColor = bgColor;\n\n    return (\n      <MuiThemeProvider theme={themeType}>\n        <div id=\"app\">\n          {element}\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { Form, Icon, Input, Button,Alert} from 'antd';\r\nconst Search = Input.Search;\r\nclass SessionForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            username2:\"\",\r\n            password2:\"\",\r\n            errors: this.props.errors\r\n        };\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.guestSubmit = this.guestSubmit.bind(this);\r\n        this.handleRegister = this.handleRegister.bind(this);\r\n        this.toAdmin = this.toAdmin.bind(this);\r\n    }\r\n\r\n\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const user = Object.assign({}, this.state);\r\n        this.props.clearErrors();\r\n        this.props.processForm(user)\r\n            .then(() => { this.setState({ errors: this.props.errors }); });\r\n\r\n    }\r\n    handleRegister(e) {\r\n        e.preventDefault();\r\n        const user = {\r\n            username:this.state.username2,\r\n            password:this.state.password2,\r\n        };\r\n        this.props.clearErrors();\r\n        this.props.processRegister(user)\r\n            .then(() => { this.setState({ errors: this.props.errors }); });\r\n\r\n    }\r\n    componentWillReceiveProps() {\r\n        if (this.props.errors.length < 1) {\r\n            this.setState({ errors: []});\r\n        }\r\n    }\r\n\r\n    guestSubmit(e) {\r\n        e.preventDefault();\r\n        this.props.processForm({\r\n            username: \"guest\",\r\n            password: \"password\"\r\n        });\r\n    }\r\n\r\n    update(field) {\r\n        return e => this.setState({\r\n            [field]: e.currentTarget.value\r\n        });\r\n    }\r\n\r\n    toAdmin() {\r\n        this.props.history.push(\"/admin\");\r\n    }\r\n    guestlogin() {\r\n        if(this.props.loggedIn === false) {\r\n            return (\r\n                <Button type=\"primary\"onClick={this.guestSubmit} className=\"login-form-button\">\r\n                    以guest身份登录\r\n                </Button>\r\n            );\r\n        }\r\n    }\r\n    handleAlert() {\r\n        if(this.props.loggedIn === false) {\r\n            return (\r\n                <Alert message=\"未登录\" type=\"error\" />\r\n            );\r\n        } else {\r\n            return (\r\n                <Alert message=\"已登录\" type=\"success\" />\r\n            );\r\n        }\r\n    }\r\n    displayLogin() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        if(this.props.loggedIn === false){\r\n            return (\r\n                <Form onSubmit={this.handleSubmit} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('username', {\r\n                            rules: [{ required: true, message: 'Please input your username!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                placeholder=\"Username\"\r\n                                onChange={this.update('username')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('password', {\r\n                            rules: [{ required: true, message: 'Please input your Password!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                onChange={this.update('password')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            登录\r\n                        </Button>\r\n                        <div className=\"login-form-button\">{ this.guestlogin() }</div>\r\n                    </Form.Item>\r\n                </Form>\r\n            )\r\n        }\r\n    }\r\n    render() {\r\n        //document.title = \"Awesome Readers\";\r\n        const { getFieldDecorator } = this.props.form;\r\n        return (\r\n            <div className=\"login-form\">\r\n                <div>{ this.handleAlert() }</div>\r\n                <Button type=\"primary\" onClick={this.props.logout}>登出</Button>\r\n                {this.displayLogin()}\r\n\r\n\r\n                <Form onSubmit={this.handleRegister} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('username2', {\r\n                            rules: [{ required: true, message: 'Please input your username!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                placeholder=\"Username\"\r\n                                onChange={this.update('username2')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('password2', {\r\n                            rules: [{ required: true, message: 'Please input your Password!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                onChange={this.update('password2')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            注册\r\n                        </Button>\r\n\r\n                    </Form.Item>\r\n                </Form>\r\n\r\n                <Search placeholder=\"输入管理员口令\"\r\n                        enterButton=\"管理员登录\"\r\n                        onSearch={(value) => {\r\n                    if(value === \"root\") this.toAdmin()\r\n                }}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst WrappedNormalLoginForm = Form.create({ name: 'normal_login' })(SessionForm);\r\nexport default withRouter(WrappedNormalLoginForm );\r\n","import { connect } from 'react-redux';\r\nimport { receiveErrors, clearErrors } from '../../actions/error_actions';\r\nimport { login, logout, signup ,register } from '../../actions/session_actions';\r\nimport SessionForm from './session_form';\r\n\r\nconst mapStateToProps = ({ session, errors }) => {\r\n    return {\r\n        loggedIn: Boolean(session.currentUser),\r\n        errors\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        processForm: user => dispatch(login(user)),\r\n        processRegister: user => dispatch(register(user)),\r\n        clearErrors: () => { return dispatch(clearErrors()); },\r\n        logout: ()=>{return dispatch(logout())}\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(SessionForm);\r\n","import React from 'react';\r\nimport {withRouter} from 'react-router';\r\nimport SessionFormContainer from './session_form_container';\r\nimport './index.css'\r\nclass Session extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.loggedIn) {\r\n            this.props.history.push('/books');\r\n        }\r\n    }\r\n\r\n    top() {\r\n        return(\r\n            <section className='sign-up-container'>\r\n                <SessionFormContainer />\r\n            </section>\r\n        );\r\n\r\n    }\r\n    //this.props.loggedIn === false\r\n    render() {\r\n        if (1) {\r\n            return (\r\n                <div className='landing-page'>\r\n                    { this.top() }\r\n                </div>\r\n\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(Session);\r\n","import React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { Form, Icon, Input, Button, Checkbox ,Upload, message } from 'antd';\r\nimport \"./index.css\"\r\nimport {receiveErrors} from \"../../actions/error_actions\";\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\n\r\nconst Search = Input.Search;\r\nclass Index extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state= {\r\n            author:\"\",\r\n            title:\"\",\r\n            description:\"\",\r\n            cover_img_url:\"\",\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleSubmit() {\r\n        const book = Object.assign({}, this.state);\r\n        console.log(book);\r\n        fetch( window.webBase+\"api/upload\", {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify(book)\r\n        }).then(res=>res.json()).then(json => (console.log(json)\r\n        ), err => (\r\n           console.log(err)\r\n        ))\r\n    }\r\n    update(field) {\r\n        return e => this.setState({\r\n            [field]: e.currentTarget.value\r\n        });\r\n    }\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        const props = {\r\n            name: 'epub',\r\n            action: window.webBase+\"api/upload_epub\",\r\n            headers: {\r\n                authorization: 'authorization-text',\r\n            },\r\n            onChange(info) {\r\n                if (info.file.status !== 'uploading') {\r\n                    console.log(info.file, info.fileList);\r\n                }\r\n                if (info.file.status === 'done') {\r\n                    message.success(`${info.file.name} file uploaded successfully`);\r\n                } else if (info.file.status === 'error') {\r\n                    message.error(`${info.file.name} file upload failed.`);\r\n                }\r\n            },\r\n        };\r\n        return (\r\n            <div className=\"admin-page\">\r\n            <div className=\"login-form\">\r\n                <h1 className='logo'><strong>上传书籍</strong></h1>\r\n                <Form onSubmit={this.handleSubmit} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('author')(\r\n                            <Input\r\n                                type=\"author\"\r\n                                placeholder=\"author\"\r\n                                onChange={this.update('author')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('title')(\r\n                            <Input\r\n                                type=\"title\"\r\n                                placeholder=\"title\"\r\n                                onChange={this.update('title')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('description')(\r\n                            <Input\r\n                                type=\"description\"\r\n                                placeholder=\"description\"\r\n                                onChange={this.update('description')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('cover_img_uri')(\r\n                            <Input\r\n                                type=\"cover_img_url\"\r\n                                placeholder=\"封面图片的url地址\"\r\n                                onChange={this.update('cover_img_url')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            上传\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n                <Upload {...props}>\r\n                    <Button>\r\n                        <Icon type=\"upload\" /> 上传epub和svg图片,命名需和title一致\r\n                    </Button>\r\n                </Upload>\r\n                <h1 className='logo'><strong>删除书籍</strong></h1>\r\n                <Search placeholder=\"输入删除书籍的title\"\r\n                        enterButton=\"删除\"\r\n                        onSearch={(value) => {\r\n                            fetch(window.webBase+\"api/delete_book/\"+value);\r\n                        }}/>\r\n            </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst WrappedForm = Form.create({ name: 'upload' })(Index);\r\nexport  default  WrappedForm;","import App from './App';\r\n//must import app container where it is rendered\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { HashRouter} from 'react-router-dom';\r\nimport {persistStore, persistCombineReducers} from 'redux-persist';\r\nimport { PersistGate } from 'redux-persist/es/integration/react';\r\nconst Root = ({ store }) => (\r\n    <Provider store={ store }>\r\n        <HashRouter>\r\n            <PersistGate persistor={persistStore(store)}>\r\n                <App />\r\n            </PersistGate>\r\n\r\n        </HashRouter>\r\n    </Provider>\r\n);\r\n\r\nexport default Root;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import merge from 'lodash/merge';\r\n\r\nimport {\r\n    RECEIVE_CURRENT_USER,\r\n} from '../actions/session_actions';\r\n\r\nconst nullUser = Object.freeze({\r\n    currentUser: null,\r\n});\r\n\r\nconst SessionReducer = (state = nullUser, action) => {\r\n    Object.freeze(state);\r\n    switch(action.type) {\r\n        case RECEIVE_CURRENT_USER:\r\n            const currentUser = action.currentUser;\r\n            return merge({}, nullUser, {\r\n                currentUser\r\n            });\r\n        case 'LOGOUT':\r\n            return nullUser;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default SessionReducer;\r\n","import { RECEIVE_BOOKS, RECEIVE_ONE_BOOK,RECEIVE_COMMENT } from '../actions/book_actions';\r\nimport { merge } from 'lodash';\r\n\r\n\r\nconst BooksReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case RECEIVE_BOOKS:\r\n            //console.log(merge({}, state, action.book));\r\n            return merge({}, null, action.book);\r\n        case RECEIVE_ONE_BOOK:\r\n            return merge({}, state, { [action.book.id]: action.book } );\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default BooksReducer;\r\n","import { RECEIVE_ERRORS, CLEAR_ERRORS } from '../actions/error_actions';\r\nimport { merge } from 'lodash';\r\n\r\nconst ErrorsReducer = (state = [], action) => {\r\n\r\n    switch (action.type) {\r\n        case RECEIVE_ERRORS:\r\n            console.log(action);\r\n            return merge({}, state, action.errors);\r\n        case CLEAR_ERRORS:\r\n            return [];\r\n        default:\r\n            return state;\r\n    }\r\n\r\n};\r\n\r\nexport default ErrorsReducer;\r\n","import { combineReducers } from 'redux';\r\nimport SessionReducer from './session_reducer';\r\nimport BooksReducer from './book_reducer';\r\nimport ErrorReducer from './error_reducer';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    session: SessionReducer,\r\n    books: BooksReducer,\r\n    errors: ErrorReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\n\r\n// Logger with default options\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer  from '../reducers/root_reducer';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport {persistStore, persistReducer} from 'redux-persist';\r\n\r\nimport storage from 'redux-persist/lib/storage'\r\nconst middleware = [thunk];\r\n\r\nconst config = {\r\n    key: 'root',\r\n    storage,\r\n};\r\nlet reducer = persistReducer(config, rootReducer);\r\n\r\nexport default function configureStore() {\r\n    return  createStore(reducer, composeWithDevTools(\r\n        applyMiddleware(...middleware)\r\n    ));\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './components/root';\nimport * as serviceWorker from './serviceWorker';\nimport configureStore from './store/store';\nconst reduxStore = configureStore();\nwindow.webBase = \"https://www.mooooon333.cn:5000/\";\nReactDOM.render(<Root store={reduxStore}/>, document.getElementById('root'));\n//ReactDOM.render(<Root/>, document.getElementById('root'));\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}