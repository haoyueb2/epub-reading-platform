{"version":3,"sources":["components/Home/index.jsx","components/Home/Nav0.jsx","components/Home/Footer0.jsx","components/Home/Banner0.jsx","components/Home/Content0.jsx","components/Home/Content7.jsx","components/Home/Content13.jsx","components/Home/data.source.js","components/Home/Content12.jsx","components/Page2/book_gallery.jsx","actions/error_actions.jsx","actions/session_actions.jsx","components/Page3/index.jsx","components/Page2/index.jsx","reducers/selectors.js","actions/book_actions.jsx","components/Page2/SVGLoader.js","components/Page2/animation.js","components/Page2/book_show.jsx","components/Page2/book_show_container.js","components/Reader/Control/Navigation.jsx","components/Reader/model/Note.js","components/Reader/Control/EditorToolbar.jsx","components/Reader/Control/NoteCard.jsx","components/Reader/service/Config.js","components/Reader/service/Util.js","components/Reader/service/AutoBookmark.js","components/Reader/Control/ViewArea.jsx","components/Reader/Control/Draggable.jsx","components/Reader/model/Bookmark.js","components/Reader/Control/Toolbar.jsx","components/Reader/Control/SettingsDialog.jsx","components/Reader/Control/Bookmark.jsx","components/Reader/Control/Bookmarks.jsx","components/Reader/service/DBUtil.js","components/Reader/Control/Note.jsx","components/Reader/Control/Notes.jsx","components/Reader/Control/Message.jsx","components/Reader/Control/ExportPanel.jsx","components/App.js","components/Reader/Control/Viewer.jsx","components/Reader/Control/App.jsx","components/Session/session_form.jsx","components/Session/session_form_container.js","components/Session/index.jsx","components/Page4/index.jsx","components/root.jsx","serviceWorker.js","reducers/session_reducer.js","reducers/book_reducer.jsx","reducers/error_reducer.js","reducers/root_reducer.js","store/store.js","index.js"],"names":["isMobile","Item","es_menu","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","phoneClick","menu","findDOMNode","phoneOpen","state","setState","menuHeight","scrollHeight","_this2","esm_extends","dataSource","_this$state","navData","Menu","children","navChildren","keys","map","key","i","react_default","a","createElement","assign","toString","react_router_dom","to","href","target","es","component","animation","opacity","type","wrapper","page","className","concat","x","ease","logo","mobileMenu","onClick","ref","c","style","height","mode","defaultSelectedKeys","theme","React","Component","Footer","ScrollOverPack_default","OverPack","y","copyright","PureComponent","Banner","currentProps","rc_queue_anim_es","delay","textWrapper","title","match","src","width","alt","content","yoyo","repeat","duration","es_icon","Content","getBlockChildren","data","item","col","icon","listChildren","block","titleWrapper","name","indexOf","objectSpread","leaveReverse","row","TabPane","tabs","Content13","Nav00DataSource","Banner00DataSource","button","Content00DataSource","playScale","md","xs","Content130DataSource","Footer00DataSource","enquireScreen","b","location","window","Home","show","port","setTimeout","_this3","Banner0","id","Content0","Home_Content13","d","dom","receiveErrors","errors","receiveCurrentUser","currentUser","IconText","_ref","text","marginRight","Index","delete_bookshelf","bind","assertThisInitialized","fetchBookshelf","fetch","webBase","then","res","json","myBookShelf","books","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","tmp","value","push","book_id","err","return","bookID","user","user_id","headers","Content-Type","method","body","JSON","stringify","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_this4","background","padding","minHeight","list","itemLayout","size","footer","renderItem","actions","Page3_IconText","author","es_button","extra","cover_image_url","Meta","description","withRouter","connect","ownProps","session","dispatch","BookGallery","allbooks","book","index","BookIndex","requestBookIndex","book_gallery","values","payload","console","log","SVGLoader","manager","DefaultLoadingManager","prototype","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","parse","parseArcCommand","rx","ry","x_axis_rotation","large_arc_flag","sweep_flag","start","end","Math","PI","abs","dx2","dy2","x1p","cos","sin","y1p","rxs","rys","x1ps","y1ps","cr","s","sqrt","dq","pq","q","max","cxp","cyp","cx","cy","theta","svgAngle","delta","currentPath","absellipse","ux","uy","vx","vy","dot","len","ang","acos","min","parseStyle","node","hasAttribute","fill","getAttribute","isVisible","getReflection","parseFloats","string","array","split","length","number","lastIndexOf","splice","parseFloat","getTransformScaleX","m","te","elements","getTransformScaleY","paths","transformStack","tempTransform0","Matrix3","tempTransform1","tempTransform2","tempTransform3","currentTransform","parseNode","nodeType","transform","transformsTexts","tIndex","transformText","openParPos","closeParPos","transformType","substr","identity","tx","ty","translate","angle","rotate","multiplyMatrices","scaleX","scaleY","scale","set","tan","premultiply","parseTransformNode","copy","getNodeTransform","nodeName","ShapePath","color","setStyle","point","Vector2","control","firstPoint","isFirstPoint","doSetFirstPoint","commands","l","command","charAt","trim","numbers","j","jl","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","clone","autoClose","curves","currentPoint","parsePathNode","w","h","parseRectNode","replace","parsePolygonNode","parsePolylineNode","r","subpath","Path","absarc","subPaths","parseCircleNode","parseEllipseNode","x1","y1","x2","y2","parseLineNode","transfVec2","v2","tempV3","applyMatrix3","isTransformRotated","tempV2","Vector3","n","subPath","curve","isLineCurve","v1","isCubicBezierCurve","v0","v3","isQuadraticBezierCurve","isEllipseCurve","aX","aY","xRadius","yRadius","transformPath","nodes","childNodes","pop","DOMParser","parseFromString","documentElement","Scene","_useState","useState","_useState2","slicedToArray","shapes","_useState3","_useState4","toggle","useEffect","setInterval","Promise","resolve","flatten","group","toShapes","shape","transitions","useTransition","uuid","from","position","rotation","enter","leave","order","lazy","trail","unique","reset","deg","THREE","degToRad","three","_ref$item","_ref$props","mesh","interpolate","z","meshPhongMaterial","attach","side","depthWrite","transparent","args","Animation","dist","camera","fov","near","far","intensity","BookShow","TextArea","handleChange","e","handleSubmit","submitting","params","bookshelf_item","animation_Animation","addToShelf","descriptions","bordered","label","Navigation","open","help","chapterList","handleClose","handleOpen","handleHelp","myRef","createRef","toc","epub","getToc","chapters","getChapters","bindEventForChapters","current","appendChild","collapse","ul","document","forEach","str","li","innerHTML","subitems","addEventListener","event","toLowerCase","goto","isRendered","preventDefault","_this$props","classes","fontColor","IconButton_default","Menu_default","Drawer_default","onClose","Typography_default","align","withStyles","left","top","zIndex","flex","marginTop","marginBottom","Note","bookKey","chapter","cfi","range","note","Date","getTime","EditorToolbar","createNote","closeMenu","handleHighlight","handleCopyPlainText","iframe","getElementsByTagName","iDoc","contentDocument","sel","getSelection","getRangeAt","cfiBase","renderer","currentChapter","EPUBJS","EpubCFI","generateCfiFromRange","spinePos","epubTitle","charRange","rangy","saveCharacterRanges","serial","parseInt","dataset","isNaN","setKey","pen","highlightSelection","empty","addNote","stopPropagation","execCommand","_this$props2","posX","posY","colors","root","visibility","backgroundColor","bottom","borderTopColor","data-color","ContentCut_default","display","alignItems","borderRadius","cursor","transition","&:hover","&:active","orange","borderWidth","borderStyle","borderColor","marginLeft","NoteCard","handleBlur","nextProps","updateNote","textArea","card","textarea","onChange","onBlur","placeholder","boxShadow","right","margin","fontFamily","fontSize","border","outline","resize","&::-webkit-input-placeholder","fontStyle","&::-moz-placeholder","Config","lineHeight","letterSpacing","wordSpacing","column","gutter","disablePopup","localStorage","getItem","getDefaultConfigObj","config","setItem","get","css1","css2","join","Util","element","attr","currentStyle","getComputedStyle","script","doc","arguments","scriptEl","getElementById","defer","css","textContent","head","getDefaultCss","arr","inner","outer","outerDoc","innerDoc","getUserStyle","addCss","getUserScript","resetConfig","applyCss","addDefaultCss","applyScript","AutoBookmark","obj","ViewArea","openMenu","openNoteCard","mPosX","mPosY","nPosX","nPosY","notes","prev","closeNoteCard","renderNotes","getPen","setNote","removeEventListener","copyTextHack","renderTo","bindEvent","gotoCfi","getCfi","copyText","clipboardData","setData","isFirefox","navigator","userAgent","lock","arrowKeys","keyCode","prevPage","nextPage","mouseFirefox","detail","mouseChrome","wheelDelta","which","ctrlKey","on","_this2$props","getCurrentLocationCfi","recordCfi","isCollapsed","rect","rangePosition","clientX","clientY","getStyle","noteCard","createHighlighter","ignoreWhiteSpace","elementTagName","elementProperties","onclick","_this3$props","currentTarget","getNote","onElementCreate","applier","createClassApplier","addClassApplier","getNotesByChapter","iWin","contentWindow","defaultView","serializeSelection","removeAllHighlights","temp","restoreCharacterRanges","warn","deserializeSelection","_this$props3","deleteNote","forceSingle","pageArea","NavigateBefore_default","arrow","NavigateNext_default","Control_EditorToolbar","Control_NoteCard","justifyContent","Draggable","startX","startY","sourceX","sourceY","move","_ref2","_ref3","currentY","distX","distY","maxEX","innerWidth","maxEY","innerHeight","onMouseDown","Bookmark","Toolbar","isFullScreen","handleFullScreen","handleExitFullScreen","handleScreen","handleSettings","handleNotes","handleBookmarks","handleAddBookmark","handleExit","hide","de","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","toggleSettingsDialog","toggleNotes","toggleBookmarks","findFirstVisible","bookmark","toggleMessage","history","fullScreen","exitFullScreen","showToolbar","Control_Draggable","onMouseOver","onMouseOut","DragHandle_default","Fullscreen_default","FullscreenExit_default","Settings_default","Sort_default","FormatListBulleted_default","Bookmark_default","ExitToApp_default","SettingsDialog","changeTheme","changeColors","changeColumn","changeGutter","changePadding","changeFontConfig","changeUserStyle","resetUserStyle","handleColorsChange","handleOtherChange","defineProperty","toggleTheme","colors1","setConfig","num","alert","file","files","reader","FileReader","readAsText","onerror","onload","result","resetStyle","color0","color1","color2","color3","Dialog_default","onRequestClose","Dialog","Divider_default","box","Tooltip_default","placement","Brightness5_default","Brightness4_default","colorBox","colorItem","input","controlBox","caption","Form","Checkbox_default","checked","htmlFor","Stars_default","accept","Restore_default","Button_default","minWidth","shadows","grey","flexWrap","borderBottom","&:focus","textAlign","green","BookmarkItem","editable","handleClick","handleRemove","handleEdit","handleSave","deleteBookmark","updateBookmark","noWrap","editButton","TextFields_default","saveButton","Done_default","Grid_default","container","RemoveCircleOutline_default","overflow","Bookmarks","gutterBottom","bookmarks","Control_Bookmark","listStyle","overflowX","DBUtil","dbName","storeName","version","indexedDB","error","db","request","onsuccess","errorCode","onupgradeneeded","objectStoreNames","contains","createObjectStore","keyPath","success","req","transaction","objectStore","add","delete","_this5","_this6","openCursor","continue","put","close","handleJump","handleDelete","autoFocus","noteContent","Clear_default","ArrowForward_default","flexGrow","Notes","handleExport","toggleExport","anchor","Control_Note","foot","dense","flexDirection","flexShrink","Message","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","SnackbarContentProps","aria-describedby","message","action","Transition","Slide_default","direction","ExportPanel","copyHandler","generateArticle","handleCopy","format","article","divider","fragment","headRight","Close_default","quote","annotation","borderBottomWidth","borderBottomStyle","palette","paper","primary","overflowY","fontWeight","paddingBottom","borderLeft","paddingLeft","ePub","Viewer","openSettings","openBookmarks","openNotes","openMessage","openExport","addBookmark","dbAccess","getAll","bookmarksArr","filter","noteDBAccess","noteArr","init","remove","update","_this7","_this8","readingBook","Reader_Control_Navigation","Control_ViewArea","Reader_Control_Toolbar","handleReading","Control_Bookmarks","getBookmark","Control_Notes","Control_SettingsDialog","Control_Message","Control_ExportPanel","App","isReading","handleReadingBook","bgColor","themeType","createMuiTheme","Control_Viewer","material_ui_styles","Search","es_input","SessionForm","username","password","username2","password2","guestSubmit","handleRegister","toAdmin","clearErrors","processForm","processRegister","field","loggedIn","es_alert","getFieldDecorator","form","es_form","onSubmit","rules","required","prefix","htmlType","guestlogin","handleAlert","logout","displayLogin","enterButton","onSearch","WrappedNormalLoginForm","create","Boolean","login","register","Session","session_form_container","cover_img_url","authorization","info","status","fileList","upload","Page4_Search","WrappedForm","pathname","Nav0","Footer0","controlHeader","react_router","exact","Book","Admin","Page3","SReader","controlFooter","Root","store","react_redux_es","integration_react","persistor","persistStore","components_App","hostname","nullUser","freeze","SessionReducer","merge","BooksReducer","ErrorsReducer","rootReducer","combineReducers","ErrorReducer","middleware","thunk","storage","reducer","persistReducer","reduxStore","createStore","composeWithDevTools","applyMiddleware","apply","ReactDOM","render","components_root","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8195d203.chunk.js","sourcesContent":["/* eslint no-undef: 0 */\n/* eslint arrow-parens: 0 */\nimport React from 'react';\nimport { enquireScreen } from 'enquire-js';\n\n\nimport Banner0 from './Banner0';\nimport Content0 from './Content0';\nimport Content7 from './Content7';\nimport Content13 from './Content13';\nimport Content12 from './Content12';\n\nimport {\n  Banner00DataSource,\n  Content00DataSource,\n  Content70DataSource,\n  Content130DataSource,\n  Content120DataSource,\n} from './data.source.js';\n\nimport './less/antMotionStyle.less';\n\nlet isMobile;\nenquireScreen((b) => {\n  isMobile = b;\n});\n\nconst location = window.location;\n\nexport default class Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMobile,\n      show: !location.port, // 如果不是 dva 2.0 请删除\n    };\n  }\n\n  componentDidMount() {\n    // 适配手机屏幕;\n    enquireScreen((b) => {\n      this.setState({ isMobile: !!b });\n    });\n    // dva 2.0 样式在组件渲染之后动态加载，导致滚动组件不生效；线上不影响；\n    /* 如果不是 dva 2.0 请删除 start */\n    if (location.port) {\n      // 样式 build 时间在 200-300ms 之间;\n      setTimeout(() => {\n        this.setState({\n          show: true,\n        });\n      }, 500);\n    }\n    /* 如果不是 dva 2.0 请删除 end */\n  }\n\n  render() {\n    const children = [\n      <Banner0\n        id=\"Banner0_0\"\n        key=\"Banner0_0\"\n        dataSource={Banner00DataSource}\n        isMobile={this.state.isMobile}\n      />,\n      <Content0\n        id=\"Content0_0\"\n        key=\"Content0_0\"\n        dataSource={Content00DataSource}\n        isMobile={this.state.isMobile}\n      />,\n      <Content13\n        id=\"Content13_0\"\n        key=\"Content13_0\"\n        dataSource={Content130DataSource}\n        isMobile={this.state.isMobile}\n      />,\n    ];\n    return (\n      <div\n        className=\"templates-wrapper\"\n        ref={(d) => {\n          this.dom = d;\n        }}\n      >\n        {/* 如果不是 dva 2.0 替换成 {children} start */}\n        {this.state.show && children}\n        {/* 如果不是 dva 2.0 替换成 {children} end */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport TweenOne from 'rc-tween-one';\nimport { Menu } from 'antd';\nimport { Link } from \"react-router-dom\";\n\nconst Item = Menu.Item;\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phoneOpen: false,\n      menuHeight: 0,\n    };\n  }\n\n  phoneClick = () => {\n    const menu = findDOMNode(this.menu);\n    const phoneOpen = !this.state.phoneOpen;\n    this.setState({\n      phoneOpen,\n      menuHeight: phoneOpen ? menu.scrollHeight : 0,\n    });\n  };\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource, isMobile } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const { menuHeight, phoneOpen } = this.state;\n    const navData = dataSource.Menu.children;\n    const navChildren = Object.keys(navData).map((key, i) => (\n      <Item key={i.toString()} {...navData[key]}>\n        <Link\n          {...navData[key].a}\n          to={navData[key].a.href}\n          target={navData[key].a.target}\n        >\n          {navData[key].a.children}\n        </Link>\n      </Item>\n    ));\n    return (\n      <TweenOne\n        component=\"header\"\n        animation={{ opacity: 0, type: 'from' }}\n        {...dataSource.wrapper}\n        {...props}\n      >\n        <div\n          {...dataSource.page}\n          className={`${dataSource.page.className}${phoneOpen ? ' open' : ''}`}\n        >\n          <TweenOne\n            animation={{ x: -30, type: 'from', ease: 'easeOutQuad' }}\n            {...dataSource.logo}\n          >\n\n          </TweenOne>\n          {isMobile && (\n            <div\n              {...dataSource.mobileMenu}\n              onClick={() => {\n                this.phoneClick();\n              }}\n            >\n              <em />\n              <em />\n              <em />\n            </div>\n          )}\n          <TweenOne\n            {...dataSource.Menu}\n            animation={{ x: 30, type: 'from', ease: 'easeOutQuad' }}\n            ref={(c) => {\n              this.menu = c;\n            }}\n            style={isMobile ? { height: menuHeight } : null}\n          >\n            <Menu\n              mode={isMobile ? 'inline' : 'horizontal'}\n              defaultSelectedKeys={['0']}\n              theme={isMobile ? 'dark' : 'default'}\n            >\n              {navChildren}\n            </Menu>\n          </TweenOne>\n        </div>\n      </TweenOne>\n    );\n  }\n}\n\nexport default Header;\n","import React from 'react';\nimport TweenOne from 'rc-tween-one';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\n\nclass Footer extends React.PureComponent {\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <OverPack {...dataSource.OverPack}>\n          <TweenOne\n            animation={{ y: '+=30', opacity: 0, type: 'from' }}\n            key=\"footer\"\n            {...dataSource.copyright}\n          >\n            {dataSource.copyright.children}\n          </TweenOne>\n        </OverPack>\n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","import React from 'react';\nimport { Button, Icon } from 'antd';\nimport QueueAnim from 'rc-queue-anim';\nimport TweenOne from 'rc-tween-one';\n\nclass Banner extends React.PureComponent {\n  render() {\n    const {...currentProps}  = this.props;\n\n    const  {dataSource} = currentProps;\n\n    delete currentProps.dataSource;\n    delete currentProps.isMobile;\n    return (\n      <div {...currentProps} {...dataSource.wrapper}>\n        <QueueAnim\n          key=\"QueueAnim\"\n          type={['bottom', 'top']}\n          delay={200}\n          {...dataSource.textWrapper}\n        >\n          <div key=\"title\" {...dataSource.title}>\n            {dataSource.title.children.match(\n              /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n            ) ? (\n              <img src={dataSource.title.children} width=\"100%\" alt=\"img\" />\n              ) : (\n                dataSource.title.children\n              )}\n          </div>\n          <div key=\"content\" {...dataSource.content}>\n            {dataSource.content.children}\n          </div>\n\n        </QueueAnim>\n        <TweenOne\n          animation={{\n            y: '-=20',\n            yoyo: true,\n            repeat: -1,\n            duration: 1000,\n          }}\n          className=\"banner0-icon\"\n          key=\"icon\"\n        >\n          <Icon type=\"down\" />\n        </TweenOne>\n      </div>\n    );\n  }\n}\nexport default Banner;\n","import React from 'react';\nimport QueueAnim from 'rc-queue-anim';\nimport { Row, Col } from 'antd';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\n\nclass Content extends React.PureComponent {\n  getBlockChildren = data => data.map((item, i) => {\n    const children = item.children;\n    return (\n      <Col key={i.toString()} {...item}>\n        <div {...children.icon}>\n          <img src={children.icon.children} width=\"100%\" alt=\"img\" />\n        </div>\n        <h3 {...children.title}>{children.title.children}</h3>\n        <p {...children.content}>{children.content.children}</p>\n      </Col>\n    );\n  });\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const listChildren = this.getBlockChildren(dataSource.block.children);\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <div {...dataSource.page}>\n          <div {...dataSource.titleWrapper}>\n            {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n              item.name.indexOf('title') === 0 ? 'h1' : 'div',\n              { key: i.toString(), ...item },\n              item.children.match(\n                /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n              )\n                ? React.createElement('img', {\n                  src: item.children,\n                  height: '100%',\n                  alt: 'img',\n                })\n                : item.children\n            )\n            )}\n          </div>\n          <OverPack {...dataSource.OverPack}>\n            <QueueAnim\n              type=\"bottom\"\n              key=\"block\"\n              leaveReverse\n              {...dataSource.block}\n              component={Row}\n            >\n              {listChildren}\n            </QueueAnim>\n          </OverPack>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Content;\n","import React from 'react';\nimport TweenOne from 'rc-tween-one';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\nimport { Tabs, Icon, Row, Col } from 'antd';\n\nconst TabPane = Tabs.TabPane;\n\nclass Content7 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 1,\n    };\n  }\n\n  onChange = (key) => {\n    this.setState({ current: parseFloat(key) });\n  };\n\n  getBlockChildren = (item, i) => {\n    const { tag, content } = item;\n    const { text, img } = content;\n    const textChildren = text.children;\n    const { icon } = tag;\n    const iconChildren = icon.children;\n    const tagText = tag.text;\n    return (\n      <TabPane\n        key={i + 1}\n        tab={(\n          <div className={tag.className}>\n            <Icon type={iconChildren} className={icon.className} />\n            <div {...tagText}>{tagText.children}</div>\n          </div>\n        )}\n        className={item.className}\n      >\n        <TweenOne.TweenOneGroup\n          enter={{\n            y: 30,\n            delay: 300,\n            opacity: 0,\n            type: 'from',\n            ease: 'easeOutQuad',\n          }}\n          leave={null}\n          component=\"\"\n        >\n          {this.state.current === i + 1 && (\n            <Row\n              key=\"content\"\n              className={content.className}\n              gutter={content.gutter}\n            >\n              <Col className={text.className} xs={text.xs} md={text.md}>\n                {textChildren}\n              </Col>\n              <Col className={img.className} xs={img.xs} md={img.md}>\n                <img src={img.children} width=\"100%\" alt=\"img\" />\n              </Col>\n            </Row>\n          )}\n        </TweenOne.TweenOneGroup>\n      </TabPane>\n    );\n  };\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const tabsChildren = dataSource.block.children.map(this.getBlockChildren);\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <div {...dataSource.page}>\n          <div {...dataSource.titleWrapper}>\n            {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n              item.name.indexOf('title') === 0 ? 'h1' : 'div',\n              { key: i.toString(), ...item },\n              item.children.match(\n                /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n              )\n                ? React.createElement('img', {\n                  src: item.children,\n                  alt: 'img',\n                })\n                : item.children\n            )\n            )}\n          </div>\n\n          <OverPack {...dataSource.OverPack}>\n            <TweenOne.TweenOneGroup\n              key=\"tabs\"\n              enter={{\n                y: 30,\n                opacity: 0,\n                delay: 200,\n                type: 'from',\n              }}\n              leave={{ y: 30, opacity: 0 }}\n              {...dataSource.tabsWrapper}\n            >\n              <Tabs\n                key=\"tabs\"\n                onChange={this.onChange}\n                activeKey={`${this.state.current}`}\n                {...dataSource.block}\n              >\n                {tabsChildren}\n              </Tabs>\n            </TweenOne.TweenOneGroup>\n          </OverPack>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Content7;\n","import React from 'react';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\nimport QueueAnim from 'rc-queue-anim';\n\nclass Content13 extends React.PureComponent {\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    return (\n      <OverPack {...props} {...dataSource.OverPack}>\n        <QueueAnim\n          type=\"bottom\"\n          leaveReverse\n          key=\"page\"\n          delay={[0, 100]}\n          {...dataSource.titleWrapper}\n        >\n          {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n            item.name.indexOf('title') === 0 ? 'h1' : 'div',\n            { key: i.toString(), ...item },\n            item.children.match(/\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/)\n              ? React.createElement('img', { src: item.children, alt: 'img' })\n              : item.children\n          )\n          )}\n        </QueueAnim>\n      </OverPack>\n    );\n  }\n}\n\nexport default Content13;\n","import React from 'react';\n\nexport const Nav00DataSource = {\n  wrapper: { className: 'header0 home-page-wrapper' },\n  page: { className: 'home-page' },\n  logo: {\n    className: 'header0-logo',\n    //children: 'https://os.alipayobjects.com/rmsportal/mlcYmsRilwraoAe.svg',\n    children: '玖读平台',\n  },\n  Menu: {\n    className: 'header0-menu',\n    children: [\n      { name: 'item0', a: { children: '首页', href: '/' } },\n      { name: 'item1', a: { children: '书城', href: '/page2' } },\n      { name: 'item2', a: { children: '书架', href: '/page3' } },\n      { name: 'item3', a: { children: '登录', href: '/session' } },\n    ],\n  },\n  mobileMenu: { className: 'header0-mobile-menu' },\n};\nexport const Banner00DataSource = {\n  wrapper: { className: 'banner0' },\n  textWrapper: { className: 'banner0-text-wrapper' },\n  title: {\n    className: 'banner0-title',\n    children: 'logo.svg',\n  },\n  content: {\n    className: 'banner0-content',\n    children: (\n      <span>\n        <p>玖读</p>\n        <p>epub电子书阅读平台</p>\n      </span>\n    ),\n  },\n  button: { className: 'banner0-button', children: 'Learn More' },\n};\nexport const Content00DataSource = {\n  wrapper: { className: 'home-page-wrapper content0-wrapper' },\n  page: { className: 'home-page content0' },\n  OverPack: { playScale: 0.3, className: '' },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [{ name: 'title', children: '综合阅读体验' }],\n  },\n  block: {\n    className: 'block-wrapper',\n    children: [\n      {\n        name: 'block0',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/WBnVOjtIlGWbzyQivuyq.png',\n          },\n          title: { children: '书城浏览' },\n          content: { children: '每本书都有动画场景' },\n        },\n      },\n      {\n        name: 'block1',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/YPMsLQuCEXtuEkmXTTdk.png',\n          },\n          title: { children: '加入书架' },\n          content: { children: '用户看到感兴趣的书在登录后可以加入书架' },\n        },\n      },\n      {\n        name: 'block2',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          icon: {\n            className: 'icon',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/EkXWVvAaFJKCzhMmQYiX.png',\n          },\n          title: { children: '支持epub' },\n          content: { children: '在每日的阅读中积累知识' },\n        },\n      },\n    ],\n  },\n};\nexport const Content70DataSource = {\n  wrapper: { className: 'home-page-wrapper content7-wrapper' },\n  page: { className: 'home-page content7' },\n  OverPack: {},\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [\n      {\n        name: 'title',\n        children: '蚂蚁金融云提供专业的服务',\n        className: 'title-h1',\n      },\n      { name: 'content', children: '基于阿里云计算强大的基础资源' },\n    ],\n  },\n  tabsWrapper: { className: 'content7-tabs-wrapper' },\n  block: {\n    children: [\n      {\n        name: 'block0',\n        tag: {\n          className: 'content7-tag',\n          text: { children: 'PHONE', className: 'content7-tag-name' },\n          icon: { children: 'mobile' },\n        },\n        content: {\n          className: 'content7-content',\n          text: {\n            className: 'content7-text',\n            md: 14,\n            xs: 24,\n            children: (\n              <span>\n                <h3>技术</h3>\n                <p>\n                  丰富的技术组件，简单组装即可快速搭建金融级应用，丰富的技术组件，简单组装即可快速搭建金融级应用。\n                </p>\n                <br />\n                <h3>融合</h3>\n                <p>\n                  解放业务及技术生产力，推动金融服务底层创新，推动金融服务底层创新。解放业务及技术生产力，推动金融服务底层创新。\n                </p>\n                <br />\n                <h3>\n                  开放\n                </h3>\n                符合金融及要求的安全可靠、高可用、高性能的服务能力，符合金融及要求的安全可靠、高可用、高性能的服务能力。\n              </span>\n            ),\n          },\n          img: {\n            className: 'content7-img',\n            children:\n              'https://zos.alipayobjects.com/rmsportal/xBrUaDROgtFBRRL.png',\n            md: 10,\n            xs: 24,\n          },\n        },\n      },\n      {\n        name: 'block1',\n        tag: {\n          className: 'content7-tag',\n          icon: { children: 'tablet' },\n          text: { className: 'content7-tag-name', children: 'TABLET' },\n        },\n        content: {\n          className: 'content7-content',\n          text: {\n            className: 'content7-text',\n            md: 14,\n            xs: 24,\n            children: (\n              <span>\n                <h3>技术</h3>\n                <p>\n                  丰富的技术组件，简单组装即可快速搭建金融级应用，丰富的技术组件，简单组装即可快速搭建金融级应用。\n                </p>\n                <br />\n                <h3>融合</h3>\n                <p>\n                  解放业务及技术生产力，推动金融服务底层创新，推动金融服务底层创新。解放业务及技术生产力，推动金融服务底层创新。\n                </p>\n                <br />\n                <h3>\n                  开放\n                </h3>\n                符合金融及要求的安全可靠、高可用、高性能的服务能力，符合金融及要求的安全可靠、高可用、高性能的服务能力。\n              </span>\n            ),\n          },\n          img: {\n            className: 'content7-img',\n            md: 10,\n            xs: 24,\n            children:\n              'https://zos.alipayobjects.com/rmsportal/xBrUaDROgtFBRRL.png',\n          },\n        },\n      },\n      {\n        name: 'block2',\n        tag: {\n          className: 'content7-tag',\n          text: { children: 'DESKTOP', className: 'content7-tag-name' },\n          icon: { children: 'laptop' },\n        },\n        content: {\n          className: 'content7-content',\n          text: {\n            className: 'content7-text',\n            md: 14,\n            xs: 24,\n            children: (\n              <span>\n                <h3>技术</h3>\n                <p>\n                  丰富的技术组件，简单组装即可快速搭建金融级应用，丰富的技术组件，简单组装即可快速搭建金融级应用。\n                </p>\n                <br />\n                <h3>融合</h3>\n                <p>\n                  解放业务及技术生产力，推动金融服务底层创新，推动金融服务底层创新。解放业务及技术生产力，推动金融服务底层创新。\n                </p>\n                <br />\n                <h3>\n                  开放\n                </h3>\n                符合金融及要求的安全可靠、高可用、高性能的服务能力，符合金融及要求的安全可靠、高可用、高性能的服务能力。\n              </span>\n            ),\n          },\n          img: {\n            className: 'content7-img',\n            md: 10,\n            xs: 24,\n            children:\n              'https://zos.alipayobjects.com/rmsportal/xBrUaDROgtFBRRL.png',\n          },\n        },\n      },\n    ],\n  },\n};\nexport const Content130DataSource = {\n  OverPack: {\n    className:\n      'home-page-wrapper content13-wrapper home-page-wrapper content13-wrapper jnwq7vhwgqg-editor_css',\n    playScale: 0.3,\n  },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [\n      { name: 'title', children: '开始你的阅读之旅吧', className: 'title-h1' },\n      {\n        name: 'content',\n        children:\n          '在书城查找你感兴趣的书，感受svg动画体验',\n        className: 'title-content',\n      },\n      {\n        name: 'content2',\n        children: '登录后即可加入书架开始阅读',\n        className: 'title-content',\n      },\n    ],\n  },\n};\nexport const Content120DataSource = {\n  wrapper: { className: 'home-page-wrapper content12-wrapper' },\n  page: { className: 'home-page content12' },\n  OverPack: { playScale: 0.3, className: '' },\n  titleWrapper: {\n    className: 'title-wrapper',\n    children: [{ name: 'title', children: '特别鸣谢', className: 'title-h1' }],\n  },\n  block: {\n    className: 'img-wrapper',\n    children: [\n      {\n        name: 'block0',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/TFicUVisNHTOEeMYXuQF.svg',\n          },\n        },\n      },\n      {\n        name: 'block1',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/hkLGkrlCEkGZeMQlnEkD.svg',\n          },\n        },\n      },\n      {\n        name: 'block2',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/bqyPRSZmhvrsfJrBvASi.svg',\n          },\n        },\n      },\n      {\n        name: 'block3',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/UcsyszzOabdCYDkoPPnM.svg',\n          },\n        },\n      },\n      {\n        name: 'block4',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/kRBeaICGexAmVjqBEqgw.svg',\n          },\n        },\n      },\n      {\n        name: 'block5',\n        className: 'block',\n        md: 8,\n        xs: 24,\n        children: {\n          wrapper: { className: 'block-content' },\n          img: {\n            children:\n              'https://gw.alipayobjects.com/zos/rmsportal/ftBIiyJcCHpHEioRvPsV.svg',\n          },\n        },\n      },\n    ],\n  },\n};\nexport const Footer00DataSource = {\n  wrapper: { className: 'home-page-wrapper footer0-wrapper' },\n  OverPack: { className: 'home-page footer0', playScale: 0.05 },\n  copyright: {\n    className: 'copyright',\n    children: (\n      <span>\n        ©2019 同济大学软件学院web课程项目 made by 白皓月\n      </span>\n    ),\n  },\n};\n","import React from 'react';\nimport { Row, Col } from 'antd';\nimport { TweenOneGroup } from 'rc-tween-one';\nimport OverPack from 'rc-scroll-anim/lib/ScrollOverPack';\n\nclass Content12 extends React.PureComponent {\n  getChildrenToRender = data => data.map((item) => {\n    return (\n      <Col key={item.name} {...item}>\n        <div {...item.children.wrapper}>\n          <span {...item.children.img}>\n            <img src={item.children.img.children} alt=\"img\" />\n          </span>\n        </div>\n      </Col>\n    );\n  });\n\n  render() {\n    const { ...props } = this.props;\n    const { dataSource } = props;\n    delete props.dataSource;\n    delete props.isMobile;\n    const childrenToRender = this.getChildrenToRender(\n      dataSource.block.children\n    );\n    return (\n      <div {...props} {...dataSource.wrapper}>\n        <div {...dataSource.page}>\n          <div key=\"title\" {...dataSource.titleWrapper}>\n            {dataSource.titleWrapper.children.map((item, i) => React.createElement(\n              item.name.indexOf('title') === 0 ? 'h1' : 'div',\n              { key: i.toString(), ...item },\n              item.children.match(\n                /\\.(svg|gif|jpg|jpeg|png|JPG|PNG|GIF|JPEG)$/\n              )\n                ? React.createElement('img', {\n                  src: item.children,\n                  alt: 'img',\n                })\n                : item.children\n            )\n            )}\n          </div>\n          <OverPack\n            className={`content-template ${props.className}`}\n            {...dataSource.OverPack}\n          >\n            <TweenOneGroup\n              component={Row}\n              key=\"ul\"\n              enter={{\n                y: '+=30',\n                opacity: 0,\n                type: 'from',\n                ease: 'easeOutQuad',\n              }}\n              leave={{ y: '+=30', opacity: 0, ease: 'easeOutQuad' }}\n              {...dataSource.block}\n            >\n              {childrenToRender}\n            </TweenOneGroup>\n          </OverPack>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Content12;\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {withRouter} from 'react-router';\r\nimport { enquireScreen } from 'enquire-js';\r\n\r\n\r\nlet isMobile;\r\nenquireScreen((b) => {\r\n    isMobile = b;\r\n});\r\nclass BookGallery extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            isMobile,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        // 适配手机屏幕;\r\n        enquireScreen((b) => {\r\n            this.setState({ isMobile: !!b });\r\n        });\r\n    }\r\n    render(){\r\n        if (this.props.books) {\r\n            let allbooks = this.props.books.map( (book, index) =>  {\r\n                var id = book.book_id || book.id;\r\n                return (\r\n\r\n                    <div className='div-book' key= {(index)}>\r\n                        <Link to={`/page2/${id}`}>\r\n                            <img className='front-image' src={book.cover_image_url} alt={book.title} />\r\n                        </Link>\r\n                    </div>\r\n\r\n                );\r\n            });\r\n            if(this.state.isMobile)\r\n            return (\r\n                <div className='index-main'>\r\n                <div className='book-index-div'>\r\n                    <div className='book-index-lower-div1'>\r\n\r\n                        { allbooks }\r\n                    </div>\r\n\r\n                </div>\r\n                </div>\r\n            );\r\n            //如果是PC端\r\n            else\r\n                return(\r\n                    <div className='index-main'>\r\n                        <div className='book-index-div'>\r\n                            <div className='book-index-lower-div'>\r\n\r\n                                { allbooks }\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                )\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(BookGallery);\r\n","export const RECEIVE_ERRORS = \"RECEIVE_ERRORS\";\r\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\r\n\r\nexport const receiveErrors = errors => {\r\n    return {\r\n        type: RECEIVE_ERRORS,\r\n        errors\r\n    };\r\n};\r\n\r\nexport const clearErrors = (errors) => {\r\n    return {\r\n        type: CLEAR_ERRORS,\r\n        errors\r\n    };\r\n};\r\n","\r\nimport { receiveErrors } from './error_actions';\r\nexport const RECEIVE_CURRENT_USER = 'RECEIVE_CURRENT_USER';\r\n\r\nexport const receiveCurrentUser = currentUser => ({\r\n    type: RECEIVE_CURRENT_USER,\r\n    currentUser\r\n});\r\n\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\nexport const logout = () => ({\r\n    type:'LOGOUT'\r\n})\r\n\r\nexport const login = user => dispatch => (\r\n    fetch( window.webBase+\"api/session\", {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        method: 'POST',\r\n        body: JSON.stringify(user)\r\n    }).then(res=>res.json()).then(json => (\r\n        dispatch(receiveCurrentUser(json))\r\n    ), err => (\r\n        dispatch(receiveErrors(err))\r\n\r\n    ))\r\n);\r\n\r\nexport const register = user => dispatch => (\r\n    fetch( window.webBase+\"/api/user\", {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        method: 'POST',\r\n        body: JSON.stringify(user)\r\n    }).then(res=>res.json()).then(json => (\r\n        dispatch(receiveCurrentUser(json))\r\n    ), err => (\r\n        dispatch(receiveErrors(err))\r\n    ))\r\n);\r\n\r\n\r\n\r\n","/* eslint no-undef: 0 */\r\n/* eslint arrow-parens: 0 */\r\nimport React from 'react';\r\nimport {withRouter} from \"react-router\";\r\nimport {connect} from \"react-redux\";\r\nimport {List, Rate, Icon, Button} from 'antd';\r\nimport \"./index.css\"\r\nimport { Link } from 'react-router-dom';\r\nimport {receiveErrors} from \"../../actions/error_actions\";\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\nconst IconText = ({ type, text }) => (\r\n    <span>\r\n    <Icon type={type} style={{ marginRight: 8 }} />\r\n        {text}\r\n  </span>\r\n);\r\nclass Index extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n        };\r\n        this.delete_bookshelf =this.delete_bookshelf.bind(this);\r\n        this.fetchBookshelf = this.fetchBookshelf(this);\r\n    }\r\n    //只在本组件用不再使用redux\r\n\r\n\r\n    componentWillMount() {\r\n        if(this.props.currentUser != null) {\r\n            fetch(window.webBase+\"api/bookshelf/\" + this.props.currentUser.id).then(res=>res.json()).then(\r\n                json=>{\r\n                    let myBookShelf=[];\r\n                    if(this.props.books!=null)\r\n                        for(let tmp of json) {\r\n                            myBookShelf.push(this.props.books[tmp.book_id]);\r\n                        }\r\n                    this.setState({\r\n                        data: myBookShelf,\r\n                    });\r\n                }\r\n            )\r\n        }\r\n    }\r\n    fetchBookshelf() {\r\n\r\n    }\r\n    delete_bookshelf(bookID) {\r\n        let user = {\r\n            user_id:this.props.currentUser.id,\r\n            book_id:bookID\r\n        };\r\n        fetch( window.webBase+\"api/delete_bookshelf\", {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify(user)\r\n        }).then(res=>{\r\n            fetch(window.webBase+\"api/bookshelf/\" + this.props.currentUser.id).then(res=>res.json()).then(\r\n                json=>{\r\n                    let myBookShelf=[];\r\n                    if(this.props.books!=null)\r\n                        for(let tmp of json) {\r\n                            myBookShelf.push(this.props.books[tmp.book_id]);\r\n                        }\r\n                    this.setState({\r\n                        data: myBookShelf,\r\n                    });\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div\r\n                className=\"templates-wrapper\"\r\n                ref={(d) => {\r\n                    this.dom = d;\r\n                }}\r\n            >\r\n\r\n                <div style={{ background: '#fff', padding: 24, minHeight: 280 }}>\r\n                    <h1>我的书架</h1>\r\n\r\n                    <List\r\n                        className=\"list\"\r\n                        itemLayout=\"vertical\"\r\n                        size=\"large\"\r\n                        dataSource={this.state.data}\r\n                        footer={< div > <b>我的</b> 书架</div >}\r\n                        renderItem={\r\n                            item => (\r\n\r\n                                <List.Item\r\n                                    key={item.title}\r\n                                    actions={[\r\n                                        <IconText type=\"user\" text={item.author}/>,\r\n                                        <Link to={`/page2/reader/`+item.title}><Button>开始阅读</Button></Link>,\r\n                                        <Button onClick={this.delete_bookshelf.bind(this,item.id)}>移出书架</Button>\r\n                                    ]\r\n                                    }\r\n                                    extra={<img width={100} alt=\"logo\" src= {item.cover_image_url} />}\r\n                                >\r\n\r\n                                    <List.Item.Meta\r\n                                        //avatar={<Avatar shape = \"square\" size = {150} src={item.poster} width = {100} alt=\"logo\"/>}\r\n                                        title={  item.title}\r\n                                        description={item.description}\r\n                                    />\r\n                                </List.Item>)}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        books:state.books,\r\n        currentUser: state.session.currentUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Index));","import React from 'react';\r\nimport {withRouter} from 'react-router';\r\n\r\nimport BookGallery from './book_gallery';\r\nimport \"./index.scss\"\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { requestBookIndex } from '../../actions/book_actions';\r\nimport { selectAllBooks } from '../../reducers/selectors';\r\n\r\nclass BookIndex extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.requestBookIndex();\r\n    }\r\n\r\n\r\n    render() {\r\n        return <BookGallery books={this.props.books}/>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        //将对象转化为数组，方便后续使用map\r\n        books: selectAllBooks(state.books),\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    requestBookIndex: () => dispatch(requestBookIndex()),\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(BookIndex));","import { values } from 'lodash';\r\n\r\nexport const selectAllBooks = (books) => {\r\n    return values(books);\r\n};","\r\nexport const RECEIVE_BOOKS = 'RECEIVE_BOOKS';\r\nexport const RECEIVE_ONE_BOOK = 'RECEIVE_ONE_BOOK';\r\nexport const RECEIVE_COMMENT= 'RECEIVE_COMMENT';\r\nexport const receiveBooks = book => ({\r\n    type: RECEIVE_BOOKS,\r\n    book\r\n});\r\nexport const receiveOneBook = book => {\r\n    return (\r\n        {\r\n            type: RECEIVE_ONE_BOOK,\r\n            book\r\n        }\r\n    );\r\n};\r\nexport const receiveComment = comment => ({\r\n    type: RECEIVE_COMMENT,\r\n    comment\r\n});\r\n\r\nexport const requestBookIndex = () => dispatch => (\r\n    fetch(window.webBase+\"api/books\").then(payload => (\r\n            payload.json())\r\n    .then(json=>{\r\n        //console.log(json);\r\n        dispatch(receiveBooks(json));\r\n    }),json=>{\r\n        console.log(\"error\")\r\n    })\r\n);\r\n\r\n","import { DefaultLoadingManager, FileLoader, Matrix3, Path, ShapePath, Vector2, Vector3 } from 'three'\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author zz85 / http://joshuakoo.com/\r\n * @author yomboprime / https://yombo.org\r\n */\r\n\r\nvar SVGLoader = function(manager) {\r\n    this.manager = manager !== undefined ? manager : DefaultLoadingManager\r\n}\r\n\r\nSVGLoader.prototype = {\r\n    constructor: SVGLoader,\r\n\r\n    load: function(url, onLoad, onProgress, onError) {\r\n        var scope = this\r\n\r\n        var loader = new FileLoader(scope.manager)\r\n        loader.setPath(scope.path)\r\n        loader.load(\r\n            url,\r\n            function(text) {\r\n                onLoad(scope.parse(text))\r\n            },\r\n            onProgress,\r\n            onError,\r\n        )\r\n    },\r\n\r\n    setPath: function(value) {\r\n        this.path = value\r\n        return this\r\n    },\r\n\r\n    parse: function(text) {\r\n        function parseNode(node, style) {\r\n            if (node.nodeType !== 1) return\r\n\r\n            var transform = getNodeTransform(node)\r\n\r\n            var path = null\r\n\r\n            switch (node.nodeName) {\r\n                case 'svg':\r\n                    break\r\n\r\n                case 'g':\r\n                    style = parseStyle(node, style)\r\n                    break\r\n\r\n                case 'path':\r\n                    style = parseStyle(node, style)\r\n                    if (node.hasAttribute('d') && isVisible(style)) path = parsePathNode(node, style)\r\n                    break\r\n\r\n                case 'rect':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseRectNode(node, style)\r\n                    break\r\n\r\n                case 'polygon':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parsePolygonNode(node, style)\r\n                    break\r\n\r\n                case 'polyline':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parsePolylineNode(node, style)\r\n                    break\r\n\r\n                case 'circle':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseCircleNode(node, style)\r\n                    break\r\n\r\n                case 'ellipse':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseEllipseNode(node, style)\r\n                    break\r\n\r\n                case 'line':\r\n                    style = parseStyle(node, style)\r\n                    if (isVisible(style)) path = parseLineNode(node, style)\r\n                    break\r\n            }\r\n\r\n            if (path) {\r\n                transformPath(path, currentTransform)\r\n\r\n                paths.push(path)\r\n            }\r\n\r\n            var nodes = node.childNodes\r\n\r\n            for (var i = 0; i < nodes.length; i++) {\r\n                parseNode(nodes[i], style)\r\n            }\r\n\r\n            if (transform) {\r\n                currentTransform.copy(transformStack.pop())\r\n            }\r\n        }\r\n\r\n        function parsePathNode(node, style) {\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var point = new Vector2()\r\n            var control = new Vector2()\r\n\r\n            var firstPoint = new Vector2()\r\n            var isFirstPoint = true\r\n            var doSetFirstPoint = false\r\n\r\n            var d = node.getAttribute('d')\r\n\r\n            // console.log( d );\r\n\r\n            var commands = d.match(/[a-df-z][^a-df-z]*/gi)\r\n\r\n            for (var i = 0, l = commands.length; i < l; i++) {\r\n                var command = commands[i]\r\n\r\n                var type = command.charAt(0)\r\n                var data = command.substr(1).trim()\r\n\r\n                if (isFirstPoint === true) {\r\n                    doSetFirstPoint = true\r\n                    isFirstPoint = false\r\n                }\r\n\r\n                switch (type) {\r\n                    case 'M':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            if (j === 0) {\r\n                                path.moveTo(point.x, point.y)\r\n                            } else {\r\n                                path.lineTo(point.x, point.y)\r\n                            }\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'H':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.x = numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'V':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.y = numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'L':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'C':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\r\n                            path.bezierCurveTo(\r\n                                numbers[j + 0],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                numbers[j + 5],\r\n                            )\r\n                            control.x = numbers[j + 2]\r\n                            control.y = numbers[j + 3]\r\n                            point.x = numbers[j + 4]\r\n                            point.y = numbers[j + 5]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'S':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.bezierCurveTo(\r\n                                getReflection(point.x, control.x),\r\n                                getReflection(point.y, control.y),\r\n                                numbers[j + 0],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                            )\r\n                            control.x = numbers[j + 0]\r\n                            control.y = numbers[j + 1]\r\n                            point.x = numbers[j + 2]\r\n                            point.y = numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'Q':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.quadraticCurveTo(numbers[j + 0], numbers[j + 1], numbers[j + 2], numbers[j + 3])\r\n                            control.x = numbers[j + 0]\r\n                            control.y = numbers[j + 1]\r\n                            point.x = numbers[j + 2]\r\n                            point.y = numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'T':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            var rx = getReflection(point.x, control.x)\r\n                            var ry = getReflection(point.y, control.y)\r\n                            path.quadraticCurveTo(rx, ry, numbers[j + 0], numbers[j + 1])\r\n                            control.x = rx\r\n                            control.y = ry\r\n                            point.x = numbers[j + 0]\r\n                            point.y = numbers[j + 1]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'A':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\r\n                            var start = point.clone()\r\n                            point.x = numbers[j + 5]\r\n                            point.y = numbers[j + 6]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            parseArcCommand(\r\n                                path,\r\n                                numbers[j],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                start,\r\n                                point,\r\n                            )\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    //\r\n\r\n                    case 'm':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x += numbers[j + 0]\r\n                            point.y += numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            if (j === 0) {\r\n                                path.moveTo(point.x, point.y)\r\n                            } else {\r\n                                path.lineTo(point.x, point.y)\r\n                            }\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'h':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.x += numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'v':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\r\n                            point.y += numbers[j]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'l':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            point.x += numbers[j + 0]\r\n                            point.y += numbers[j + 1]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            path.lineTo(point.x, point.y)\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'c':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\r\n                            path.bezierCurveTo(\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                                point.x + numbers[j + 4],\r\n                                point.y + numbers[j + 5],\r\n                            )\r\n                            control.x = point.x + numbers[j + 2]\r\n                            control.y = point.y + numbers[j + 3]\r\n                            point.x += numbers[j + 4]\r\n                            point.y += numbers[j + 5]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 's':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.bezierCurveTo(\r\n                                getReflection(point.x, control.x),\r\n                                getReflection(point.y, control.y),\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                            )\r\n                            control.x = point.x + numbers[j + 0]\r\n                            control.y = point.y + numbers[j + 1]\r\n                            point.x += numbers[j + 2]\r\n                            point.y += numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'q':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\r\n                            path.quadraticCurveTo(\r\n                                point.x + numbers[j + 0],\r\n                                point.y + numbers[j + 1],\r\n                                point.x + numbers[j + 2],\r\n                                point.y + numbers[j + 3],\r\n                            )\r\n                            control.x = point.x + numbers[j + 0]\r\n                            control.y = point.y + numbers[j + 1]\r\n                            point.x += numbers[j + 2]\r\n                            point.y += numbers[j + 3]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 't':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\r\n                            var rx = getReflection(point.x, control.x)\r\n                            var ry = getReflection(point.y, control.y)\r\n                            path.quadraticCurveTo(rx, ry, point.x + numbers[j + 0], point.y + numbers[j + 1])\r\n                            control.x = rx\r\n                            control.y = ry\r\n                            point.x = point.x + numbers[j + 0]\r\n                            point.y = point.y + numbers[j + 1]\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    case 'a':\r\n                        var numbers = parseFloats(data)\r\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\r\n                            var start = point.clone()\r\n                            point.x += numbers[j + 5]\r\n                            point.y += numbers[j + 6]\r\n                            control.x = point.x\r\n                            control.y = point.y\r\n                            parseArcCommand(\r\n                                path,\r\n                                numbers[j],\r\n                                numbers[j + 1],\r\n                                numbers[j + 2],\r\n                                numbers[j + 3],\r\n                                numbers[j + 4],\r\n                                start,\r\n                                point,\r\n                            )\r\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point)\r\n                        }\r\n                        break\r\n\r\n                    //\r\n\r\n                    case 'Z':\r\n                    case 'z':\r\n                        path.currentPath.autoClose = true\r\n                        if (path.currentPath.curves.length > 0) {\r\n                            // Reset point to beginning of Path\r\n                            point.copy(firstPoint)\r\n                            path.currentPath.currentPoint.copy(point)\r\n                            isFirstPoint = true\r\n                        }\r\n                        break\r\n                }\r\n\r\n                // console.log( type, parseFloats( data ), parseFloats( data ).length  )\r\n\r\n                doSetFirstPoint = false\r\n            }\r\n\r\n            return path\r\n        }\r\n\r\n        /**\r\n         * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n         * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\r\n         * From\r\n         * rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n         * To\r\n         * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\r\n         */\r\n\r\n        function parseArcCommand(path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end) {\r\n            x_axis_rotation = (x_axis_rotation * Math.PI) / 180\r\n\r\n            // Ensure radii are positive\r\n            rx = Math.abs(rx)\r\n            ry = Math.abs(ry)\r\n\r\n            // Compute (x1′, y1′)\r\n            var dx2 = (start.x - end.x) / 2.0\r\n            var dy2 = (start.y - end.y) / 2.0\r\n            var x1p = Math.cos(x_axis_rotation) * dx2 + Math.sin(x_axis_rotation) * dy2\r\n            var y1p = -Math.sin(x_axis_rotation) * dx2 + Math.cos(x_axis_rotation) * dy2\r\n\r\n            // Compute (cx′, cy′)\r\n            var rxs = rx * rx\r\n            var rys = ry * ry\r\n            var x1ps = x1p * x1p\r\n            var y1ps = y1p * y1p\r\n\r\n            // Ensure radii are large enough\r\n            var cr = x1ps / rxs + y1ps / rys\r\n\r\n            if (cr > 1) {\r\n                // scale up rx,ry equally so cr == 1\r\n                var s = Math.sqrt(cr)\r\n                rx = s * rx\r\n                ry = s * ry\r\n                rxs = rx * rx\r\n                rys = ry * ry\r\n            }\r\n\r\n            var dq = rxs * y1ps + rys * x1ps\r\n            var pq = (rxs * rys - dq) / dq\r\n            var q = Math.sqrt(Math.max(0, pq))\r\n            if (large_arc_flag === sweep_flag) q = -q\r\n            var cxp = (q * rx * y1p) / ry\r\n            var cyp = (-q * ry * x1p) / rx\r\n\r\n            // Step 3: Compute (cx, cy) from (cx′, cy′)\r\n            var cx = Math.cos(x_axis_rotation) * cxp - Math.sin(x_axis_rotation) * cyp + (start.x + end.x) / 2\r\n            var cy = Math.sin(x_axis_rotation) * cxp + Math.cos(x_axis_rotation) * cyp + (start.y + end.y) / 2\r\n\r\n            // Step 4: Compute θ1 and Δθ\r\n            var theta = svgAngle(1, 0, (x1p - cxp) / rx, (y1p - cyp) / ry)\r\n            var delta = svgAngle((x1p - cxp) / rx, (y1p - cyp) / ry, (-x1p - cxp) / rx, (-y1p - cyp) / ry) % (Math.PI * 2)\r\n\r\n            path.currentPath.absellipse(cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation)\r\n        }\r\n\r\n        function svgAngle(ux, uy, vx, vy) {\r\n            var dot = ux * vx + uy * vy\r\n            var len = Math.sqrt(ux * ux + uy * uy) * Math.sqrt(vx * vx + vy * vy)\r\n            var ang = Math.acos(Math.max(-1, Math.min(1, dot / len))) // floating point precision, slightly over values appear\r\n            if (ux * vy - uy * vx < 0) ang = -ang\r\n            return ang\r\n        }\r\n\r\n        /*\r\n         * According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\r\n         * rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\r\n         */\r\n        function parseRectNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('x') || 0)\r\n            var y = parseFloat(node.getAttribute('y') || 0)\r\n            var rx = parseFloat(node.getAttribute('rx') || 0)\r\n            var ry = parseFloat(node.getAttribute('ry') || 0)\r\n            var w = parseFloat(node.getAttribute('width'))\r\n            var h = parseFloat(node.getAttribute('height'))\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.moveTo(x + 2 * rx, y)\r\n            path.lineTo(x + w - 2 * rx, y)\r\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y, x + w, y, x + w, y + 2 * ry)\r\n            path.lineTo(x + w, y + h - 2 * ry)\r\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y + h, x + w, y + h, x + w - 2 * rx, y + h)\r\n            path.lineTo(x + 2 * rx, y + h)\r\n\r\n            if (rx !== 0 || ry !== 0) {\r\n                path.bezierCurveTo(x, y + h, x, y + h, x, y + h - 2 * ry)\r\n            }\r\n\r\n            path.lineTo(x, y + 2 * ry)\r\n\r\n            if (rx !== 0 || ry !== 0) {\r\n                path.bezierCurveTo(x, y, x, y, x + 2 * rx, y)\r\n            }\r\n\r\n            return path\r\n        }\r\n\r\n        function parsePolygonNode(node, style) {\r\n            function iterator(match, a, b) {\r\n                var x = parseFloat(a)\r\n                var y = parseFloat(b)\r\n\r\n                if (index === 0) {\r\n                    path.moveTo(x, y)\r\n                } else {\r\n                    path.lineTo(x, y)\r\n                }\r\n\r\n                index++\r\n            }\r\n\r\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var index = 0\r\n\r\n            node.getAttribute('points').replace(regex, iterator)\r\n\r\n            path.currentPath.autoClose = true\r\n\r\n            return path\r\n        }\r\n\r\n        function parsePolylineNode(node, style) {\r\n            function iterator(match, a, b) {\r\n                var x = parseFloat(a)\r\n                var y = parseFloat(b)\r\n\r\n                if (index === 0) {\r\n                    path.moveTo(x, y)\r\n                } else {\r\n                    path.lineTo(x, y)\r\n                }\r\n\r\n                index++\r\n            }\r\n\r\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n\r\n            var index = 0\r\n\r\n            node.getAttribute('points').replace(regex, iterator)\r\n\r\n            path.currentPath.autoClose = false\r\n\r\n            return path\r\n        }\r\n\r\n        function parseCircleNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('cx'))\r\n            var y = parseFloat(node.getAttribute('cy'))\r\n            var r = parseFloat(node.getAttribute('r'))\r\n\r\n            var subpath = new Path()\r\n            subpath.absarc(x, y, r, 0, Math.PI * 2)\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.subPaths.push(subpath)\r\n\r\n            return path\r\n        }\r\n\r\n        function parseEllipseNode(node, style) {\r\n            var x = parseFloat(node.getAttribute('cx'))\r\n            var y = parseFloat(node.getAttribute('cy'))\r\n            var rx = parseFloat(node.getAttribute('rx'))\r\n            var ry = parseFloat(node.getAttribute('ry'))\r\n\r\n            var subpath = new Path()\r\n            subpath.absellipse(x, y, rx, ry, 0, Math.PI * 2)\r\n\r\n            var path = new ShapePath()\r\n            path.color.setStyle(style.fill)\r\n            path.subPaths.push(subpath)\r\n\r\n            return path\r\n        }\r\n\r\n        function parseLineNode(node, style) {\r\n            var x1 = parseFloat(node.getAttribute('x1'))\r\n            var y1 = parseFloat(node.getAttribute('y1'))\r\n            var x2 = parseFloat(node.getAttribute('x2'))\r\n            var y2 = parseFloat(node.getAttribute('y2'))\r\n\r\n            var path = new ShapePath()\r\n            path.moveTo(x1, y1)\r\n            path.lineTo(x2, y2)\r\n            path.currentPath.autoClose = false\r\n\r\n            return path\r\n        }\r\n\r\n        //\r\n\r\n        function parseStyle(node, style) {\r\n            style = Object.assign({}, style) // clone style\r\n\r\n            if (node.hasAttribute('fill')) style.fill = node.getAttribute('fill')\r\n            if (node.style.fill !== '') style.fill = node.style.fill\r\n\r\n            return style\r\n        }\r\n\r\n        function isVisible(style) {\r\n            return style.fill !== 'none' && style.fill !== 'transparent'\r\n        }\r\n\r\n        // http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\r\n\r\n        function getReflection(a, b) {\r\n            return a - (b - a)\r\n        }\r\n\r\n        function parseFloats(string) {\r\n            var array = string.split(/[\\s,]+|(?=\\s?[+\\-])/)\r\n\r\n            for (var i = 0; i < array.length; i++) {\r\n                var number = array[i]\r\n\r\n                // Handle values like 48.6037.7.8\r\n                // TODO Find a regex for this\r\n\r\n                if (number.indexOf('.') !== number.lastIndexOf('.')) {\r\n                    var split = number.split('.')\r\n\r\n                    for (var s = 2; s < split.length; s++) {\r\n                        array.splice(i + s - 1, 0, '0.' + split[s])\r\n                    }\r\n                }\r\n\r\n                array[i] = parseFloat(number)\r\n            }\r\n\r\n            return array\r\n        }\r\n\r\n        function getNodeTransform(node) {\r\n            if (!node.hasAttribute('transform')) {\r\n                return null\r\n            }\r\n\r\n            var transform = parseTransformNode(node)\r\n\r\n            if (transform) {\r\n                if (transformStack.length > 0) {\r\n                    transform.premultiply(transformStack[transformStack.length - 1])\r\n                }\r\n\r\n                currentTransform.copy(transform)\r\n                transformStack.push(transform)\r\n            }\r\n\r\n            return transform\r\n        }\r\n\r\n        function parseTransformNode(node) {\r\n            var transform = new Matrix3()\r\n            var currentTransform = tempTransform0\r\n            var transformsTexts = node.getAttribute('transform').split(' ')\r\n\r\n            for (var tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex--) {\r\n                var transformText = transformsTexts[tIndex]\r\n                var openParPos = transformText.indexOf('(')\r\n                var closeParPos = transformText.indexOf(')')\r\n\r\n                if (openParPos > 0 && openParPos < closeParPos) {\r\n                    var transformType = transformText.substr(0, openParPos)\r\n\r\n                    var array = parseFloats(transformText.substr(openParPos + 1, closeParPos - openParPos - 1))\r\n\r\n                    currentTransform.identity()\r\n\r\n                    switch (transformType) {\r\n                        case 'translate':\r\n                            if (array.length >= 1) {\r\n                                var tx = array[0]\r\n                                var ty = tx\r\n\r\n                                if (array.length >= 2) {\r\n                                    ty = array[1]\r\n                                }\r\n\r\n                                currentTransform.translate(tx, ty)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'rotate':\r\n                            if (array.length >= 1) {\r\n                                var angle = 0\r\n                                var cx = 0\r\n                                var cy = 0\r\n\r\n                                // Angle\r\n                                angle = (-array[0] * Math.PI) / 180\r\n\r\n                                if (array.length >= 3) {\r\n                                    // Center x, y\r\n                                    cx = array[1]\r\n                                    cy = array[2]\r\n                                }\r\n\r\n                                // Rotate around center (cx, cy)\r\n                                tempTransform1.identity().translate(-cx, -cy)\r\n                                tempTransform2.identity().rotate(angle)\r\n                                tempTransform3.multiplyMatrices(tempTransform2, tempTransform1)\r\n                                tempTransform1.identity().translate(cx, cy)\r\n                                currentTransform.multiplyMatrices(tempTransform1, tempTransform3)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'scale':\r\n                            if (array.length >= 1) {\r\n                                var scaleX = array[0]\r\n                                var scaleY = scaleX\r\n\r\n                                if (array.length >= 2) {\r\n                                    scaleY = array[1]\r\n                                }\r\n\r\n                                currentTransform.scale(scaleX, scaleY)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'skewX':\r\n                            if (array.length === 1) {\r\n                                currentTransform.set(1, Math.tan((array[0] * Math.PI) / 180), 0, 0, 1, 0, 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'skewY':\r\n                            if (array.length === 1) {\r\n                                currentTransform.set(1, 0, 0, Math.tan((array[0] * Math.PI) / 180), 1, 0, 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n\r\n                        case 'matrix':\r\n                            if (array.length === 6) {\r\n                                currentTransform.set(array[0], array[2], array[4], array[1], array[3], array[5], 0, 0, 1)\r\n                            }\r\n\r\n                            break\r\n                    }\r\n                }\r\n\r\n                transform.premultiply(currentTransform)\r\n            }\r\n\r\n            return transform\r\n        }\r\n\r\n        function transformPath(path, m) {\r\n            function transfVec2(v2) {\r\n                tempV3.set(v2.x, v2.y, 1).applyMatrix3(m)\r\n\r\n                v2.set(tempV3.x, tempV3.y)\r\n            }\r\n\r\n            var isRotated = isTransformRotated(m)\r\n\r\n            var tempV2 = new Vector2()\r\n            var tempV3 = new Vector3()\r\n\r\n            var subPaths = path.subPaths\r\n\r\n            for (var i = 0, n = subPaths.length; i < n; i++) {\r\n                var subPath = subPaths[i]\r\n                var curves = subPath.curves\r\n\r\n                for (var j = 0; j < curves.length; j++) {\r\n                    var curve = curves[j]\r\n\r\n                    if (curve.isLineCurve) {\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                    } else if (curve.isCubicBezierCurve) {\r\n                        transfVec2(curve.v0)\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                        transfVec2(curve.v3)\r\n                    } else if (curve.isQuadraticBezierCurve) {\r\n                        transfVec2(curve.v0)\r\n                        transfVec2(curve.v1)\r\n                        transfVec2(curve.v2)\r\n                    } else if (curve.isEllipseCurve) {\r\n                        tempV2.set(curve.aX, curve.aY)\r\n                        transfVec2(tempV2)\r\n                        curve.aX = tempV2.x\r\n                        curve.aY = tempV2.y\r\n\r\n                        curve.xRadius *= getTransformScaleX(m)\r\n                        curve.yRadius *= getTransformScaleY(m)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function isTransformRotated(m) {\r\n            return m.elements[1] !== 0 || m.elements[3] !== 0\r\n        }\r\n\r\n        function getTransformScaleX(m) {\r\n            var te = m.elements\r\n            return Math.sqrt(te[0] * te[0] + te[1] * te[1])\r\n        }\r\n\r\n        function getTransformScaleY(m) {\r\n            var te = m.elements\r\n            return Math.sqrt(te[3] * te[3] + te[4] * te[4])\r\n        }\r\n\r\n        //\r\n\r\n        var paths = []\r\n\r\n        var transformStack = []\r\n\r\n        var tempTransform0 = new Matrix3()\r\n        var tempTransform1 = new Matrix3()\r\n        var tempTransform2 = new Matrix3()\r\n        var tempTransform3 = new Matrix3()\r\n\r\n        var currentTransform = new Matrix3()\r\n\r\n        var xml = new DOMParser().parseFromString(text, 'image/svg+xml') // application/xml\r\n\r\n        parseNode(xml.documentElement, { fill: '#000' })\r\n\r\n        // console.log( paths );\r\n\r\n        return paths\r\n    },\r\n}\r\n\r\nexport { SVGLoader }\r\n","import * as THREE from 'three'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { Canvas } from 'react-three-fiber'\r\nimport flatten from 'lodash-es/flatten'\r\nimport { SVGLoader as loader } from './SVGLoader'\r\nimport { useTransition, a } from 'react-spring/three'\r\n\r\n\r\nfunction svgLoader(id) {\r\n    const svgResource = new Promise(resolve =>\r\n        new loader().load(window.webBase+\"api/svg/\"+id, shapes =>\r\n            resolve(flatten(shapes.map((group, index) => group.toShapes(true).map(shape => ({ shape, color: group.color, index })))))\r\n        )\r\n    );\r\n    return svgResource;\r\n}\r\n\r\n\r\nfunction Scene(props) {\r\n    console.log(props.book.id);\r\n    const [shapes, set] = useState([]);\r\n    //useEffect(() => void svgLoader(1).then(set), []);\r\n    const [show, toggle] = useState(true);\r\n    useEffect(() => void setInterval(() => toggle(show => !show), 3000), []);\r\n    useEffect(() => void (!show ? set([]) : svgLoader(props.book.title).then(set)), [show]);\r\n\r\n    const transitions = useTransition(shapes, item => item.shape.uuid, {\r\n        from: { position: [-50, 0, 0], rotation: [0, -0.6, 0], opacity: 0 },\r\n        enter: { position: [0, 0, 0], rotation: [0, 0.3, 0], opacity: 1 },\r\n        leave: { position: [50, 0, 0], rotation: [0, 0.6, 0], opacity: 0 },\r\n        order: ['leave', 'enter', 'update'],\r\n        lazy: true,\r\n        trail: 5,\r\n        unique: true,\r\n        reset: true,\r\n    })\r\n    const deg = THREE.Math.degToRad;\r\n    return (\r\n        <a.group position={[500, -400, 0]} rotation={[0, deg(180), 0]}>\r\n            {transitions.map(({ item: { shape, color, index }, key, props: { opacity, position, rotation } }) => (\r\n                <a.mesh key={key} rotation={rotation} position={position.interpolate((x, y, z) => [x, y, 0])}>\r\n                    <a.meshPhongMaterial\r\n                        attach=\"material\"\r\n                        color={color}\r\n                        opacity={opacity}\r\n                        side={THREE.DoubleSide}\r\n                        depthWrite={false}\r\n                        transparent\r\n                    />\r\n                    <shapeBufferGeometry attach=\"geometry\" args={[shape]} />\r\n                </a.mesh>\r\n            ))}\r\n        </a.group>\r\n    )\r\n}\r\nexport  default  class Animation extends  React.Component  {\r\n\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"main\">\r\n\r\n                <Canvas\r\n                    camera={{\r\n                        fov: 90,\r\n                        position: [0, 0, 500],\r\n                        rotation: [0, 0, THREE.Math.degToRad(180)],\r\n                        near: 0.1,\r\n                        far: 20000,\r\n                    }}>\r\n                    <ambientLight intensity={0.5}/>\r\n                    <spotLight intensity={0.5} position={[300, 300, 4000]}/>\r\n                    <Scene book = {this.props.book}/>\r\n                </Canvas>\r\n                <span className=\"middle\">\r\n                    <div>\r\n                        {this.props.book.title}\r\n                    </div>\r\n                </span>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport {withRouter} from \"react-router\";\r\nimport Animation from \"./animation\"\r\nimport { Descriptions, Badge,Tooltip,List,Comment,Form,Input} from 'antd';\r\n//import 'antd/dist/antd.css';\r\nimport { Button} from 'antd';\r\nimport './book_show.css'\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\nimport {Link} from \"react-router-dom\";\r\nconst { TextArea } = Input;\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n    <div>\r\n        <Form.Item>\r\n            <TextArea rows={4} onChange={onChange} value={value} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\r\n                Add Comment\r\n            </Button>\r\n        </Form.Item>\r\n    </div>\r\n);\r\nclass BookShow extends  React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            bookID: this.props.match.params.id,\r\n            submitting: false,\r\n            value: '',\r\n        };\r\n    }\r\n    addToShelf() {\r\n        if(this.props.currentUser === null) {\r\n            console.log(\"无用户\")\r\n        } else {\r\n            let bookshelf_item = {\r\n                user_id:this.props.currentUser.id,\r\n                book_id:this.props.book.id,\r\n            }\r\n            fetch( window.webBase+\"api/bookshelf\", {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                method: 'POST',\r\n                body: JSON.stringify(bookshelf_item)\r\n            }).then(res=>res.text()).then(text=>console.log(text));\r\n        }\r\n\r\n    }\r\n    //Animation/\r\n    handleChange = e => {\r\n        this.setState({\r\n            value: e.target.value,\r\n        });\r\n    };\r\n    handleSubmit = () => {\r\n        if (!this.state.value) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            submitting: true,\r\n        });\r\n\r\n        setTimeout(() => {\r\n            this.setState({\r\n                submitting: false,\r\n                value: '',\r\n            });\r\n        }, 1000);\r\n    };\r\n    render() {\r\n        const bookId = this.props.match.params.id;\r\n        const { submitting, value } = this.state;\r\n        if (this.props.book) {\r\n            let book = this.props.book;\r\n            return (\r\n                <div>\r\n                    <Animation book ={this.props.book}/>\r\n\r\n                    <div className=\"book-show\">\r\n                        <Button  type=\"primary\"  size=\"large\" onClick={e=>this.addToShelf()}>\r\n                            加入书架\r\n                        </Button>\r\n\r\n                    <Descriptions title=\"书籍信息\" bordered  >\r\n                        <Descriptions.Item label=\"标题\">{book.title}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"作者\">{book.author}</Descriptions.Item>\r\n\r\n                        <Descriptions.Item label=\"简介\">\r\n                            {book.description}\r\n                            <br />\r\n\r\n                        </Descriptions.Item>\r\n                    </Descriptions>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\nexport default withRouter(BookShow);","import { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport BookShow from './book_show';\r\nimport { requestComment } from '../../actions/book_actions';\r\n\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        book: state.books[ownProps.match.params.id],\r\n        currentUser: state.session.currentUser,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n});\r\n\r\nexport default withRouter(connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(BookShow));\r\n","import React, {createRef} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from 'material-ui/styles';\r\nimport Drawer from 'material-ui/Drawer';\r\nimport IconButton from 'material-ui/IconButton';\r\nimport MenuIcon from 'material-ui-icons/Menu';\r\nimport Typography from 'material-ui/Typography';\r\nimport './Navigation.css';\r\n\r\nconst styles = {\r\n    button: {\r\n        position: 'relative',\r\n        left: 0,\r\n        top: 0,\r\n        zIndex: 10,\r\n    },\r\n    list: {\r\n        width: 280,\r\n        flex: 'initial',\r\n    },\r\n    title: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    }\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {open: true,help:false};\r\n\r\n        this.chapterList = null; // 章节列表 DOM 元素\r\n\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleOpen = this.handleOpen.bind(this);\r\n        this.handleHelp = this.handleHelp.bind(this);\r\n        // this.toc= null;\r\n        // this.setTocRef = element => {\r\n        //   this.toc = element;\r\n        // };\r\n        this.myRef = createRef();\r\n        this.toc = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let epub = this.props.epub;\r\n        epub.getToc().then((chapters) => {\r\n            this.chapterList = this.getChapters(chapters, false);\r\n            this.bindEventForChapters();\r\n        });\r\n\r\n    }\r\n\r\n    componentWillUpdate() {\r\n\r\n        let toc = this.myRef.current;\r\n        if(toc!=null) {\r\n            this.toc = toc;\r\n            // if (toc.firstElementChild !== this.chapterList) {\r\n            //   toc.appendChild(this.chapterList);\r\n            // }\r\n        }\r\n        if(this.toc != null && this.chapterList != null) {\r\n            // console.log(\"插入前\");\r\n            // console.log(this.toc);\r\n            this.toc.appendChild(this.chapterList);\r\n            // console.log(\"插入后\");\r\n            // console.log(this.toc);\r\n        }\r\n        // console.log(this.toc === this.myRef.current);\r\n        // console.log(this.chapterList);\r\n        // console.log(\"update执行\");\r\n        if(this.state.help === false) {\r\n            this.setState({help:true});\r\n            // console.log(\"update执行，help值:\"+this.state.help);\r\n        }\r\n    }\r\n\r\n\r\n    // 生成章节列表 DOM 元素\r\n    getChapters(chapters, collapse) {\r\n        let ul = document.createElement('ul');\r\n        ul.className = collapse ? 'chapter-list collapse' : 'chapter-list expand';\r\n\r\n        chapters.forEach((item) => {\r\n            let li = document.createElement('li');\r\n            li.className = 'chapter-list-item';\r\n            let str;\r\n            str = `<div class=\"item-content\">\r\n                <i class=\"item-mark\"></i>\r\n                <a class=\"chapter-url\" href=\"${item.href}\">${item.label}</a>\r\n             </div>`;\r\n            li.innerHTML = str;\r\n            ul.appendChild(li);\r\n\r\n            // 若章节还有子章节，递归生成目录（默认目录折叠）\r\n            if (item.subitems && item.subitems.length) {\r\n                li.appendChild(this.getChapters(item.subitems, true));\r\n            }\r\n        });\r\n\r\n        return ul;\r\n    }\r\n\r\n    // 为章节列表 DOM 绑定事件处理程序\r\n    bindEventForChapters() {\r\n        this.chapterList.addEventListener('click', (event) => {\r\n            let target = event.target;\r\n            if (target.nodeName.toLowerCase() !== 'a') return;\r\n            let href = target.getAttribute('href');\r\n            this.props.epub.goto(href);\r\n            console.log('navigation render: ', this.props.epub.isRendered);\r\n            event.preventDefault();\r\n        });\r\n    }\r\n\r\n    // 打开章节列表\r\n    handleOpen() {\r\n        this.setState({open: true});\r\n\r\n    }\r\n\r\n    // 关闭章节列表\r\n    handleClose() {\r\n        this.setState({open: false});\r\n\r\n\r\n    }\r\n    handleHelp() {\r\n        this.setState({help: false});\r\n        console.log(\"执行，help值:\"+this.state.help);\r\n    }\r\n    render() {\r\n        const { theme, classes } = this.props;\r\n        let fontColor = {\r\n            color: theme ? '#000000de' : '#fff',\r\n        };\r\n\r\n        return (\r\n            <div id=\"navigation\">\r\n                <IconButton onClick={this.handleOpen} className={classes.button}>\r\n                    <MenuIcon/>\r\n                </IconButton>\r\n                <Drawer\r\n                    open={this.state.open}\r\n                    onClose={this.handleHelp}\r\n                    onClick={this.handleClose}\r\n                >\r\n\r\n                    <div className={classes.title}>\r\n                        <Typography type=\"title\" align=\"center\">\r\n                            Table Of Contents\r\n                        </Typography>\r\n                    </div>\r\n                    <div ref={this.myRef} className={classes.list} style={fontColor}>\r\n                    </div>\r\n\r\n                </Drawer>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nNavigation.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Navigation);\r\n","class Note {\n  constructor(bookKey, chapter, text, cfi, range, color, note) {\n    this.key = new Date().getTime() + '';\n    this.bookKey = bookKey;\n    this.chapter = chapter;\n    this.text = text;\n    this.cfi = cfi;\n    this.range = range; // Rangy.js产生的将Range对象序列化后的字符串\n    this.color = color; // 高亮的颜色类型：0, 1, 2, 3\n    this.note = note || '';\n  }\n}\n\nexport default Note;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport { orange } from 'material-ui/colors';\nimport CopyIcon from 'material-ui-icons/ContentCut';\nimport Note from '../model/Note';\n\nconst styles = theme => ({\n  root: {\n    position: 'absolute',\n    display: 'flex',\n    alignItems: 'center',\n    height: 40,\n    padding: '0 10px',\n    borderRadius: 20,\n  },\n  button: {\n    cursor: 'pointer',\n    padding: '0 8px',\n  },\n  dot: {\n    display: 'inline-block',\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    transition: 'transform .3s',\n    '&:hover': {\n      transform: 'scale(1.2)',\n    },\n  },\n  icon: {\n    '&:active': {\n      color: orange[400],\n    },\n  },\n  bottom: {\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    borderWidth: 10,\n    borderStyle: 'solid',\n    borderColor: 'transparent',\n    left: '50%',\n    marginLeft: '-10px',\n    bottom: '-20px',\n  },\n});\n\nclass EditorToolbar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createNote = this.createNote.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.handleHighlight = this.handleHighlight.bind(this);\n    this.handleCopyPlainText = this.handleCopyPlainText.bind(this);\n  }\n\n  // 根据选取的文本创建Note对象\n  createNote(color) {\n    let {book, epub} = this.props;\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iDoc = iframe.contentDocument;\n    let sel = iDoc.getSelection();\n    let range = sel.getRangeAt(0);\n    let text = sel.toString();\n    text = text && text.trim();\n    let cfiBase = epub.renderer.currentChapter.cfiBase;\n    const EPUBJS = window.EPUBJS;\n    let cfi = new EPUBJS.EpubCFI().generateCfiFromRange(range, cfiBase);\n    let chapter = epub.renderer.currentChapter.spinePos;\n    let bookKey = this.props.epubTitle.id;\n    const rangy = window.rangy;\n    let charRange = rangy.getSelection(iframe).saveCharacterRanges(iDoc.body)[0];\n    let serial = JSON.stringify(charRange);\n    let note = new Note(bookKey, chapter, text, cfi, serial, color, '');\n\n    return note;\n  }\n\n  // 关闭菜单\n  closeMenu() {\n    this.props.closeMenu();\n  }\n\n  // 点击添加高亮\n  handleHighlight(event) {\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let color = parseInt(event.target.dataset.color);\n    if (isNaN(color)) return;\n    let note = this.createNote(color);\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    this.props.setKey(note.key); // 修复新添加的高亮没有正确的key的问题\n    this.props.pen.highlightSelection(classes[color]);\n    iDoc.getSelection().empty(); // 清空文本选取\n\n    this.props.addNote(note);\n    this.closeMenu();\n    event.stopPropagation();\n\n    console.log('%c Add note here. ', 'background-color: green');\n  }\n\n  // 点击复制为纯文本选项触发\n  handleCopyPlainText() {\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let text = iDoc.execCommand('copy', false, null);\n    !text ? console.log('failed to copy text to clipboard') : console.log('copied!');\n    this.closeMenu();\n  }\n\n  render() {\n    const {open, theme, posX, posY, colors, classes} = this.props;\n    const root = {\n      left: posX,\n      top: posY,\n      visibility: open ? 'visible' : 'hidden',\n      backgroundColor: theme ? '#424242' : 'f5f5f5',\n    };\n    const bottom = {\n      borderTopColor: theme ? '#424242' : '#f5f5f5',\n    };\n    const icon = {\n      width: 20,\n      height: 20,\n      color: theme ? '#fff' : '#000',\n    };\n\n    return (\n      <div id=\"editor-toolbar\" className={classes.root} style={root}>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"0\" style={{backgroundColor: colors[0]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"1\" style={{backgroundColor: colors[1]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"2\" style={{backgroundColor: colors[2]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleHighlight}>\n          <span className={classes.dot} data-color=\"3\" style={{backgroundColor: colors[3]}}/>\n        </div>\n        <div className={classes.button} onClick={this.handleCopyPlainText}>\n          <CopyIcon className={classes.icon} style={icon}/>\n        </div>\n        <div className={classes.bottom} style={bottom}/>\n      </div>\n    );\n  }\n}\n\nEditorToolbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(EditorToolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\n\nconst styles = theme => ({\n  root: {\n    position: 'absolute',\n    visibility: 'hidden',\n    zIndex: 100,\n  },\n  card: {\n    width: 200,\n    boxShadow: '0 2px 15px rgba(0, 0, 0, .1)',\n    padding: '10px 0',\n  },\n  bottom: {\n    width: 14,\n    height: 14,\n    transform: 'rotate(45deg)',\n    position: 'absolute',\n    bottom: -7,\n    left: 0,\n    right: 0,\n    margin: 'auto',\n    zIndex: 99,\n  },\n  textarea: {\n    fontFamily: 'sans-serif',\n    fontSize: 12,\n    border: 'none',\n    outline: 'none',\n    width: '100%',\n    padding: '0 10px',\n    minHeight: 60,\n    backgroundColor: 'transparent',\n    resize: 'none',\n    '&::-webkit-input-placeholder': {\n      fontStyle: 'italic',\n    },\n    '&::-moz-placeholder': {\n      fontStyle: 'italic',\n    },\n  },\n});\n\nclass NoteCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      note: this.props.note.note,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({note: nextProps.note.note});\n  }\n\n  handleChange(event) {\n    this.setState({note: event.target.value});\n  }\n\n  handleBlur(event) {\n    let note = this.props.note;\n    note.note = event.target.value;\n    this.props.updateNote(note);\n    console.log('note has been updated.', note);\n  }\n\n  render() {\n    const {posX, posY, open, theme, classes} = this.props;\n\n    let root = {\n      left: posX,\n      top: posY,\n      visibility: open ? 'visible' : 'hidden',\n      background: theme ? '#424242' : '#f5f5f5',\n    };\n    let textArea = {\n      color: theme ? '#f5f5f5' : '#424242',\n    };\n    let bottom = {\n      background: theme ? '#424242' : '#f5f5f5',\n    };\n\n    return (\n      <div id=\"note-card\" className={classes.root} style={root}>\n        <div className={classes.card}>\n          <textarea type=\"text\"\n                    value={this.state.note}\n                    className={classes.textarea}\n                    onChange={this.handleChange}\n                    onBlur={this.handleBlur}\n                    style={textArea}\n                    placeholder=\"There is no note here.\"\n          />\n        </div>\n        <div className={classes.bottom} style={bottom}/>\n      </div>\n    );\n  }\n}\n\nNoteCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(NoteCard);\n","class Config {\n\n  // 获取默认的配置\n  static getDefaultConfigObj() {\n    return {\n      theme: true,\n      colors: ['#FBF1D1', '#EFEEB0', '#CAEFC9', '#76BEE9'],\n      background: '#FFF',\n      fontSize: 0, // 0 代表使用默认值\n      lineHeight: 0, // 0 代表使用默认值\n      letterSpacing: 0, // 0 代表使用默认值\n      wordSpacing: 0, // 0 代表使用默认值\n      column: 2, // 可取值为1, 2\n      padding: 10, // 阅读区域与浏览器可视区域上下的间距\n      gutter: 80, // 阅读区域与浏览器可视区域两侧的间距\n      disablePopup: false,\n    };\n  }\n\n  // 获取config对象\n  static get() {\n    let json = localStorage.getItem('config');\n\n    return JSON.parse(json) || Config.getDefaultConfigObj();\n  }\n\n  // 更新config\n  static set(key, value) {\n    let json = localStorage.getItem('config');\n    let config = JSON.parse(json) || Config.getDefaultConfigObj();\n    config[key] = value;\n    localStorage.setItem('config', JSON.stringify(config));\n  }\n\n  // 重置Config\n  static resetConfig() {\n    let json = JSON.stringify(Config.getDefaultConfigObj());\n    localStorage.setItem('config', json);\n  }\n\n  // 获取为文档默认应用的css样式\n  static getDefaultCss() {\n    let config = Config.get();\n    let colors = config.colors;\n\n    let css1 = `::selection{background:#f3a6a68c}::-moz-selection{background:#f3a6a68c}[class*=color-]:hover{cursor:pointer;background-image:linear-gradient(0,rgba(0,0,0,.075),rgba(0,0,0,.075))}.color-0{background-color:${colors[0]}}.color-1{background-color:${colors[1]}}.color-2{background-color:${colors[2]}}.color-3{background-color:${colors[3]}}`;\n\n    let css2 = [\n      'a, article, cite, code, div, li, p, pre, span, table {',\n      `    font-size: ${config.fontSize+'px'} !important;`,\n      `    line-height: ${config.lineHeight+'px'} !important;`,\n      `    letter-spacing: ${config.letterSpacing+'px'} !important;`,\n      `    word-spacing: ${config.wordSpacing+'px'} !important;`,\n      '}',\n      'img {',\n      '    max-width: 100% !important;',\n      '}',\n      'body {',\n      '    background-color: transparent !important;',\n      `    color: ${config.theme ? '#000000de' : '#f5f5f5'} !important;`,\n      '}',\n    ];\n\n    css2[1] = config.fontSize ? css2[1] : '';\n    css2[2] = config.lineHeight ? css2[2] : '';\n    css2[3] = config.letterSpacing ? css2[3] : '';\n    css2[4] = config.wordSpacing ? css2[4] : '';\n\n    return (css1 + css2.join('\\n'));\n  }\n}\n\nexport default Config;\n","// 工具类\nimport Config from \"./Config\";\n\nclass Util {\n\n  // 获取元素的样式\n  static getStyle(element, attr) {\n    if (element.currentStyle) {\n      return element.currentStyle[attr];\n    } else {\n      return getComputedStyle(element)[attr];\n    }\n  }\n\n  // 为指定文档添加(user)脚本\n  static addScript(script, doc=document) {\n    let scriptEl = doc.getElementById('qiu-user-script');\n\n    if (!scriptEl) {\n      scriptEl = doc.createElement('script');\n      scriptEl.id = 'qiu-user-script';\n      scriptEl.type = 'text/javascript';\n      scriptEl.defer = true;\n      scriptEl.text = script;\n      doc.body.appendChild(scriptEl);\n      return;\n    }\n\n    scriptEl.text = script;\n  }\n\n  // 为指定文档添加(user)样式\n  static addCss(css, doc=document) {\n    let style = doc.getElementById('qiu-user-style');\n\n    if (!style) {\n      style = doc.createElement('style');\n      style.id = 'qiu-user-style';\n      style.textContent = css;\n      doc.head.appendChild(style);\n      return;\n    }\n\n    style.textContent = css;\n  }\n\n  // 为 iframe 添加默认的样式\n  static addDefaultCss() {\n    let css = Config.getDefaultCss();\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let style = iDoc.getElementById('qiu-default-style');\n\n    if (!style) {\n      style = iDoc.createElement('style');\n      style.id = 'qiu-default-style';\n      style.textContent = css;\n      iDoc.head.appendChild(style);\n      return;\n    }\n\n    style.textContent = css;\n  }\n\n  // 获取用户自定义的样式\n  // 返回一个对象 {outer: outerStyle, inner: innerStyle}\n  static getUserStyle() {\n    let json = localStorage.getItem('style')  || '{}';\n\n    return JSON.parse(json);\n  }\n\n  // 解析用户传入的样式表\n  static parseStyle(style) {\n    const separator = '/* Qiu Plus Separator */';\n    let arr = style.split(separator);\n    let out = {\n      inner: arr[0] || '',\n      outer: arr[1] || '',\n    };\n\n    return out;\n  }\n\n  // 获取用户自定义的脚本\n  // 返回一个对象 {outer: outerScript, inner: innerScript}\n  static getUserScript() {\n    let json = localStorage.getItem('script')  || '{}';\n\n    return JSON.parse(json);\n  }\n\n  // 解析用户传入的脚本\n  static parseScript(script) {\n    const separator = '/* Qiu Plus Separator */';\n    let arr = script.split(separator);\n    let out = {\n      inner: arr[0] || '',\n      outer: arr[1] || '',\n    };\n\n    return out;\n  }\n\n  // 应用外部的样式\n  static applyCss() {\n    let outerDoc = document;\n    let innerDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let style = Util.getUserStyle();\n    style.inner && Util.addCss(style.inner, innerDoc);\n    style.outer && Util.addCss(style.outer, outerDoc);\n  }\n\n  // 应用外部的样式\n  static applyScript() {\n    let outerDoc = document;\n    let innerDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n    let script = Util.getUserScript();\n    script.inner && Util.addCss(script.inner, innerDoc);\n    script.outer && Util.addCss(script.outer, outerDoc);\n  }\n\n  // 取消自定义的样式\n  static resetStyle() {\n    let style = {\n      inner: ' ',\n      outer: ' ',\n    };\n    localStorage.setItem('style', JSON.stringify(style));\n    Config.resetConfig();\n\n    Util.applyCss();\n    Util.addDefaultCss();\n  }\n\n  // 取消用户自定义脚本\n  static resetScript() {\n    let script = {\n      inner: ' ',\n      outer: ' ',\n    };\n    localStorage.setItem('script', JSON.stringify(script));\n    Util.applyScript();\n  }\n}\n\nexport default Util;\n","// 阅读期间自动记录当前阅读位置\nclass AutoBookmark {\n\n  static recordCfi(bookKey, cfi) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n    obj[bookKey] = cfi;\n\n    localStorage.setItem('autoBookmark', JSON.stringify(obj));\n  }\n\n  static getCfi(bookKey) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n\n    return obj[bookKey] || null;\n  }\n\n  static clear(bookKey) {\n    let json = localStorage.getItem('autoBookmark');\n    let obj = JSON.parse(json) || {};\n    delete obj[bookKey];\n\n    localStorage.setItem('autoBookmark', JSON.stringify(obj));\n  }\n}\n\nexport default AutoBookmark;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport IconButton from 'material-ui/IconButton';\nimport LeftArrow from 'material-ui-icons/NavigateBefore';\nimport RightArrow from 'material-ui-icons/NavigateNext';\nimport EditorToolbar from './EditorToolbar';\nimport NoteCard from './NoteCard';\nimport Util from '../service/Util';\nimport AutoBookmark from \"../service/AutoBookmark\";\nconst rangy = window.rangy;\nlet styles = {\n  pageArea: {\n    position: 'absolute',\n    height:600,\n    //maxWidth:600,\n    left: 80,\n    right: 80,\n    top: 0,\n    bottom: 0,\n  },\n  button: {\n    width: 70,\n    height: 70,\n    padding: 0,\n  },\n  arrow: {\n    width: 50,\n    height: 50,\n  },\n  prev: {\n    position: 'fixed',\n    left:0,\n    bottom:0,\n    height: '100%',\n    opacity: 0,\n    cursor: 'pointer',\n    transition: '.3s',\n    '&:hover': {\n      opacity: 1,\n    },\n\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  next: {\n    position: 'fixed',\n    right:0,\n    bottom:0,\n    height: '100%',\n    opacity: 0,\n    cursor: 'pointer',\n    transition: '.3s',\n    '&:hover': {\n      opacity: 1,\n    },\n\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n};\n\nclass ViewArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openMenu: false, // 是否打开菜单\n      openNoteCard: false, // 是否打开附注编辑框\n      mPosX: 0, // 菜单的X轴坐标\n      mPosY: 0, // 菜单的Y轴坐标\n      nPosX: 0, // 附注输入框的X轴坐标\n      nPosY: 0, // 附注输入框的Y轴坐标\n      note: {}, // 当前正在被编辑的note\n    };\n\n    this.x = 0; // 计算菜单坐标时的中间结果\n    this.y = 0; // 计算菜单坐标时的中间结果\n    this.pen = null;\n    this.notes = []; // 当前章节的note\n    this.key = ''; // 当前正在渲染的note的key\n\n    this.prev = this.prev.bind(this);\n    this.next = this.next.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.openMenu = this.openMenu.bind(this);\n    this.closeNoteCard = this.closeNoteCard.bind(this);\n    this.openNoteCard = this.openNoteCard.bind(this);\n    this.renderNotes = this.renderNotes.bind(this);\n    this.getPen = this.getPen.bind(this);\n    this.setNote = this.setNote.bind(this);\n    this.setKey = this.setKey.bind(this);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('copy', this.copyTextHack);\n\n  }\n\n  componentDidMount() {\n    let page = document.getElementById('page-area');\n    let {book, epub} = this.props;\n\n    epub.renderTo(page); // 渲染\n    this.bindEvent(); // 绑定事件\n    epub.gotoCfi(AutoBookmark.getCfi(book.key)); // 跳转到上一次阅读位置\n\n    // 解决火狐下不能正常复制\n    this.copyTextHack = (event) => {\n      let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n      let copyText = iDoc.getSelection().toString() || document.getSelection().toString();\n      event.clipboardData.setData('text/plain', copyText);\n      event.preventDefault();\n    };\n    document.addEventListener('copy', this.copyTextHack);\n  }\n\n  // 为阅读界面绑定事件\n  bindEvent() {\n    let epub = this.props.epub;\n    let isFirefox = navigator.userAgent.indexOf('Firefox') !== -1;\n    let lock = false; // 暂时锁住翻页快捷键，避免快速点击产生的Bug\n\n    let arrowKeys = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.keyCode === 37 || event.keyCode === 38) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.keyCode === 39 || event.keyCode === 40) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let mouseFirefox = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.detail < 0) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.detail > 0) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let mouseChrome = event => {\n      event.preventDefault();\n\n      if (lock) return;\n\n      if (event.wheelDelta > 0) {\n        epub.prevPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n\n      if (event.wheelDelta < 0) {\n        epub.nextPage();\n        lock = true;\n        setTimeout(function () {\n          lock = false;\n        }, 100);\n        return false;\n      }\n    };\n\n    let copyText = event => {\n      let key = event.keyCode || event.which;\n      if (key === 67 && event.ctrlKey) {\n        let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n        let text = iDoc.execCommand('copy', false, null);\n        !text ? console.log('failed to copy text to clipboard') : console.log(`copied!`);\n      }\n    };\n\n    epub.on('renderer:chapterDisplayed', () => {\n\n      this.getPen(); // 切换章节后获取 pen\n\n      console.log('%c renderer:chapterDisplayed has been triggered! ', 'color: cyan; background: #333333');\n\n      let doc = epub.renderer.doc;\n\n      doc.addEventListener('click', this.openMenu); // 为每一章节内容绑定弹出菜单触发程序\n      doc.addEventListener('keydown', arrowKeys, false); // 箭头按键翻页\n      doc.addEventListener('keydown', copyText); // 解决 Ctrl + C 复制的bug\n\n      // 鼠标滚轮翻页\n      if (isFirefox)\n        doc.addEventListener('DOMMouseScroll', mouseFirefox, false);\n      else\n        doc.addEventListener('mousewheel', mouseChrome, false);\n\n      Util.addDefaultCss(); // 切换章节后为当前文档设置默认的样式\n      Util.applyCss(); // 切换章节后应当为当前文档设置样式\n      this.renderNotes(); // 切换章节后需要重新渲染注释\n    });\n\n    epub.on('renderer:visibleRangeChanged', () => {\n      let {book, epub} = this.props;\n      let bookKey = book.key;\n      let cfi = epub.getCurrentLocationCfi();\n      AutoBookmark.recordCfi(bookKey, cfi);\n      console.log('auto bookmark: ', cfi);\n    });\n  }\n\n  // 关闭弹出菜单\n  closeMenu() {\n    this.setState({openMenu: false});\n  }\n\n  // 打开弹出菜单\n  openMenu(event) {\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iDoc = iframe.contentDocument;\n    let sel = iDoc.getSelection();\n\n    // 如果 note card 正在被展示，则隐藏\n    if (this.state.openNoteCard) {\n      this.setState({openNoteCard: false});\n    }\n    // 使弹出菜单更加灵活可控\n    if (sel.isCollapsed) {\n      this.state.openMenu && this.closeMenu();\n      return;\n    }\n\n    if (this.props.disablePopup) return;\n\n    let rect = this.props.epub.renderer.rangePosition(sel.getRangeAt(0));\n    console.log(rect);\n\n    let menu = document.getElementById('editor-toolbar');\n    let x = event.clientX;\n    let y = event.clientY;\n    let width = parseInt(Util.getStyle(menu, 'width'));\n    let height = parseInt(Util.getStyle(menu, 'height'));\n\n    // TODO: 坐标计算\n    let posX = rect.x + rect.width / 2 + width / 2;\n    let posY = rect.y - height;\n    posX = posX < 0 ? 0 : posX;\n    posY = posY < 0 ? 0 : posY;\n\n    [this.x, this.y] = [x, y];\n    this.setState({openMenu: true, mPosX: posX, mPosY: posY});\n  }\n\n  // 关闭附注编辑框\n  closeNoteCard() {\n    this.setState({openNoteCard: false});\n  }\n\n  // 打开附注编辑框\n  openNoteCard(x, y) {\n    let noteCard = document.getElementById('note-card');\n    let width = parseInt(Util.getStyle(noteCard, 'width'));\n    let height = parseInt(Util.getStyle(noteCard, 'height'));\n\n    console.log(width, height);\n\n    let posX = x - (width / 2);\n    let posY = y - height - 20;\n\n    posX = posX < 0 ? 0 : posX;\n    posY = posY < 0 ? 0 : posY;\n\n    this.setState({openNoteCard: true, nPosX: posX, nPosY: posY});\n  }\n\n  // 设置当前正在被编辑的note\n  setNote(note) {\n    this.setState({note});\n  }\n\n  // 设置当前正在被渲染的note的key\n  setKey(key) {\n    this.key = key;\n  }\n\n  // 获取与本章节相关的 pen\n  getPen() {\n    // 注意点一\n    // 为了每次切换章节时都有与当前文档相关联的 pen\n    let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n\n     this.pen = rangy.createHighlighter(iDoc);\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    classes.forEach((item) => {\n      let config = {\n        ignoreWhiteSpace: true,\n        elementTagName: 'span',\n        elementProperties: {\n          onclick: (event) => {\n            let iDoc = document.getElementsByTagName('iframe')[0].contentDocument;\n            let sel = iDoc.getSelection();\n            if (!sel.isCollapsed) return;\n\n            let {gutter, padding} = this.props;\n            let key = event.currentTarget.dataset.key;\n            let note = this.props.getNote(key);\n            note || console.log('no note with key: ' + key);\n            this.setNote(note);\n            let [x, y] = [event.clientX + gutter, event.clientY + padding];\n            this.openNoteCard(x, y);\n            event.stopPropagation();\n\n            if (this.state.openMenu) this.setState({openMenu: false}); // 修复bug\n          },\n        },\n        onElementCreate: (element) => {\n          element.dataset.key = this.key;\n        },\n      };\n      let applier = rangy.createClassApplier(item, config);\n      this.pen.addClassApplier(applier);\n    });\n  }\n\n  // 渲染本章节的note\n  renderNotes() {\n\n    // TODO: 注意点二\n    console.log('%c renderNotes has been called! ', 'color: cyan; background: #333333');\n\n    let {epub, getNotesByChapter} = this.props;\n    let chapter = epub.renderer.currentChapter;\n\n    if (!chapter) return; // 初次打开书籍，页面尚未渲染\n\n    this.notes = getNotesByChapter(chapter.spinePos);\n    let notes = this.notes;\n    let iframe = document.getElementsByTagName('iframe')[0];\n    let iWin = iframe.contentWindow || iframe.contentDocument.defaultView;\n\n    let sel = rangy.getSelection(iframe);\n    let serial = rangy.serializeSelection(sel, true);\n\n    this.pen && this.pen.removeAllHighlights(); // 为了避免下次反序列化失败，必须先清除已有的高亮\n\n    let classes = ['color-0', 'color-1', 'color-2', 'color-3'];\n\n    notes.forEach((note) => {\n      this.key = note.key;\n      try {\n        let temp = JSON.parse(note.range);\n        temp = [temp];\n        rangy.getSelection(iframe).restoreCharacterRanges(iframe.contentDocument, temp);\n      } catch (e) {\n        console.warn('Exception has been caught when restore character ranges.');\n        return;\n      }\n\n      this.pen.highlightSelection(classes[note.color]);\n    });\n\n    iWin.getSelection().empty(); // 清除文本选取\n    this.state.openMenu && rangy.deserializeSelection(serial, null, iWin); // （为了选取文本后不被上一行代码清除掉）恢复原本的文本选取\n  }\n\n  // 翻页：上一页\n  prev() {\n    this.props.epub.prevPage();\n    this.closeMenu();\n    this.closeNoteCard();\n  }\n\n  // 翻页：下一页\n  next() {\n    this.props.epub.nextPage();\n    this.closeMenu();\n    this.closeNoteCard();\n  }\n\n  render() {\n    const {epub, book, theme, colors, column, gutter, padding, addNote, updateNote, deleteNote, classes} = this.props;\n    let style = {\n      left: gutter,\n      right: gutter,\n      top: padding,\n      bottom: padding,\n    };\n\n    epub.renderer.forceSingle(column === 1); // TODO: 在合适的地方触发重新渲染书籍\n    console.log('%c render view-area. ', 'color: orange; background: #333333');\n    this.renderNotes();\n\n    return (\n      <div id=\"view-area\">\n        <div id=\"page-area\" className={classes.pageArea} style={style}/>\n        <div id=\"prev\" onClick={this.prev} className={classes.prev}>\n          <IconButton className={classes.button}>\n            <LeftArrow className={classes.arrow}/>\n          </IconButton>\n        </div>\n        <div id=\"next\" onClick={this.next} className={classes.next}>\n          <IconButton className={classes.button}>\n            <RightArrow className={classes.arrow}/>\n          </IconButton>\n        </div>\n        <EditorToolbar open={this.state.openMenu}\n                       posX={this.state.mPosX}\n                       posY={this.state.mPosY}\n                       closeMenu={this.closeMenu}\n                       openNoteCard={this.openNoteCard}\n                       addNote={addNote}\n                       setKey={this.setKey}\n                       book={book}\n                       epub={epub}\n                       theme={theme}\n                       colors={colors}\n                       pen={this.pen}\n                       epubTitle={this.props.epubTitle}\n        />\n        <NoteCard open={this.state.openNoteCard}\n                  posX={this.state.nPosX}\n                  posY={this.state.nPosY}\n                  note={this.state.note}\n                  theme={theme}\n                  deleteNote={deleteNote}\n                  updateNote={updateNote}\n                  closeNoteCard={this.closeNoteCard}\n        />\n      </div>\n    );\n  }\n}\n\nViewArea.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ViewArea);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // TODO 修改为更为通用的形式\n      x: this.props.left ? this.props.left : 0, // 可拖动元素的 left 属性的值\n      y: this.props.top ? this.props.top : 0, // 可拖动元素的 top 属性的值\n    };\n\n    // 鼠标初始时的位置\n    this.startX = 0;\n    this.startY = 0;\n    // 可拖动元素的初始位置\n    this.sourceX = 0;\n    this.sourceY = 0;\n    this.element = null; // 可拖动的元素\n\n    this.start = this.start.bind(this);\n    this.move = this.move.bind(this);\n    this.end = this.end.bind(this);\n  }\n\n  start(event) {\n    [this.sourceX, this.sourceY] = [this.state.x, this.state.y];\n    [this.startX, this.startY] = [event.clientX, event.clientY];\n\n    document.addEventListener('mousemove', this.move, false);\n    document.addEventListener('mouseup', this.end, false);\n  }\n\n  move(event) {\n    let [currentX, currentY] = [event.clientX, event.clientY]; // 当前鼠标位置\n\n    // 鼠标移动距离\n    let distX = currentX - this.startX;\n    let distY = currentY - this.startY;\n\n    // 当前元素位置\n    let x = parseInt(this.sourceX + distX);\n    let y = parseInt(this.sourceY + distY);\n\n    // 元素可以设置的最大left和最大top（避免移出屏幕）\n    let maxEX = window.innerWidth - parseFloat(this.getStyle('width'));\n    let maxEY = window.innerHeight - parseFloat(this.getStyle('height'));\n\n    x = x > maxEX ? maxEX : x;\n    x = x < 0 ? 0 : x;\n    y = y > maxEY ? maxEY : y;\n    y = y < 0 ? 0 : y;\n\n    this.setState({x, y});\n  }\n\n  end() {\n    document.removeEventListener('mousemove', this.move);\n    document.removeEventListener('mouseup', this.end);\n  }\n\n  getStyle(attr) {\n    if (document.defaultView.getComputedStyle) {\n      return document.defaultView.getComputedStyle(this.element, null)[attr];\n    } else {\n      return this.element.currentStyle[attr];\n    }\n  }\n\n  render() {\n    let style = {\n      position: 'fixed',\n      left: this.state.x,\n      top: this.state.y,\n    };\n\n    return (\n      <div style={style} onMouseDown={this.start} ref={(element) => {\n        this.element = element\n      }}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nDraggable.propTypes = {\n  left: PropTypes.number,\n  top: PropTypes.number,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Draggable;\n","class Bookmark {\n  constructor(bookKey, cfi, label) {\n    this.key = new Date().getTime() + ''; // 唯一的键\n    this.bookKey = bookKey; // 所属的书籍的键\n    this.cfi = cfi; // 标记阅读位置的cfi\n    this.label = label; // 此项书签的别名\n  }\n}\n\nexport default Bookmark;\n","import React from 'react';\nimport DragHandleIcon from 'material-ui-icons/DragHandle';\nimport FullScreenIcon from 'material-ui-icons/Fullscreen';\nimport FullScreenExitIcon from 'material-ui-icons/FullscreenExit';\nimport SettingsIcon from 'material-ui-icons/Settings';\nimport FormatListBulletedIcon from 'material-ui-icons/FormatListBulleted';\nimport BookmarkIcon from 'material-ui-icons/Bookmark';\nimport ExitToAppIcon from 'material-ui-icons/ExitToApp';\nimport NotesIcon from 'material-ui-icons/Sort';\nimport Draggable from './Draggable';\nimport Bookmark from \"../model/Bookmark\";\nimport './Toolbar.css';\nimport { withRouter, Link } from 'react-router-dom';\n\nclass Toolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFullScreen: false, // 是否进入全屏模式\n      show: false, // 是否显示\n    };\n\n    this.handleFullScreen = this.handleFullScreen.bind(this);\n    this.handleExitFullScreen = this.handleExitFullScreen.bind(this);\n    this.handleScreen = this.handleScreen.bind(this);\n    this.handleSettings = this.handleSettings.bind(this);\n    this.handleNotes = this.handleNotes.bind(this);\n    this.handleBookmarks = this.handleBookmarks.bind(this);\n    this.handleAddBookmark = this.handleAddBookmark.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  // 进入全屏模式\n  handleFullScreen() {\n    let de = document.documentElement;\n\n    if (de.requestFullscreen) {\n      de.requestFullscreen();\n    } else if (de.mozRequestFullScreen) {\n      de.mozRequestFullScreen();\n    } else if (de.webkitRequestFullscreen) {\n      de.webkitRequestFullscreen();\n    } else if (de.msRequestFullscreen) {\n      de.msRequestFullscreen();\n    }\n\n    this.setState({isFullScreen: true});\n  }\n\n  // 退出全屏模式\n  handleExitFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n\n    this.setState({isFullScreen: false});\n  }\n\n  // 点击切换全屏按钮触发\n  handleScreen() {\n    !this.state.isFullScreen ? this.handleFullScreen() : this.handleExitFullScreen();\n  }\n\n  // 点击设置按钮的处理程序\n  handleSettings() {\n    this.props.toggleSettingsDialog(true);\n  }\n\n  // 点击notes按钮的事件处理程序\n  handleNotes() {\n    this.props.toggleNotes(true);\n  }\n\n  // 点击书签列表按钮的处理程序\n  handleBookmarks() {\n    this.props.toggleBookmarks(true);\n  }\n\n  // 点击添加书签按钮的处理程序\n  handleAddBookmark() {\n    //console.log(this.props.epubTitle);\n    let bookKey = this.props.epubTitle.id;\n    let epub = this.props.epub;\n    let cfi = epub.getCurrentLocationCfi();\n    let firstVisibleNode = epub.renderer.findFirstVisible();\n    let label = firstVisibleNode.textContent;\n    label = label && label.trim();\n    label = label || cfi;\n    let bookmark = new Bookmark(bookKey, cfi, label);\n    this.props.handleAddBookmark(bookmark);\n    this.props.toggleMessage(true);\n  }\n\n  // 点击退出按钮的处理程序\n  handleExit() {\n    this.props.history.push('/page3');\n  }\n\n  // 显示toolbar\n  show() {\n    // TODO: 添加自动滑出显示的效果\n    let show = true;\n    this.setState({show});\n  }\n\n  // 隐藏toolbar\n  hide() {\n    // TODO: 添加自动滑入隐藏的效果\n    let show = false;\n    this.setState({show});\n  }\n\n  render() {\n    let fullScreen = {\n      display: this.state.isFullScreen ? 'none' : 'inline-block',\n    };\n    let exitFullScreen = {\n      display: this.state.isFullScreen ? 'inline-block' : 'none',\n    };\n    let showToolbar = {\n      opacity: this.state.show ? '1' : '.3',\n    };\n    let x = window.innerWidth - 300 - 20;\n    let y = window.innerHeight - 40 - 40;\n\n    return (\n      <Draggable left={x} top={y}>\n        <div id=\"toolbar\" className=\"toolbar drag-me\" onMouseOver={this.show} onMouseOut={this.hide} style={showToolbar}>\n          <button className=\"toolbar-btn drag-me\">\n            <DragHandleIcon/>\n          </button>\n          <button className=\"toolbar-btn\" onClick={this.handleScreen}>\n            <span style={fullScreen}>\n              <FullScreenIcon/>\n            </span>\n            <span style={exitFullScreen}>\n              <FullScreenExitIcon/>\n            </span>\n          </button>\n          <button className=\"toolbar-btn\" title=\"settings\" onClick={this.handleSettings}>\n            <SettingsIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"notes\" onClick={this.handleNotes}>\n            <NotesIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"bookmark list\" onClick={this.handleBookmarks}>\n            <FormatListBulletedIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"add bookmark\" onClick={this.handleAddBookmark}>\n            <BookmarkIcon/>\n          </button>\n          <button className=\"toolbar-btn\" title=\"exit\" onClick={this.handleExit}>\n            <ExitToAppIcon/>\n          </button>\n        </div>\n      </Draggable>\n\n    );\n  }\n}\n\nexport default withRouter(Toolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport {grey, orange, green} from 'material-ui/colors';\nimport Button from 'material-ui/Button';\nimport Typography from 'material-ui/Typography';\nimport Divider from 'material-ui/Divider';\nimport Dialog, {\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from 'material-ui/Dialog';\nimport { FormControlLabel } from 'material-ui/Form';\nimport Checkbox from 'material-ui/Checkbox';\nimport SunIcon from 'material-ui-icons/Brightness5';\nimport MoonIcon from 'material-ui-icons/Brightness4';\nimport StyleIcon from 'material-ui-icons/Stars';\nimport ResetIcon from 'material-ui-icons/Restore';\nimport Tooltip from 'material-ui/Tooltip';\nimport Config from \"../service/Config\";\nimport Util from \"../service/Util\";\n\nconst styles = theme => ({\n  root: {\n\n  },\n  card: {\n    minWidth: 400,\n    minHeight: 60,\n    padding: 10,\n    margin: '15px auto',\n    boxShadow: theme.shadows[1],\n    transition: 'box-shadow .3s',\n    '&:hover': {\n      boxShadow: theme.shadows[6],\n    },\n  },\n  icon: {\n    color: grey[700],\n    '&:hover': {\n      color: orange[700],\n      cursor: 'pointer',\n    },\n  },\n  box: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '20 0 10',\n  },\n  colorBox: {\n    width: 360,\n    padding: '20px 0 10px',\n    margin: 'auto',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n  },\n  colorItem: {\n    width: '45%',\n    margin: '5px 0',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  dot: {\n    width: 14,\n    height: 14,\n    display: 'inline-block',\n    borderRadius: '50%',\n    border: '1px solid black',\n    marginRight: 8,\n  },\n  input: {\n    outline: 'none',\n    border: 'none',\n    width: '80%',\n    borderBottom: '1px dotted black',\n    backgroundColor: 'transparent',\n    transition: '.3s',\n    '&:hover': {\n      borderColor: orange[700],\n    },\n    '&:focus': {\n      borderColor: orange[700],\n    },\n  },\n  controlBox: {\n    width: 360,\n    display: 'flex',\n    alignItems: 'center',\n    padding: '5px 10px',\n  },\n  caption: {\n    width: '15%',\n    marginRight: 20,\n    fontSize: 'small',\n    textAlign: 'right',\n    color: grey[700],\n  },\n  checked: {\n    color: green[500],\n  },\n  hide: {\n    display: 'none',\n  }\n});\n\nclass SettingsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.props;\n    this.state = {\n      colors: colors,\n      background: background,\n      gutter: gutter,\n      padding: padding,\n      fontSize: fontSize,\n      lineHeight: lineHeight,\n      letterSpacing: letterSpacing,\n      wordSpacing: wordSpacing,\n      column: column,\n      disablePopup: disablePopup,\n    };\n\n    this.handleClose = this.handleClose.bind(this);\n    this.changeTheme = this.changeTheme.bind(this);\n    this.changeColors = this.changeColors.bind(this);\n    this.changeColumn = this.changeColumn.bind(this);\n    this.changeGutter = this.changeGutter.bind(this);\n    this.changePadding = this.changePadding.bind(this);\n    this.changeFontConfig = this.changeFontConfig.bind(this);\n    this.changeUserStyle = this.changeUserStyle.bind(this);\n    this.resetUserStyle = this.resetUserStyle.bind(this);\n    this.disablePopup = this.disablePopup.bind(this);\n    this.handleColorsChange = this.handleColorsChange.bind(this);\n    this.handleOtherChange = this.handleOtherChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = nextProps;\n    this.setState({\n      colors: colors,\n      background: background,\n      gutter: gutter,\n      padding: padding,\n      fontSize: fontSize,\n      lineHeight: lineHeight,\n      letterSpacing: letterSpacing,\n      wordSpacing: wordSpacing,\n      column: column,\n      disablePopup: disablePopup,\n    });\n  }\n\n  handleClose() {\n    this.props.toggleSettingsDialog(false);\n  }\n\n  handleColorsChange(event) {\n    let index = parseInt(event.target.dataset.color);\n    let colors = this.state.colors;\n    colors[index] = event.target.value;\n    this.setState({colors});\n  }\n\n  handleOtherChange(event) {\n    let name = event.target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  // 改变主题\n  changeTheme(theme) {\n    this.props.toggleTheme(theme);\n    let colors1 = Config.getDefaultConfigObj().colors;\n    let colors2 = ['#F44336', '#F57F17', '#8BC34A', '#2196F3'];\n    let colors = theme ? colors1 : colors2;\n    this.props.setConfig('colors', colors);\n    Util.addDefaultCss(); // 改变了设置，需要为当前页重新应用样式\n  }\n\n  // 改变高亮的颜色\n  changeColors(event) {\n    let colors = Config.get().colors;\n    let value = event.target.value;\n    let i = parseInt(event.target.dataset.color);\n    colors[i] = value;\n    this.props.setConfig('colors', colors);\n    console.log(`change highlight color ${i} to ${value}`);\n    Util.addDefaultCss(); // 改变了颜色，需要为当前页重新应用样式\n  }\n\n  // 改变可阅读区域列数\n  changeColumn(event, value) {\n    value = value ? 1 : 2;\n    this.props.setConfig('column', value);\n    console.log(`change column to ${value}`);\n    // TODO: 为单双列模式设置合适的gutter值\n  }\n\n  // 改变gutter的值\n  changeGutter(event) {\n    let value = parseInt(event.target.value);\n    this.props.setConfig('gutter', value);\n    console.log(`change gutter to ${value}`);\n    // TODO: 添加数值验证（不小于80）\n  }\n\n  // 改变padding的值\n  changePadding(event) {\n    let value = parseInt(event.target.value);\n    this.props.setConfig('padding', value);\n    console.log(`change padding to ${value}`);\n    // TODO: 添加数值验证（不小于10）\n  }\n\n  // 改变与字体相关的配置\n  changeFontConfig(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    let num;\n\n    if (value === 'default') {\n      num = 0;\n    } else if (value !== 'default' && isNaN(value)) {\n      alert('Invalid value!');\n      return;\n    } else {\n      num = parseInt(value);\n    }\n\n    this.props.setConfig(name, num);\n    console.log(`change ${name} to ${num}`);\n    // TODO: 添加数值校验\n    Util.addDefaultCss(); // 改变了设置，需要为当前页重新应用样式\n  }\n\n  // 导入用户自定义样式\n  changeUserStyle(event) {\n    let file = event.target.files[0];\n    let reader = new FileReader();\n\n    if (file.type.indexOf('text') === -1) {\n      alert('Invalid stylesheet!');\n      return;\n    }\n    reader.readAsText(file);\n\n    reader.onerror = () => alert('Error! Please refresh the page and try again.');\n    reader.onload = () => {\n      alert('The stylesheet has been imported.');\n      let style = Util.parseStyle(reader.result);\n      console.log(style);\n      localStorage.setItem('style', JSON.stringify(style));\n      Util.applyCss();\n    };\n  }\n\n  // 重置为默认样式\n  resetUserStyle() {\n    let config = Config.getDefaultConfigObj();\n    this.props.setConfig('colors', config.colors);\n    this.props.setConfig('padding', config.padding);\n    this.props.setConfig('gutter', config.gutter);\n    this.props.setConfig('fontSize', config.fontSize);\n    this.props.setConfig('lineHeight', config.lineHeight);\n    this.props.setConfig('letterSpacing', config.letterSpacing);\n    this.props.setConfig('wordSpacing', config.wordSpacing);\n    Util.resetStyle();\n  }\n\n  // 禁用 popup menu\n  disablePopup(event, value) {\n    this.props.setConfig('disablePopup', value);\n    console.log(`disable popup menu: ${value}`);\n  }\n\n  render() {\n    let { classes } = this.props;\n    let { colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.state;\n\n    let style = {\n      color0: {\n        backgroundColor: colors[0],\n      },\n      color1: {\n        backgroundColor: colors[1],\n      },\n      color2: {\n        backgroundColor: colors[2],\n      },\n      color3: {\n        backgroundColor: colors[3],\n      },\n    };\n\n    return (\n      <div id=\"settings\">\n        <Dialog open={this.props.open} onRequestClose={this.handleClose} className={classes.root}>\n          <DialogTitle>Settings</DialogTitle>\n          <DialogContent>\n            <div className={classes.card} style={style.color0}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">theme</Typography>\n                <Divider/>\n              </div>\n              <div className={classes.box}>\n                <Tooltip placement=\"bottom\" title=\"light theme\">\n                  <SunIcon className={classes.icon} onClick={() => this.changeTheme(true)}/>\n                </Tooltip>\n                <Tooltip placement=\"bottom\" title=\"dark theme\">\n                  <MoonIcon className={classes.icon} style={{marginLeft: 60}} onClick={() => this.changeTheme(false)}/>\n                </Tooltip>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color1}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">color</Typography>\n                <Divider/>\n              </div>\n              <div>\n                <div className={classes.colorBox} onBlur={this.changeColors} onChange={this.handleColorsChange}>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[0]}}/>\n                    <input className={classes.input} data-color=\"0\" value={colors[0]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[1]}}/>\n                    <input className={classes.input} data-color=\"1\" value={colors[1]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[2]}}/>\n                    <input className={classes.input} data-color=\"2\" value={colors[2]}/>\n                  </div>\n                  <div className={classes.colorItem}>\n                    <span className={classes.dot} style={{backgroundColor: colors[3]}}/>\n                    <input className={classes.input} data-color=\"3\" value={colors[3]}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color2}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">page</Typography>\n                <Divider/>\n              </div>\n              <div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>column</span>\n                  <div>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={column === 1}\n                          onChange={this.changeColumn}\n                          classes={{\n                            checked: classes.checked,\n                          }}\n                        />\n                      }\n                      label=\"Use one column\"\n                      title=\"You need to refresh the page.\"\n                    />\n                  </div>\n                </div>\n                <div className={classes.controlBox} onChange={this.handleOtherChange}>\n                  <span className={classes.caption}>gutter</span>\n                  <div>\n                    <input className={classes.input} name=\"gutter\" value={gutter} onBlur={this.changeGutter}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox} onChange={this.handleOtherChange}>\n                  <span className={classes.caption}>padding</span>\n                  <div>\n                    <input className={classes.input} name=\"padding\" value={padding} onBlur={this.changePadding}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color3}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">font</Typography>\n                <Divider/>\n              </div>\n              <div onBlur={this.changeFontConfig} onChange={this.handleOtherChange}>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>font size</span>\n                  <div title=\"Valid range: 10-100\">\n                    <input className={classes.input} name=\"fontSize\" value={fontSize === 0 ? 'default' : fontSize}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>line height</span>\n                  <div title=\"Valid range: 1-100\">\n                    <input className={classes.input} name=\"lineHeight\" value={lineHeight === 0 ? 'default' : lineHeight}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>letter spacing</span>\n                  <div title=\"Valid range: 0-100\">\n                    <input className={classes.input} name=\"letterSpacing\" value={letterSpacing === 0 ? 'default' : letterSpacing}/>\n                  </div>\n                </div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>word spacing</span>\n                  <div title=\"Valid range: 0-100\">\n                    <input className={classes.input} name=\"wordSpacing\" value={wordSpacing === 0 ? 'default' : wordSpacing}/>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color0}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">style</Typography>\n                <Divider/>\n              </div>\n              <div className={classes.box}>\n                <label htmlFor=\"custom-style\">\n                  <Tooltip placement=\"bottom\" title=\"import custom stylesheet\">\n                    <StyleIcon className={classes.icon}/>\n                  </Tooltip>\n                  <input type=\"file\" accept=\"text/css\" id=\"custom-style\" className={classes.hide} onChange={this.changeUserStyle}/>\n                </label>\n                <Tooltip placement=\"bottom\" title=\"reset\">\n                  <ResetIcon className={classes.icon} onClick={this.resetUserStyle} style={{marginLeft: 60}}/>\n                </Tooltip>\n              </div>\n            </div>\n            <div className={classes.card} style={style.color1}>\n              <div>\n                <Typography align=\"left\" type=\"subheading\">other</Typography>\n                <Divider/>\n              </div>\n              <div>\n                <div className={classes.controlBox}>\n                  <span className={classes.caption}>popup</span>\n                  <div>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={disablePopup}\n                          onChange={this.disablePopup}\n                          classes={{\n                            checked: classes.checked,\n                          }}\n                        />\n                      }\n                      label=\"Disable popup menu\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </DialogContent>\n          <DialogActions color=\"primary\">\n            <Button onClick={this.handleClose}>\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nSettingsDialog.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SettingsDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport Grid from 'material-ui/Grid';\nimport Typography from 'material-ui/Typography';\nimport { orange } from 'material-ui/colors';\nimport TextIcon from 'material-ui-icons/TextFields';\nimport RemoveIcon from 'material-ui-icons/RemoveCircleOutline';\nimport DoneIcon from 'material-ui-icons/Done';\n\nconst styles = theme => ({\n  item: {\n    padding: '0 10px',\n    height: 40,\n    overflow: 'hidden',\n    transition: '.3s',\n  },\n  container: {\n    margin: 0,\n  },\n  text: {\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n  input: {\n    width: '100%',\n    border: 'none',\n    outline: 'none',\n    backgroundColor: 'transparent',\n    borderBottom: '1px dotted black',\n    '&:hover': {\n      borderColor: orange[700],\n    },\n    '&:focus': {\n      borderColor: orange[700],\n    },\n  },\n  button: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-around'\n  },\n  icon: {\n    width: 21,\n    height: 21,\n    transition: '.3s',\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n});\n\nclass BookmarkItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      label: this.props.item.label, // 书签展示的内容\n      editable: false, // 是否可编辑书签内容\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  // 点击书签，跳转到指定位置\n  handleClick() {\n    let {item, epub} = this.props;\n    epub.gotoCfi(item.cfi);\n    this.props.handleClose();\n  }\n\n  // 点击删除按钮的事件处理程序\n  handleRemove() {\n    let item = this.props.item;\n    console.log('remove bookmark with key: ', item.key);\n    this.props.deleteBookmark(item.key);\n  }\n\n  // 点击编辑按钮的事件处理程序\n  handleEdit() {\n    this.setState({editable: true});\n  }\n\n  // 点击保存按钮的事件处理程序\n  handleSave() {\n    let bookmark = this.props.item;\n    bookmark.label = this.state.label;\n    this.props.updateBookmark(bookmark);\n    this.setState({editable: false});\n  }\n\n  // 编辑bookmark的label的处理程序\n  handleChange(event) {\n    this.setState({\n      label: event.target.value\n    });\n  }\n\n  render() {\n    const classes = this.props.classes;\n\n    let text = (\n      <Typography noWrap className={classes.text} onClick={this.handleClick}>\n        {this.state.label}\n      </Typography>\n    );\n    let input = (\n      <input type=\"text\" value={this.state.label} onChange={this.handleChange} className={classes.input}/>\n    );\n    let editButton = (\n      <TextIcon className={classes.icon} onClick={this.handleEdit}/>\n    );\n    let saveButton = (\n      <DoneIcon className={classes.icon} onClick={this.handleSave}/>\n    );\n    let element = this.state.editable ? input : text;\n    let button =  this.state.editable ? saveButton : editButton;\n\n    return (\n      <li className={classes.item}>\n        <Grid container align=\"center\" className={classes.container}>\n          <Grid item xs={9}>\n            <div>\n              {element}\n            </div>\n          </Grid>\n          <Grid item xs={3}>\n            <div className={classes.button}>\n              {button}\n              <RemoveIcon className={classes.icon} onClick={this.handleRemove}/>\n            </div>\n          </Grid>\n        </Grid>\n      </li>\n    );\n  }\n}\n\nBookmarkItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(BookmarkItem);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport Typography from 'material-ui/Typography';\nimport Drawer from 'material-ui/Drawer';\nimport BookmarkItem from './Bookmark';\nimport Button from 'material-ui/Button'\nconst styles = theme => ({\n  title: {\n    marginTop: 10,\n  },\n  list: {\n    width: 280,\n    padding: 0,\n    listStyle: 'none',\n    overflowX: 'hidden',\n  },\n});\n\nclass Bookmarks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {open: true};\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleBookmarks(false);\n  }\n\n  render() {\n    const classes = this.props.classes;\n\n    return (\n      <div id=\"bookmarks\">\n        <Drawer open={this.props.open} onRequestClose={this.handleClose} >\n          <div className={classes.title}>\n            <Typography type=\"headline\" align=\"center\" gutterBottom>Bookmarks</Typography>\n          </div>\n          <ul className={classes.list}>\n            {\n              this.props.bookmarks.map(item => {\n                return (\n                  <BookmarkItem\n                    key={item.key}\n                    item={item}\n                    epub={this.props.epub}\n                    handleClose={this.handleClose}\n                    updateBookmark={this.props.updateBookmark}\n                    deleteBookmark={this.props.deleteBookmark}\n                  />\n                );\n              })\n            }\n          </ul>\n          <Button type=\"primary\" onClick={this.handleClose}>CLOSE</Button>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nBookmarks.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Bookmarks);\n","// 数据库访问的工具类\n// TODO 使用相应的IndexedDB库以提高查询效率\nclass DBUtil {\n  constructor(dbName, storeName, version = 1) {\n    if (!window.indexedDB) {\n      console.error(\"Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.\");\n      return {};\n    }\n\n    this.dbName = dbName;\n    this.storeName = storeName;\n    this.version = version;\n    this.db = null;\n\n    let request = indexedDB.open(dbName, version);\n    request.onsuccess = e => {\n      this.db = e.target.result;\n    };\n    request.onerror = e => {\n      console.error('Something bad happened while trying to open:' + e.target.errorCode);\n    };\n    request.onupgradeneeded = e => {\n      this.db = e.target.result;\n      if (!this.db.objectStoreNames.contains(storeName)) {\n        // 存入数据库的所有对象都必须拥有唯一的 key 属性作为键\n        this.db.createObjectStore(storeName, {keyPath: 'key'});\n      } else {\n        console.log('DB version changed, db version: ', this.db.version);\n      }\n    };\n  }\n\n  open(success, error) {\n    let req = indexedDB.open(this.dbName);\n    req.onsuccess = e => {\n      console.log(`open database ${this.dbName} successfully`);\n      this.db = e.target.result;\n      return success ? success() : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t open database ${this.dbName}`);\n      return error ? error() : '';\n    };\n  }\n\n  add(value, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.add(value);\n    req.onsuccess = e => {\n      return success ? success(e.target.result) : '';\n      console.log(`add data to database ${this.dbName} -> ${this.storeName} successfully`);\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t add data to database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  remove(key, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.delete(key);\n    req.onsuccess = e => {\n      console.log(`remove data with key ${key} from database ${this.dbName} -> ${this.storeName} successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t remove data with key ${key} from database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  get(key, success, error) {\n    const t = this.db.transaction(this.storeName, 'readonly');\n    const store = t.objectStore(this.storeName);\n    let req = store.get(key);\n    req.onsuccess = e => {\n      console.log(`get data from database ${this.dbName} -> ${this.storeName} successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t get data with key ${key} from ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  getAll(success, error) {\n    const t = this.db.transaction(this.storeName, 'readonly');\n    const store = t.objectStore(this.storeName);\n    let req = store.openCursor();\n    let result = [];\n    req.onsuccess = e => {\n      let cursor = e.target.result;\n      if (cursor) {\n        result.push(cursor.value);\n        cursor.continue();\n      } else {\n        console.log(`get all data from database ${this.dbName} -> ${this.storeName} successfully`);\n        success(result);\n      }\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t get data from database ${this.dbName} -> ${this.storeName}`);\n      return error ? error() : '';\n    };\n  }\n\n  update(value, success, error) {\n    const t = this.db.transaction(this.storeName, 'readwrite');\n    const store = t.objectStore(this.storeName);\n    let req = store.put(value);\n    req.onsuccess = e => {\n      console.log(`update data successfully`);\n      return success ? success(e.target.result) : '';\n    };\n    req.onerror = () => {\n      console.error(`Can\\'t update data`);\n      return error ? error() : '';\n    };\n  }\n\n  close() {\n    this.db.close();\n  }\n}\n\nexport default DBUtil;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport { grey, orange } from 'material-ui/colors';\nimport Typography from 'material-ui/Typography';\nimport ArrowIcon from 'material-ui-icons/ArrowForward';\nimport ClearIcon from 'material-ui-icons/Clear';\n\nconst styles = theme => ({\n  item: {\n    width: '90%',\n    height: 80,\n    padding: 10,\n    margin: '15px auto',\n    borderRadius: 5,\n    display: 'flex',\n    alignItems: 'center',\n    boxShadow: theme.shadows[1],\n    transition: '.3s',\n    '&:hover': {\n      boxShadow: theme.shadows[6],\n    }\n  },\n  noteContent: {\n    width: '70%',\n    flexGrow: '1',\n  },\n  input: {\n    border: 'none',\n    outline: 'none',\n    color: grey[600],\n    width: '100%',\n    backgroundColor: 'transparent',\n    borderBottom: '1px dotted black',\n  },\n  icon: {\n    width: 18,\n    height: 18,\n    color: grey[700],\n    display: 'block',\n    transition: '.3s',\n    '&:hover': {\n      cursor: 'pointer',\n      color: orange[700],\n    },\n  },\n});\n\nclass Note extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      note: this.props.note.note, // note的内容\n      editable: false, // 是否可编辑note内容\n    };\n\n    this.handleJump = this.handleJump.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleJump() {\n    this.props.handleJump(this.props.note.cfi);\n  }\n\n  handleDelete() {\n    this.props.deleteNote(this.props.note.key);\n  }\n\n  handleEdit() {\n    this.setState({editable: true});\n  }\n\n  handleChange(event) {\n    this.setState({note: event.target.value});\n  }\n\n  handleBlur(event) {\n    let note = this.props.note;\n    note.note = event.target.value;\n    this.props.updateNote(note);\n    this.setState({editable: false});\n    console.log('note has been updated!');\n  }\n\n  render() {\n    const {note, colors, classes} = this.props;\n    let style = {\n      backgroundColor: colors[note.color],\n    };\n    let margin = {\n      marginTop: 15,\n    };\n\n    let text = (\n      <Typography noWrap\n                  color={'secondary'}\n                  onClick={this.handleEdit}\n      >\n        {this.state.note}\n      </Typography>\n    );\n    let input = (\n      <input type=\"text\"\n             autoFocus=\"autofocus\"\n             value={this.state.note}\n             className={classes.input}\n             onChange={this.handleChange}\n             onBlur={this.handleBlur}\n      />\n    );\n\n    return (\n      <li>\n        <div style={style} className={classes.item}>\n          <div className={classes.noteContent}>\n            <div>\n              <Typography noWrap type={'body2'}>{note.text}</Typography>\n            </div>\n            <div>\n              {this.state.editable ? input : text}\n            </div>\n          </div>\n          <div>\n            <ClearIcon className={classes.icon} onClick={this.handleDelete}/>\n            <ArrowIcon className={classes.icon} onClick={this.handleJump} style={margin}/>\n          </div>\n        </div>\n      </li>\n    );\n  }\n}\n\nNote.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Note);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from 'material-ui/styles';\nimport Typography from 'material-ui/Typography';\nimport Divider from 'material-ui/Divider';\nimport Button from 'material-ui/Button';\nimport Drawer from 'material-ui/Drawer';\nimport Note from './Note';\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  title: {\n    marginTop: 10,\n  },\n  list: {\n    width: 280,\n    padding: 0,\n    listStyle: 'none',\n    flexGrow: 2,\n    overflowX: 'hidden',\n  },\n  foot: {\n    display: 'flex',\n    flexShrink: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    width: '100%',\n    height: 40,\n    padding: '0 10px',\n  },\n});\n\nclass Notes extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleJump = this.handleJump.bind(this);\n    this.handleExport = this.handleExport.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleNotes(false);\n  }\n\n  handleJump(cfi) {\n    this.props.epub.gotoCfi(cfi);\n  }\n\n  handleExport() {\n    this.props.toggleExport(true);\n  }\n\n  render() {\n    const {notes, colors, classes} = this.props;\n\n    return (\n      <div id=\"notes\">\n        <Drawer open={this.props.open} onRequestClose={this.handleClose}  onClick={this.handleClose} anchor=\"right\" className={classes.root}>\n          <div className={classes.title}>\n            <Typography type=\"headline\" align=\"center\" gutterBottom>Notes</Typography>\n          </div>\n          <ul className={classes.list}>\n            {\n              notes.map((item) => {\n                return (\n                  <Note key={item.key}\n                        note={item}\n                        colors={colors}\n                        deleteNote={this.props.deleteNote}\n                        updateNote={this.props.updateNote}\n                        handleJump={this.handleJump}\n                  />\n                );\n              })\n            }\n          </ul>\n          <Divider/>\n\n          <div className={classes.foot}>\n            <Button onClick={this.handleExport} color=\"accent\" dense>\n              export\n            </Button>\n          </div>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nNotes.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Notes);\n","import React from 'react';\nimport Snackbar from 'material-ui/Snackbar';\nimport Button from 'material-ui/Button';\n\nclass Message extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleMessage(false);\n  }\n\n  render() {\n    let {open} = this.props;\n\n    return (\n      <Snackbar\n        anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n        open={open}\n        autoHideDuration={4000}\n        onRequestClose={this.handleClose}\n        SnackbarContentProps={{\n          'aria-describedby': 'message',\n        }}\n        message={<span id=\"message\">Add bookmark successfully.</span>}\n        action={[\n          <Button key=\"dismiss\" color=\"accent\" dense onClick={this.handleClose}>\n            DISMISS\n          </Button>,\n        ]}\n      />\n    );\n  }\n}\n\nexport default Message;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from 'material-ui/styles';\nimport {grey, orange} from 'material-ui/colors';\nimport IconButton from 'material-ui/IconButton';\nimport CopyIcon from 'material-ui-icons/ContentCut';\nimport Dialog from 'material-ui/Dialog';\nimport Divider from 'material-ui/Divider';\nimport CloseIcon from 'material-ui-icons/Close';\nimport Slide from 'material-ui/transitions/Slide';\nimport Tooltip from 'material-ui/Tooltip';\n\nconst styles = theme => ({\n  head: {\n    width: '100%',\n    height: 60,\n    padding: '0 30px',\n    top: 0,\n    position: 'fixed',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n    borderBottomStyle: 'solid',\n    borderColor: theme.palette.text.divider,\n    backgroundColor: theme.palette.background.paper,\n  },\n  logo: {\n    fontFamily: '\\'Titillium Web\\', sans-serif',\n    fontSize: '1.5rem',\n    color: theme.palette.text.primary,\n  },\n  headRight: {\n    display: 'flex',\n  },\n  icon: {\n    width: 20,\n    height: 20,\n  },\n  article: {\n    overflowY: 'auto',\n    width: '100vw',\n    height: '100vh',\n    marginTop: 60,\n  },\n  page: {\n    width: 660,\n    margin: '50px auto 0',\n    fontFamily: '\\'Helvetica Neue\\', \\'Arial\\', \\'PingFang SC\\', \\'Hiragino Sans GB\\', \\'Microsoft YaHei\\', \\'WenQuanYi Micro Hei\\', sans-serif',\n    color: theme.palette.text.primary,\n  },\n  title: {\n    fontFamily: 'Georgia, Palatino, serif',\n    fontSize: '24px',\n    fontWeight: 400,\n    lineHeight: '30px',\n    textAlign: 'center',\n    paddingBottom: 10,\n  },\n  note: {\n    margin: '20px 0',\n  },\n  quote: {\n    borderColor: orange[400],\n    borderLeft: '6px solid',\n    backgroundColor: grey[200],\n    borderRadius: '5px',\n    padding: '15px 10px',\n    color: 'rgba(0, 0, 0, 0.87)',\n  },\n  annotation: {\n    marginTop: '20px',\n    fontSize: '14px',\n    paddingLeft: '16px',\n  },\n});\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nclass ExportPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.generateArticle = this.generateArticle.bind(this);\n    this.handleCopy = this.handleCopy.bind(this);\n  }\n\n  handleClose() {\n    this.props.toggleExport(false);\n  }\n\n  // format为则true导出为plain text，否则导出为markdown\n  generateArticle(format) {\n    let {notes} = this.props;\n    let article = '';\n    let divider = format ? '\\n*** *** ***\\n\\n' : '\\n* * * * * *\\n\\n';\n\n    notes.forEach((note) => {\n      let fragment = format ? '' : '> ';\n      fragment += note.text;\n      fragment += '\\n\\n';\n      fragment += note.note ? `${note.note}\\n` : '';\n      fragment += divider;\n      article += fragment;\n    });\n\n    return article;\n  }\n\n  copyHandler = (event) => {\n    let text = this.generateArticle(true);\n    event.clipboardData.setData('text/plain', text);\n    event.preventDefault();\n    console.log('notes copied!');\n    alert('Notes has been copied.');\n  };\n\n  // 复制纯文本\n  handleCopy() {\n    document.addEventListener('copy', this.copyHandler);\n    document.execCommand('copy', false, null);\n    setTimeout(() => {\n      document.removeEventListener('copy', this.copyHandler);\n    }, 1000);\n  }\n\n  render() {\n    const { open, notes, book, classes } = this.props;\n\n    return (\n      <div id=\"export-panel\">\n        <Dialog\n          fullScreen\n          open={open}\n          onRequestClose={this.handleClose}\n          transition={Transition}\n        >\n          <div className={classes.head}>\n            <div className={classes.logo}>\n              Notes Preview\n            </div>\n            <div className={classes.headRight}>\n              <Tooltip title=\"copy\" placement=\"bottom\">\n                <IconButton onClick={this.handleCopy}>\n                  <CopyIcon className={classes.icon}/>\n                </IconButton>\n              </Tooltip>\n              <IconButton onClick={this.handleClose}>\n                <CloseIcon/>\n              </IconButton>\n            </div>\n          </div>\n          <div className={classes.article}>\n            <div className={classes.page}>\n              <h1 className={classes.title}>{ book.name }</h1>\n              {\n                notes.map((note) => {\n                  return (\n                    <div key={note.key}>\n                      <div className={classes.note}>\n                        <blockquote className={classes.quote}>\n                          {note.text}\n                        </blockquote>\n                        <p className={classes.annotation}>\n                          {note.note}\n                        </p>\n                      </div>\n                      <Divider/>\n                    </div>\n                  );\n                })\n              }\n            </div>\n          </div>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nExportPanel.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ExportPanel);\n","import React, { Component } from 'react';\nimport { Route, Link ,withRouter} from \"react-router-dom\";\nimport { enquireScreen } from 'enquire-js';\nimport Header from './Home/Nav0';\nimport Footer from './Home/Footer0';\nimport Home from './Home';\nimport Page3 from './Page3';\nimport BookIndex from './Page2';\n//import BookIndex from './Page2/book_index_container';\nimport Book from './Page2/book_show_container';\n//import  Reader from\"./reader\"\nimport SReader from './Reader/Control/App'\nimport Session from \"./Session\"\nimport Admin from \"./Page4\"\nimport {\n    Nav00DataSource,\n    Footer00DataSource,\n} from './Home/data.source.js';\n\nlet isMobile;\nenquireScreen((b) => {\n    isMobile = b;\n});\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isMobile,\n        };\n    }\n    componentDidMount() {\n        // 适配手机屏幕;\n        enquireScreen((b) => {\n            this.setState({ isMobile: !!b });\n        });\n    }\n    controlHeader() {\n        //console.log(this.props.history.location.pathname);\n        if (this.props.history.location.pathname.indexOf('/page2/reader') !== -1) return null;\n        return <Header dataSource={Nav00DataSource} isMobile={this.state.isMobile} />;\n    }\n    controlFooter() {\n        if (this.props.history.location.pathname.indexOf('/page2/reader') !== -1) return null;\n        return <Footer dataSource={Footer00DataSource} isMobile={this.state.isMobile} />;\n    }\n    render() {\n        return (\n\n                <div>\n\n                    {this.controlHeader()}\n                    <Route exact path=\"/\" component={Home} />\n                    <Route exact path=\"/page2\" component={BookIndex}  />\n                    <Route exact path=\"/page2/:id\" component={ Book }/>\n                    <Route exact path =\"/admin\" component={Admin}/>\n                    <Route exact path=\"/page3\" component={Page3} />\n                    <Route exact path=\"/session\" component={Session} />\n                    <Route exact path=\"/page2/reader/:id\" component={SReader}/>\n                    {this.controlFooter()}\n\n                </div>\n\n        );\n    }\n}\n\nexport default withRouter(App);","import React from 'react';\nimport Navigation from './Navigation';\nimport ViewArea from './ViewArea';\nimport Toolbar from './Toolbar';\nimport SettingsDialog from './SettingsDialog';\nimport Bookmarks from './Bookmarks';\nimport DBUtil from '../service/DBUtil';\nimport Notes from './Notes';\nimport Config from '../service/Config';\nimport Message from './Message';\nimport ExportPanel from './ExportPanel';\nconst ePub = window.ePub;\n\n//import ePub from 'epubjs'\nconst rangy = window.rangy;\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openSettings: false, // 打开设置面板\n      openBookmarks: false, // 打开书签列表\n      openNotes: false, // 打开笔记列表\n      openMessage: false, // 打开消息通知\n      openExport: false, // 打开note导出面板\n      bookmarks: [], // 书签列表\n      notes: [], // note列表\n      colors: Config.get().colors, // note的四种颜色\n      background: Config.get().background, // 阅读区域的背景色\n      gutter: Config.get().gutter, // 阅读区域两侧预留的间隔\n      padding: Config.get().padding, // 阅读区域上下两侧预留的间隔\n      fontSize: Config.get().fontSize, // 字体大小\n      lineHeight: Config.get().lineHeight, // 行高\n      letterSpacing: Config.get().letterSpacing, // 字间距\n      wordSpacing: Config.get().wordSpacing, // 词间距（限英语）\n      column: Config.get().column, // 列数\n      disablePopup: Config.get().disablePopup, // 禁用弹出菜单\n    };\n\n    this.epub = null;\n\n    this.toggleSettingsDialog = this.toggleSettingsDialog.bind(this);\n    this.toggleBookmarks = this.toggleBookmarks.bind(this);\n    this.toggleNotes = this.toggleNotes.bind(this);\n    this.toggleMessage = this.toggleMessage.bind(this);\n    this.toggleExport = this.toggleExport.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n    this.deleteBookmark = this.deleteBookmark.bind(this);\n    this.updateBookmark = this.updateBookmark.bind(this);\n    this.addNote = this.addNote.bind(this);\n    this.deleteNote = this.deleteNote.bind(this);\n    this.updateNote = this.updateNote.bind(this);\n    this.getNote = this.getNote.bind(this);\n    this.getNotesByChapter = this.getNotesByChapter.bind(this);\n    this.setConfig = this.setConfig.bind(this);\n  }\n\n  componentWillMount() {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.getAll(result => {\n          let bookmarksArr;\n          bookmarksArr = result.filter(item => item.bookKey === this.props.epubTitle.id);\n          this.setState({bookmarks: bookmarksArr});\n        });\n      }\n    );\n\n    let noteDBAccess = new DBUtil('notes', 'note');\n    noteDBAccess.open(\n      () => {\n        noteDBAccess.getAll(result => {\n          let noteArr;\n          noteArr = result.filter(item => item.bookKey === this.props.epubTitle.id);\n          this.setState({notes: noteArr});\n        });\n      }\n    );\n    //console.log(this.props.epubTitle)\n    this.epub = ePub( window.webBase+\"api/epub/\"+this.props.epubTitle.id+\".epub\");\n  }\n\n  componentDidMount() {\n    rangy.init(); // 初始化\n  }\n\n  // 为state的属性设置相应的值\n  setConfig(key, value) {\n    this.setState({[key]: value});\n    Config.set(key, value);\n  }\n\n  toggleSettingsDialog(open) {\n    this.setState({openSettings: open});\n  }\n\n  toggleBookmarks(open) {\n    this.setState({openBookmarks: open});\n  }\n\n  toggleNotes(open) {\n    this.setState({openNotes: open});\n  }\n\n  toggleMessage(open) {\n    this.setState({openMessage: open});\n  }\n\n  toggleExport(open) {\n    this.setState({openExport: open});\n  }\n\n  // 添加书签\n  addBookmark(bookmark) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.add(bookmark);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr.push(bookmark);\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 删除书签\n  deleteBookmark(key) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.remove(key);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr = bookmarksArr.filter(item => item.key !== key);\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 更新书签内容\n  updateBookmark(bookmark) {\n    let dbAccess = new DBUtil('bookmarks', 'bookmark');\n    dbAccess.open(\n      () => {\n        dbAccess.update(bookmark);\n        let bookmarksArr = this.state.bookmarks;\n        bookmarksArr.forEach((item, i, arr) => {\n          if (item.key === bookmark.key)\n            arr[i] = bookmark;\n        });\n        this.setState({bookmarks: bookmarksArr});\n      }\n    );\n  }\n\n  // 添加note\n  addNote(note) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.add(note);\n        let noteArr = this.state.notes;\n        noteArr.push(note);\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 删除note\n  deleteNote(key) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.remove(key);\n        let noteArr = this.state.notes;\n        noteArr = noteArr.filter(item => item.key !== key);\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 更新note内容\n  updateNote(note) {\n    let dbAccess = new DBUtil('notes', 'note');\n    dbAccess.open(\n      () => {\n        dbAccess.update(note);\n        let noteArr = this.state.notes;\n        noteArr.forEach((item, i, arr) => {\n          if (item.key === note.key)\n            arr[i] = note;\n        });\n        this.setState({notes: noteArr});\n      }\n    );\n  }\n\n  // 获取指定key的note\n  getNote(key) {\n    let notes = this.state.notes;\n    let target = null;\n\n    notes.forEach((item) => {\n      if (item.key === key) target = item;\n    });\n\n    return target;\n  }\n\n  // 获取指定章节的note\n  getNotesByChapter(chapter) {\n    let notes = this.state.notes;\n\n    return notes.filter(item => item.chapter === chapter);\n  }\n\n  render() {\n    let epub = this.epub;\n    let {readingBook} = this.props;\n    let { openSettings, openBookmarks, openNotes, openMessage, openExport, bookmarks, notes, colors, background, gutter, padding, fontSize, lineHeight, letterSpacing, wordSpacing, column, disablePopup } = this.state;\n\n    return (\n      <div id=\"viewer\">\n        <Navigation epub={epub}\n                    theme={this.props.theme}\n        />\n        <ViewArea epub={epub}\n                  book={this.props.readingBook}\n                  addNote={this.addNote}\n                  getNote={this.getNote}\n                  deleteNote={this.deleteNote}\n                  updateNote={this.updateNote}\n                  getNotesByChapter={this.getNotesByChapter}\n                  theme={this.props.theme}\n                  background={background}\n                  gutter={gutter}\n                  padding={padding}\n                  colors={colors}\n                  column={column}\n                  disablePopup={disablePopup}\n                  epubTitle={this.props.epubTitle}\n        />\n        <Toolbar handleReading={this.props.handleReading}\n                 toggleMessage={this.toggleMessage}\n                 toggleSettingsDialog={this.toggleSettingsDialog}\n                 toggleBookmarks={this.toggleBookmarks}\n                 toggleNotes={this.toggleNotes}\n                 handleAddBookmark={this.addBookmark}\n                 readingBook={this.props.readingBook}\n                 epub={epub}\n                 epubTitle={this.props.epubTitle}\n        />\n        <Bookmarks open={openBookmarks}\n                   toggleBookmarks={this.toggleBookmarks}\n                   bookmarks={bookmarks}\n                   deleteBookmark={this.deleteBookmark}\n                   updateBookmark={this.updateBookmark}\n                   getBookmark={this.getBookmark}\n                   epub={epub}\n                   epubTitle={this.props.epubTitle}\n        />\n        <Notes open={openNotes}\n               toggleNotes={this.toggleNotes}\n               toggleExport={this.toggleExport}\n               notes={notes}\n               colors={colors}\n               deleteNote={this.deleteNote}\n               updateNote={this.updateNote}\n               epub={epub}\n        />\n        <SettingsDialog open={openSettings}\n                        toggleSettingsDialog={this.toggleSettingsDialog}\n                        toggleTheme={this.props.toggleTheme}\n                        setConfig={this.setConfig}\n                        colors={colors}\n                        background={background}\n                        gutter={gutter}\n                        padding={padding}\n                        fontSize={fontSize}\n                        lineHeight={lineHeight}\n                        letterSpacing={letterSpacing}\n                        wordSpacing={wordSpacing}\n                        column={column}\n                        disablePopup={disablePopup}\n        />\n        <Message open={openMessage} toggleMessage={this.toggleMessage}/>\n        <ExportPanel open={openExport}\n                     book={readingBook}\n                     notes={notes}\n                     theme={this.props.theme}\n                     toggleExport={this.toggleExport}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Viewer;\n","import React from 'react';\nimport Viewer from './Viewer';\nimport { MuiThemeProvider, createMuiTheme } from 'material-ui/styles';\nimport Config from \"../service/Config\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isReading: true, // 书籍是否正在被阅读\n      readingBook: {\n        author:\"\",\n        description:\"\",\n        key:\"\",\n        name:\"\",\n        content:[],\n      }, // 正在被阅读的书籍对象\n      theme: Config.get().theme, // true为light主题，false为dark主题\n    };\n\n    this.handleReading = this.handleReading.bind(this);\n    this.handleReadingBook = this.handleReadingBook.bind(this);\n    this.toggleTheme = this.toggleTheme.bind(this);\n  }\n\n  handleReading(isReading) {\n    this.setState({isReading: isReading});\n  }\n\n  handleReadingBook(book) {\n    this.setState({readingBook: book});\n  }\n\n  // 切换主题\n  toggleTheme(theme) {\n    this.setState({theme});\n    Config.set('theme', theme);\n  }\n\n  render() {\n    let {isReading, readingBook, theme} = this.state;\n\n    const themeType = createMuiTheme({\n      palette: {\n        type: theme ? 'light' : 'dark',\n      },\n    });\n\n    let viewer = (\n      <Viewer handleReading={this.handleReading}\n              readingBook={readingBook}\n              toggleTheme={this.toggleTheme}\n              theme={theme}\n              epubTitle = {this.props.match.params}\n      />\n    );\n    let element = viewer;\n    //let element = viewer;\n    let bgColor;\n    if (isReading && theme) bgColor = Config.get().background || '#fff';\n    else if (isReading && !theme) bgColor = '#424242';\n    else if (!isReading && theme) bgColor = '#f1f2f3';\n    else if (!isReading && !theme) bgColor = '#424242';\n    document.body.style.backgroundColor = bgColor;\n\n    return (\n      <MuiThemeProvider theme={themeType}>\n        <div id=\"app\">\n          {element}\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { Form, Icon, Input, Button,Alert} from 'antd';\r\nconst Search = Input.Search;\r\nclass SessionForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            username2:\"\",\r\n            password2:\"\",\r\n            errors: this.props.errors\r\n        };\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.guestSubmit = this.guestSubmit.bind(this);\r\n        this.handleRegister = this.handleRegister.bind(this);\r\n        this.toAdmin = this.toAdmin.bind(this);\r\n    }\r\n\r\n\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const user = Object.assign({}, this.state);\r\n        this.props.clearErrors();\r\n        this.props.processForm(user)\r\n            .then(() => { this.setState({ errors: this.props.errors }); });\r\n\r\n    }\r\n    handleRegister(e) {\r\n        e.preventDefault();\r\n        const user = {\r\n            username:this.state.username2,\r\n            password:this.state.password2,\r\n        };\r\n        this.props.clearErrors();\r\n        this.props.processRegister(user)\r\n            .then(() => { this.setState({ errors: this.props.errors }); });\r\n\r\n    }\r\n    componentWillReceiveProps() {\r\n        if (this.props.errors.length < 1) {\r\n            this.setState({ errors: []});\r\n        }\r\n    }\r\n\r\n    guestSubmit(e) {\r\n        e.preventDefault();\r\n        this.props.processForm({\r\n            username: \"guest\",\r\n            password: \"password\"\r\n        });\r\n    }\r\n\r\n    update(field) {\r\n        return e => this.setState({\r\n            [field]: e.currentTarget.value\r\n        });\r\n    }\r\n\r\n    toAdmin() {\r\n        this.props.history.push(\"/admin\");\r\n    }\r\n    guestlogin() {\r\n        if(this.props.loggedIn === false) {\r\n            return (\r\n                <Button type=\"primary\"onClick={this.guestSubmit} className=\"login-form-button\">\r\n                    以guest身份登录\r\n                </Button>\r\n            );\r\n        }\r\n    }\r\n    handleAlert() {\r\n        if(this.props.loggedIn === false) {\r\n            return (\r\n                <Alert message=\"未登录\" type=\"error\" />\r\n            );\r\n        } else {\r\n            return (\r\n                <Alert message=\"已登录\" type=\"success\" />\r\n            );\r\n        }\r\n    }\r\n    displayLogin() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        if(this.props.loggedIn === false){\r\n            return (\r\n                <Form onSubmit={this.handleSubmit} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('username', {\r\n                            rules: [{ required: true, message: 'Please input your username!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                placeholder=\"Username\"\r\n                                onChange={this.update('username')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('password', {\r\n                            rules: [{ required: true, message: 'Please input your Password!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                onChange={this.update('password')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            登录\r\n                        </Button>\r\n                        <div className=\"login-form-button\">{ this.guestlogin() }</div>\r\n                    </Form.Item>\r\n                </Form>\r\n            )\r\n        }\r\n    }\r\n    render() {\r\n        //document.title = \"Awesome Readers\";\r\n        const { getFieldDecorator } = this.props.form;\r\n        return (\r\n            <div className=\"login-form\">\r\n                <div>{ this.handleAlert() }</div>\r\n                <Button type=\"primary\" onClick={this.props.logout}>登出</Button>\r\n                {this.displayLogin()}\r\n\r\n\r\n                <Form onSubmit={this.handleRegister} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('username2', {\r\n                            rules: [{ required: true, message: 'Please input your username!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                placeholder=\"Username\"\r\n                                onChange={this.update('username2')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('password2', {\r\n                            rules: [{ required: true, message: 'Please input your Password!' }],\r\n                        })(\r\n                            <Input\r\n                                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                onChange={this.update('password2')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            注册\r\n                        </Button>\r\n\r\n                    </Form.Item>\r\n                </Form>\r\n\r\n                <Search placeholder=\"输入管理员口令\"\r\n                        enterButton=\"管理员登录\"\r\n                        onSearch={(value) => {\r\n                    if(value === \"root\") this.toAdmin()\r\n                }}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst WrappedNormalLoginForm = Form.create({ name: 'normal_login' })(SessionForm);\r\nexport default withRouter(WrappedNormalLoginForm );\r\n","import { connect } from 'react-redux';\r\nimport { receiveErrors, clearErrors } from '../../actions/error_actions';\r\nimport { login, logout, signup ,register } from '../../actions/session_actions';\r\nimport SessionForm from './session_form';\r\n\r\nconst mapStateToProps = ({ session, errors }) => {\r\n    return {\r\n        loggedIn: Boolean(session.currentUser),\r\n        errors\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        processForm: user => dispatch(login(user)),\r\n        processRegister: user => dispatch(register(user)),\r\n        clearErrors: () => { return dispatch(clearErrors()); },\r\n        logout: ()=>{return dispatch(logout())}\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(SessionForm);\r\n","import React from 'react';\r\nimport {withRouter} from 'react-router';\r\nimport SessionFormContainer from './session_form_container';\r\nimport './index.css'\r\nclass Session extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.loggedIn) {\r\n            this.props.history.push('/books');\r\n        }\r\n    }\r\n\r\n    top() {\r\n        return(\r\n            <section className='sign-up-container'>\r\n                <SessionFormContainer />\r\n            </section>\r\n        );\r\n\r\n    }\r\n    //this.props.loggedIn === false\r\n    render() {\r\n        if (1) {\r\n            return (\r\n                <div className='landing-page'>\r\n                    { this.top() }\r\n                </div>\r\n\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(Session);\r\n","import React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { Form, Icon, Input, Button, Checkbox ,Upload, message } from 'antd';\r\nimport \"./index.css\"\r\nimport {receiveErrors} from \"../../actions/error_actions\";\r\nimport {receiveCurrentUser} from \"../../actions/session_actions\";\r\n\r\nconst Search = Input.Search;\r\nclass Index extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state= {\r\n            author:\"\",\r\n            title:\"\",\r\n            description:\"\",\r\n            cover_img_url:\"\",\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleSubmit() {\r\n        const book = Object.assign({}, this.state);\r\n        console.log(book);\r\n        fetch( window.webBase+\"api/upload\", {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            method: 'POST',\r\n            body: JSON.stringify(book)\r\n        }).then(res=>res.json()).then(json => (console.log(json)\r\n        ), err => (\r\n           console.log(err)\r\n        ))\r\n    }\r\n    update(field) {\r\n        return e => this.setState({\r\n            [field]: e.currentTarget.value\r\n        });\r\n    }\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        const props = {\r\n            name: 'epub',\r\n            action: window.webBase+\"api/upload_epub\",\r\n            headers: {\r\n                authorization: 'authorization-text',\r\n            },\r\n            onChange(info) {\r\n                if (info.file.status !== 'uploading') {\r\n                    console.log(info.file, info.fileList);\r\n                }\r\n                if (info.file.status === 'done') {\r\n                    message.success(`${info.file.name} file uploaded successfully`);\r\n                } else if (info.file.status === 'error') {\r\n                    message.error(`${info.file.name} file upload failed.`);\r\n                }\r\n            },\r\n        };\r\n        return (\r\n            <div className=\"admin-page\">\r\n            <div className=\"login-form\">\r\n                <h1 className='logo'><strong>上传书籍</strong></h1>\r\n                <Form onSubmit={this.handleSubmit} >\r\n                    <Form.Item>\r\n                        {getFieldDecorator('author')(\r\n                            <Input\r\n                                type=\"author\"\r\n                                placeholder=\"author\"\r\n                                onChange={this.update('author')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('title')(\r\n                            <Input\r\n                                type=\"title\"\r\n                                placeholder=\"title\"\r\n                                onChange={this.update('title')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('description')(\r\n                            <Input\r\n                                type=\"description\"\r\n                                placeholder=\"description\"\r\n                                onChange={this.update('description')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {getFieldDecorator('cover_img_uri')(\r\n                            <Input\r\n                                type=\"cover_img_url\"\r\n                                placeholder=\"cover_img_url\"\r\n                                onChange={this.update('cover_img_url')}\r\n                                required\r\n                            />,\r\n                        )}\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            上传\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n                <Upload {...props}>\r\n                    <Button>\r\n                        <Icon type=\"upload\" /> 上传epub和svg图片,命名需和title一致\r\n                    </Button>\r\n                </Upload>\r\n                <h1 className='logo'><strong>删除书籍</strong></h1>\r\n                <Search placeholder=\"输入删除书籍的title\"\r\n                        enterButton=\"删除\"\r\n                        onSearch={(value) => {\r\n                            fetch(window.webBase+\"/api/delete_book/\"+value);\r\n                        }}/>\r\n            </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst WrappedForm = Form.create({ name: 'upload' })(Index);\r\nexport  default  WrappedForm;","import App from './App';\r\n//must import app container where it is rendered\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { HashRouter} from 'react-router-dom';\r\nimport {persistStore, persistCombineReducers} from 'redux-persist';\r\nimport { PersistGate } from 'redux-persist/es/integration/react';\r\nconst Root = ({ store }) => (\r\n    <Provider store={ store }>\r\n        <HashRouter>\r\n            <PersistGate persistor={persistStore(store)}>\r\n                <App />\r\n            </PersistGate>\r\n\r\n        </HashRouter>\r\n    </Provider>\r\n);\r\n\r\nexport default Root;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import merge from 'lodash/merge';\r\n\r\nimport {\r\n    RECEIVE_CURRENT_USER,\r\n} from '../actions/session_actions';\r\n\r\nconst nullUser = Object.freeze({\r\n    currentUser: null,\r\n});\r\n\r\nconst SessionReducer = (state = nullUser, action) => {\r\n    Object.freeze(state);\r\n    switch(action.type) {\r\n        case RECEIVE_CURRENT_USER:\r\n            const currentUser = action.currentUser;\r\n            return merge({}, nullUser, {\r\n                currentUser\r\n            });\r\n        case 'LOGOUT':\r\n            return nullUser;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default SessionReducer;\r\n","import { RECEIVE_BOOKS, RECEIVE_ONE_BOOK,RECEIVE_COMMENT } from '../actions/book_actions';\r\nimport { merge } from 'lodash';\r\n\r\n\r\nconst BooksReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case RECEIVE_BOOKS:\r\n            //console.log(merge({}, state, action.book));\r\n            return merge({}, null, action.book);\r\n        case RECEIVE_ONE_BOOK:\r\n            return merge({}, state, { [action.book.id]: action.book } );\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default BooksReducer;\r\n","import { RECEIVE_ERRORS, CLEAR_ERRORS } from '../actions/error_actions';\r\nimport { merge } from 'lodash';\r\n\r\nconst ErrorsReducer = (state = [], action) => {\r\n\r\n    switch (action.type) {\r\n        case RECEIVE_ERRORS:\r\n            console.log(action);\r\n            return merge({}, state, action.errors);\r\n        case CLEAR_ERRORS:\r\n            return [];\r\n        default:\r\n            return state;\r\n    }\r\n\r\n};\r\n\r\nexport default ErrorsReducer;\r\n","import { combineReducers } from 'redux';\r\nimport SessionReducer from './session_reducer';\r\nimport BooksReducer from './book_reducer';\r\nimport ErrorReducer from './error_reducer';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    session: SessionReducer,\r\n    books: BooksReducer,\r\n    errors: ErrorReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\n\r\n// Logger with default options\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer  from '../reducers/root_reducer';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport {persistStore, persistReducer} from 'redux-persist';\r\n\r\nimport storage from 'redux-persist/lib/storage'\r\nconst middleware = [thunk];\r\n\r\nconst config = {\r\n    key: 'root',\r\n    storage,\r\n};\r\nlet reducer = persistReducer(config, rootReducer);\r\n\r\nexport default function configureStore() {\r\n    return  createStore(reducer, composeWithDevTools(\r\n        applyMiddleware(...middleware)\r\n    ));\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './components/root';\nimport * as serviceWorker from './serviceWorker';\nimport configureStore from './store/store';\nconst reduxStore = configureStore();\nwindow.webBase = \"https://www.mooooon333.cn:5000/\";\nReactDOM.render(<Root store={reduxStore}/>, document.getElementById('root'));\n//ReactDOM.render(<Root/>, document.getElementById('root'));\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}